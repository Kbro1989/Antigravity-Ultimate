import{r,j as e,a as S}from"./main-Cu5wNbky.js";import{u as _}from"./useNotification-BnnzYWaB.js";import{S as A}from"./Standard3DViewer-DILu7rNm.js";import"./Stage-Bg7cP_81.js";import"./three.module-aN59MUBe.js";import"./constants-DucYOER3.js";import"./with-selector-GgVLmVSD.js";import"./Float-CYYsNKHK.js";const T=({asset:a,onSave:n,onCancel:c})=>{const[o,h]=r.useState(a.name||""),[u,b]=r.useState(a.category||"items"),[m,g]=r.useState(a.tags?.join(", ")||""),[f,l]=r.useState(a.examine||""),[d,j]=r.useState("#438ab5"),[x,p]=r.useState(100),v=()=>{n({...a,name:o,category:u,tags:m.split(",").map(s=>s.trim()).filter(Boolean),examine:f})};return e.jsxs("div",{className:"flex flex-col h-full glass-ultra border-l border-white/5 animate-in slide-in-from-right duration-500 w-80",children:[e.jsxs("div",{className:"p-6 border-b border-white/5 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-[10px] font-black text-neon-cyan tracking-[0.4em] uppercase",children:"Asset Annotator"}),e.jsx("span",{className:`text-[7px] px-2 py-0.5 rounded-full font-black uppercase tracking-widest ${a.gameSource==="classic"?"bg-amber-500/20 text-amber-400 border border-amber-500/30 shadow-[0_0_10px_rgba(245,158,11,0.2)] animate-pulse":"bg-cyan-500/20 text-cyan-400 border border-cyan-500/30"}`,children:a.gameSource==="classic"?"TRUTH_ANCHOR":"Modern Era"})]}),e.jsxs("div",{className:"text-[8px] text-white/30 uppercase mt-1",children:["ID: ",a.id," â€¢ SOURCE: ",a.gameSource.toUpperCase()]})]}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-white/5 rounded-full transition-all text-white/40 hover:text-white",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-[9px] font-black text-white/40 uppercase tracking-widest border-b border-white/5 pb-2",children:"Visual Modification"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[8px] font-black text-white/60 uppercase",children:"Chroma Filter"}),e.jsx("div",{className:"w-12 h-6 rounded-lg pointer-events-none border border-white/10",style:{backgroundColor:d}})]}),e.jsx("input",{type:"color",value:d,onChange:s=>j(s.target.value),className:"w-full h-10 rounded-xl bg-transparent border-none cursor-pointer p-0"}),e.jsxs("div",{className:"space-y-2 text-[8px] font-black text-white/40 uppercase",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Luminance Intensity"}),e.jsxs("span",{className:"text-neon-cyan",children:[x,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"200",value:x,onChange:s=>p(parseInt(s.target.value)),className:"w-full h-1 bg-white/5 rounded-lg appearance-none cursor-pointer accent-neon-cyan"})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between pb-2",children:[e.jsx("div",{className:"text-[9px] font-black text-white/40 uppercase tracking-widest",children:"Identification"}),a.gameSource==="classic"&&e.jsx("div",{className:"text-[7px] font-black text-amber-500 uppercase tracking-tighter bg-amber-500/5 px-2 py-0.5 rounded border border-amber-500/20",children:"Reality Source"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[8px] font-black text-white/60 uppercase",children:"Asset Name"}),e.jsx("input",{type:"text",value:o,onChange:s=>h(s.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-[10px] text-white focus:outline-none focus:border-neon-cyan/50 transition-all font-bold",placeholder:"New Entity Name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[8px] font-black text-white/60 uppercase",children:"Category"}),e.jsxs("select",{value:u,onChange:s=>b(s.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-[10px] text-white focus:outline-none focus:border-neon-cyan/50 transition-all font-bold appearance-none cursor-pointer",children:[e.jsx("option",{value:"items",children:"Items"}),e.jsx("option",{value:"npcs",children:"NPCs"}),e.jsx("option",{value:"objects",children:"Objects"}),e.jsx("option",{value:"models",children:"Models"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[8px] font-black text-white/60 uppercase",children:"Semantic Tags"}),e.jsx("input",{type:"text",value:m,onChange:s=>g(s.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-[10px] text-white focus:outline-none focus:border-neon-cyan/50 transition-all font-bold",placeholder:"e.g. boss, rare, legacy"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[8px] font-black text-white/60 uppercase",children:"Examine Record"}),e.jsx("textarea",{value:f,onChange:s=>l(s.target.value),className:"w-full bg-white/5 border border-white/10 rounded-2xl px-4 py-3 text-[10px] text-white focus:outline-none focus:border-neon-cyan/50 transition-all font-bold h-24 resize-none",placeholder:"Ancient text describing this artifact..."})]})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-white/5 space-y-3",children:[e.jsxs("button",{onClick:v,className:"w-full py-4 bg-white text-black font-black text-[10px] uppercase tracking-[0.2em] rounded-2xl hover:bg-neon-cyan transition-all flex items-center justify-center gap-2 group shadow-xl hover:shadow-neon-cyan/20",children:[e.jsx("svg",{className:"w-3 h-3 group-hover:animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}),"Commit Metadata"]}),e.jsx("div",{className:"text-[7px] text-white/20 text-center uppercase tracking-widest",children:"SYNCING WITH GLOBAL_MEMORY_VAULT"})]})]})};function $(){const a=S(),{addNotification:n}=_(),[c,o]=r.useState(!1),[h,u]=r.useState({vertices:"12.5k",faces:"24.2k",density:"High"}),[b,m]=r.useState("Smooth"),[g,f]=r.useState(),[l,d]=r.useState(null),[j,x]=r.useState(!1),[p,v]=r.useState("geomancy"),[s,k]=r.useState(""),[w,C]=r.useState("C:\\Users\\Destiny\\Desktop\\Pick of Gods\\3D model\\model.glb");r.useEffect(()=>{const t=i=>{console.log("[MeshWorkspace] Received passed asset:",i),d(i),f(i.url),C(void 0),x(!0),n("success",`Relic Received: ${i.metadata?.name||i.id}`)};return a.limbs.on("project_asset_passed",t),()=>a.limbs.off("project_asset_passed",t)},[a,n]);const y=async t=>{o(!0);try{const i=await a.callLimb("mesh","mesh_process_mesh",{operation:t,parameters:{mode:b,ratio:.45,assetId:l?.id}});n("info",`Geomancy: Initializing ${t.toUpperCase()}...`),setTimeout(()=>{t==="remesh"&&u({vertices:"6.2k",faces:"12.1k",density:"Optimized"}),n("success",`${t.toUpperCase()} Complete: Topology Stabilized`),o(!1)},1e3)}catch(i){n("error",`Geomancy Fault: ${i.message}`),o(!1)}},N=async t=>{o(!0),n("info",`AI Architect: ${t.toUpperCase()} in progress...`);try{await a.callLimb("mesh","mesh_evolve_mesh",{directive:t,sourceRelic:l||{id:"current",type:"buffer"}}),setTimeout(()=>{n("success","Evolution Complete: Grounded in Truth"),o(!1)},2e3)}catch(i){n("error",`Evolution Fault: ${i.message}`),o(!1)}};return e.jsxs("div",{className:"flex-1 flex h-full bg-black/40 animate-fade-in relative overflow-hidden",children:[e.jsxs("div",{className:"flex-1 flex gap-8 p-8 overflow-hidden",children:[e.jsxs("div",{className:"flex-1 glass-ultra rounded-[40px] border border-white/5 shadow-2xl relative overflow-hidden group",children:[g||w?e.jsx(A,{modelUrl:g,localPath:w}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(0,242,255,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(0,242,255,0.03)_1px,transparent_1px)] bg-[size:50px_50px] [perspective:1000px] [transform:rotateX(60deg)_translateY(-100px)_scale(2)] origin-top opacity-40 transition-transform duration-[10s] linear"}),e.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-80 h-80 border border-neon-cyan/20 rounded-full animate-spin-slow flex items-center justify-center",children:[e.jsx("div",{className:`w-64 h-64 border border-neon-cyan/40 rotate-45 ${c?"animate-spin":"animate-spin-slow-reverse"} transition-all`}),e.jsx("div",{className:"absolute text-7xl opacity-0",children:"ðŸ”·"}),e.jsx("div",{className:"absolute text-6xl shadow-[0_0_40px_rgba(0,242,255,0.4)] transition-transform duration-500 hover:scale-110 cursor-pointer",children:"ðŸ”·"})]})]}),e.jsxs("div",{className:"absolute top-10 left-10 flex gap-4",children:[e.jsx("div",{className:"glass-ultra px-6 py-2 rounded-2xl text-[10px] font-black uppercase tracking-[0.4em] text-neon-cyan border border-neon-cyan/30 shadow-2xl",children:l?`RELIC_${l.id}`:w?"LOCAL_PREVIEW":"Editor_Active"}),(l||w)&&e.jsxs("div",{className:"glass px-6 py-2 rounded-2xl text-[10px] font-black uppercase tracking-[0.4em] text-white/40",children:["Era: ",l?.gameSource==="classic"?"Classic (Truth)":"Modern (Transient)"]})]}),c&&e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm z-20 flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-neon-cyan/20 border-t-neon-cyan rounded-full animate-spin mx-auto"}),e.jsx("div",{className:"text-[10px] font-black uppercase tracking-[0.6em] text-neon-cyan animate-pulse",children:"Calculating Polygons..."})]})}),e.jsxs("div",{className:"absolute bottom-10 left-10 text-[9px] font-mono text-white/20 flex flex-col gap-1",children:[e.jsx("span",{children:"GEOMETRY_SYNC: ACTIVE"}),e.jsx("span",{children:"LATENT_SPACE: GROUNDED"})]})]}),e.jsx("div",{className:"w-[400px] flex flex-col gap-6 overflow-y-auto pr-2",children:e.jsxs("div",{className:"glass-ultra rounded-[40px] p-8 border border-white/5 shadow-2xl flex flex-col gap-8 relative overflow-hidden bg-white/5 backdrop-blur-3xl",children:[e.jsx("div",{className:"text-[10px] font-black tracking-[0.6em] text-neon-cyan uppercase",children:"Model Forge Pro"}),e.jsxs("div",{className:"flex bg-black/40 p-1.5 rounded-[22px] border border-white/5 mb-2",children:[e.jsx("button",{onClick:()=>v("geomancy"),className:`flex-1 py-2.5 rounded-2xl text-[9px] font-black uppercase tracking-widest transition-all ${p==="geomancy"?"bg-white text-black shadow-xl":"text-white/30 hover:text-white"}`,children:"Geomancy"}),e.jsx("button",{onClick:()=>v("synthesis"),className:`flex-1 py-2.5 rounded-2xl text-[9px] font-black uppercase tracking-widest transition-all ${p==="synthesis"?"bg-neon-cyan text-black shadow-[0_0_20px_rgba(0,242,255,0.3)]":"text-white/30 hover:text-white"}`,children:"Synthesis"})]}),p==="geomancy"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"text-[9px] font-black uppercase tracking-[0.4em] text-white/30 border-b border-white/5 pb-2",children:"Topological Ops"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{id:"remesh",label:"Pro Remesh",icon:"ðŸ•¸ï¸"},{id:"smooth",label:"Neural Smooth",icon:"ðŸ§Š"},{id:"decimate",label:"Quantize",icon:"ðŸ“"},{id:"subdivide",label:"Fractal Divide",icon:"âœ¨"}].map(t=>e.jsxs("button",{onClick:()=>y(t.id),className:"p-4 glass rounded-2xl border border-white/5 flex flex-col items-center gap-2 hover:border-white/20 hover:bg-white/5 transition-all group",children:[e.jsx("span",{className:"text-lg group-hover:scale-125 transition-transform",children:t.icon}),e.jsx("span",{className:"text-[8px] font-black uppercase text-white/40 group-hover:text-white transition-colors",children:t.label})]},t.id))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"text-[9px] font-black uppercase tracking-[0.4em] text-white/30 border-b border-white/5 pb-2",children:"Sculpting Matrix"}),e.jsx("div",{className:"flex gap-2",children:["Smooth","Inflate","Flatten"].map(t=>e.jsx("button",{onClick:()=>m(t),className:`flex-1 py-3 rounded-xl text-[9px] font-black transition-all border ${b===t?"bg-neon-cyan text-black border-neon-cyan shadow-[0_0_15px_rgba(0,242,255,0.3)]":"bg-white/5 text-white/40 border-white/5 hover:border-white/20"}`,children:t.toUpperCase()},t))})]})]}):e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-[9px] font-black uppercase tracking-[0.4em] text-neon-cyan border-b border-neon-cyan/20 pb-2",children:"Geometric DNA Directive"}),e.jsx("textarea",{value:s,onChange:t=>k(t.target.value),placeholder:"Describe topological evolution (e.g., 'Evolve into crystalline structure', 'Add ancient runic carvings')...",className:"w-full h-32 bg-black/40 border border-white/10 rounded-2xl p-4 text-[11px] font-mono text-white/70 outline-none focus:border-neon-cyan/40 transition-all resize-none shadow-inner"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-[9px] font-black uppercase tracking-[0.4em] text-white/30 border-b border-white/5 pb-2",children:"Truth Anchors"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:[{id:"rsc_lift",label:"RSC Authenticity Lift",desc:"Map indices to high-poly targets"},{id:"voxelize",label:"Cubic Voxelization",desc:"Transform into retro voxel truth"},{id:"fractal",label:"Fractal Garnish",desc:"Apply procedural complexity"}].map(t=>e.jsxs("button",{onClick:()=>N(t.label),className:"p-4 glass rounded-2xl border border-white/5 flex flex-col items-start gap-1 hover:border-neon-cyan/30 hover:bg-neon-cyan/5 transition-all group text-left",children:[e.jsx("span",{className:"text-[9px] font-black uppercase text-white group-hover:text-neon-cyan transition-colors",children:t.label}),e.jsx("span",{className:"text-[8px] text-white/30 uppercase tracking-tighter",children:t.desc})]},t.id))})]}),e.jsx("button",{onClick:()=>N(s),disabled:!s||c,className:"w-full py-5 rounded-2xl bg-neon-cyan text-black font-black text-xs tracking-[0.4em] uppercase shadow-[0_0_30px_rgba(0,242,255,0.4)] hover:scale-[1.02] transition-all disabled:opacity-20 disabled:grayscale",children:"Synthesize Reality"})]}),e.jsxs("div",{className:"space-y-6 pt-4 border-t border-white/5",children:[e.jsx("div",{className:"text-[9px] font-black uppercase tracking-[0.4em] text-white/30 mb-2",children:"Topology Metadata"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"glass rounded-[24px] p-6 border border-white/5 flex flex-col gap-1 shadow-inner",children:[e.jsx("span",{className:"text-[9px] font-black text-white/20 uppercase tracking-widest",children:"Vertices"}),e.jsx("span",{className:"text-xl font-black text-white",children:h.vertices})]}),e.jsxs("div",{className:"glass rounded-[24px] p-6 border border-white/5 flex flex-col gap-1 shadow-inner",children:[e.jsx("span",{className:"text-[9px] font-black text-white/20 uppercase tracking-widest",children:"Faces"}),e.jsx("span",{className:"text-xl font-black text-white",children:h.faces})]})]})]}),e.jsx("div",{className:"space-y-4 pt-4 border-t border-white/5",children:e.jsx("button",{onClick:()=>y("export"),className:`w-full py-5 rounded-2xl font-black text-xs tracking-[0.4em] transition-all uppercase shadow-2xl flex items-center justify-center gap-3
                                    ${c?"bg-neon-cyan/20 text-white animate-pulse":"bg-white/5 text-white/40 border border-white/10 hover:bg-white hover:text-black hover:shadow-[0_0_40px_rgba(0,242,255,0.4)]"}
                                `,children:c?"Synthesizing...":"ðŸš€ Commit to Archive"})})]})})]}),j&&l&&e.jsx("div",{className:"h-full border-l border-white/5 z-50",children:e.jsx(T,{asset:l,onSave:t=>{d(t),n("success","Truth Anchor Updated")},onCancel:()=>x(!1)})})]})}export{$ as MeshWorkspace};
