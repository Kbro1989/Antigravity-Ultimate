import{r as c,R as r,j as e}from"./main-Cu5wNbky.js";import{u as F,a as L,b as Z,P as q,c as H,d as U,e as W,f as K,R as X,H as P,g as M}from"./FlowWorkspace-Bh6ydW8f.js";import{N as _,w as Y}from"./workflowEngine-DKtSMjvB.js";import"./with-selector-GgVLmVSD.js";import"./index-DXYVQ0Sw.js";function G(t,a){if(Object.is(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;if(t instanceof Map&&a instanceof Map){if(t.size!==a.size)return!1;for(const[o,i]of t)if(!Object.is(i,a.get(o)))return!1;return!0}if(t instanceof Set&&a instanceof Set){if(t.size!==a.size)return!1;for(const o of t)if(!a.has(o))return!1;return!0}const l=Object.keys(t);if(l.length!==Object.keys(a).length)return!1;for(const o of l)if(!Object.prototype.hasOwnProperty.call(a,o)||!Object.is(t[o],a[o]))return!1;return!0}function J(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},r.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Q(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},r.createElement("path",{d:"M0 0h32v4.2H0z"}))}function A(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},r.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function B(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},r.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function ee(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},r.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const O=({children:t,className:a,...l})=>r.createElement("button",{type:"button",className:H(["react-flow__controls-button",a]),...l},t);O.displayName="ControlButton";const te=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),R=({style:t,showZoom:a=!0,showFitView:l=!0,showInteractive:o=!0,fitViewOptions:i,onZoomIn:d,onZoomOut:g,onFitView:w,onInteractiveChange:N,className:E,children:x,position:m="bottom-left"})=>{const h=F(),[$,z]=c.useState(!1),{isInteractive:y,minZoomReached:S,maxZoomReached:b}=L(te,G),{zoomIn:v,zoomOut:j,fitView:k}=Z();if(c.useEffect(()=>{z(!0)},[]),!$)return null;const p=()=>{v(),d?.()},n=()=>{j(),g?.()},s=()=>{k(i),w?.()},u=()=>{h.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),N?.(!y)};return r.createElement(q,{className:H(["react-flow__controls",E]),position:m,style:t,"data-testid":"rf__controls"},a&&r.createElement(r.Fragment,null,r.createElement(O,{onClick:p,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:b},r.createElement(J,null)),r.createElement(O,{onClick:n,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:S},r.createElement(Q,null))),l&&r.createElement(O,{className:"react-flow__controls-fitview",onClick:s,title:"fit view","aria-label":"fit view"},r.createElement(A,null)),o&&r.createElement(O,{className:"react-flow__controls-interactive",onClick:u,title:"toggle interactivity","aria-label":"toggle interactivity"},y?r.createElement(ee,null):r.createElement(B,null)),x)};R.displayName="Controls";var ae=c.memo(R);function se(t,a){if(Object.is(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;if(t instanceof Map&&a instanceof Map){if(t.size!==a.size)return!1;for(const[o,i]of t)if(!Object.is(i,a.get(o)))return!1;return!0}if(t instanceof Set&&a instanceof Set){if(t.size!==a.size)return!1;for(const o of t)if(!a.has(o))return!1;return!0}const l=Object.keys(t);if(l.length!==Object.keys(a).length)return!1;for(const o of l)if(!Object.prototype.hasOwnProperty.call(a,o)||!Object.is(t[o],a[o]))return!1;return!0}var f;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(f||(f={}));function ne({color:t,dimensions:a,lineWidth:l}){return r.createElement("path",{stroke:t,strokeWidth:l,d:`M${a[0]/2} 0 V${a[1]} M0 ${a[1]/2} H${a[0]}`})}function re({color:t,radius:a}){return r.createElement("circle",{cx:a,cy:a,r:a,fill:t})}const le={[f.Dots]:"#91919a",[f.Lines]:"#eee",[f.Cross]:"#e2e2e2"},oe={[f.Dots]:1,[f.Lines]:1,[f.Cross]:6},ce=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function T({id:t,variant:a=f.Dots,gap:l=20,size:o,lineWidth:i=1,offset:d=2,color:g,style:w,className:N}){const E=c.useRef(null),{transform:x,patternId:m}=L(ce,se),h=g||le[a],$=o||oe[a],z=a===f.Dots,y=a===f.Cross,S=Array.isArray(l)?l:[l,l],b=[S[0]*x[2]||1,S[1]*x[2]||1],v=$*x[2],j=y?[v,v]:b,k=z?[v/d,v/d]:[j[0]/d,j[1]/d];return r.createElement("svg",{className:H(["react-flow__background",N]),style:{...w,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:E,"data-testid":"rf__background"},r.createElement("pattern",{id:m+t,x:x[0]%b[0],y:x[1]%b[1],width:b[0],height:b[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${k[0]},-${k[1]})`},z?r.createElement(re,{color:h,radius:v/d}):r.createElement(ne,{dimensions:j,color:h,lineWidth:i})),r.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${m+t})`}))}T.displayName="Background";var ie=c.memo(T);var de={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ue=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),D=(t,a)=>{const l=c.forwardRef(({color:o="currentColor",size:i=24,strokeWidth:d=2,absoluteStrokeWidth:g,className:w="",children:N,...E},x)=>c.createElement("svg",{ref:x,...de,width:i,height:i,stroke:o,strokeWidth:g?Number(d)*24/Number(i):d,className:["lucide",`lucide-${ue(t)}`,w].join(" "),...E},[...a.map(([m,h])=>c.createElement(m,h)),...Array.isArray(N)?N:[N]]));return l.displayName=`${t}`,l};const xe=D("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);const me=D("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const pe=D("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);const fe=D("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),he=({data:t})=>{const a=_[t.type];return e.jsxs("div",{className:"px-4 py-2 shadow-xl rounded-md bg-[#0a1222] border border-cyan-500/30 min-w-[150px]",children:[e.jsxs("div",{className:"flex items-center border-b border-cyan-500/20 pb-2 mb-2",children:[e.jsx("div",{className:"text-xl mr-2",children:a.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-cyan-400",children:t?.label??"Unknown"}),e.jsx("div",{className:"text-[10px] text-slate-500 uppercase",children:a?.type??"UNKNOWN"})]})]}),a.inputs.map((l,o)=>e.jsxs("div",{className:"relative h-6 flex items-center text-[10px] text-slate-400",children:[e.jsx(P,{type:"target",position:M.Left,id:l.name,style:{background:"#06b6d4",width:"8px",height:"8px"}}),e.jsx("span",{className:"ml-3",children:l.name})]},`in-${o}`)),a.outputs.map((l,o)=>e.jsxs("div",{className:"relative h-6 flex items-center justify-end text-[10px] text-slate-400",children:[e.jsx("span",{className:"mr-3",children:l.name}),e.jsx(P,{type:"source",position:M.Right,id:l.name,style:{background:"#10b981",width:"8px",height:"8px"}})]},`out-${o}`))]})},ge={custom:he},je=()=>{const[t,a]=c.useState([]),[l,o]=c.useState([]),[i,d]=c.useState(null),[g,w]=c.useState(!1),[N,E]=c.useState(!1),[x,m]=c.useState([]),[h,$]=c.useState(!1),z=c.useCallback(n=>a(s=>U(n,s)),[]),y=c.useCallback(n=>o(s=>W(n,s)),[]),S=c.useCallback(n=>o(s=>K(n,s)),[]),b=c.useCallback(n=>{n.preventDefault(),n.dataTransfer.dropEffect="move"},[]),v=c.useCallback(n=>{n.preventDefault();const s=n.dataTransfer.getData("application/reactflow");if(!s)return;const u={x:n.clientX-400,y:n.clientY-150},I=_[s],C={id:`node_${Date.now()}`,type:"custom",position:u,data:{label:I.label,type:s,parameters:{},onParameterChange:(V,ye)=>{}}};a(V=>V.concat(C))},[]),j=async()=>{w(!0),m(s=>[...s,`[${new Date().toLocaleTimeString()}] Starting workflow execution...`]);const n={id:"temp-run",name:"Interactive Run",nodes:t.map(s=>({id:s.id,type:s.data.type,position:s.position,parameters:s.data.parameters})),connections:l.map(s=>({id:s.id,sourceNode:s.source,sourceOutput:s.sourceHandle||"default",targetNode:s.target,targetInput:s.targetHandle||"default"}))};try{const s=await Y.execute(n);s.success?m(u=>[...u,`[${new Date().toLocaleTimeString()}] Execution successful!`,JSON.stringify(s.outputs,null,2)]):m(u=>[...u,`[${new Date().toLocaleTimeString()}] Execution failed: ${s.error}`])}catch(s){m(u=>[...u,`[${new Date().toLocaleTimeString()}] Critical Failure: ${s}`])}finally{w(!1)}},k=(n,s,u)=>{a(I=>I.map(C=>C.id===n?{...C,data:{...C.data,parameters:{...C.data.parameters,[s]:u}}}:C))},p=c.useMemo(()=>t.find(n=>n.id===i),[t,i]);return e.jsxs("div",{className:"flex h-full w-full bg-[#050a15] text-slate-300 font-sans overflow-hidden",children:[e.jsxs("div",{className:"w-64 border-r border-cyan-900/30 p-6 flex flex-col gap-6 bg-[#0a1222]/50 backdrop-blur-xl shrink-0 overflow-y-auto no-scrollbar",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-cyan-500",children:"Node Palette"}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-cyan-500 animate-pulse shadow-[0_0_10px_#00f2ff]"})]}),e.jsx("div",{className:"space-y-3",children:Object.keys(_).map(n=>{const s=_[n];return e.jsxs("div",{onDragStart:u=>u.dataTransfer.setData("application/reactflow",n),draggable:!0,className:"p-4 bg-[#050a15] border border-cyan-900/20 rounded-2xl cursor-grab hover:border-cyan-500/50 flex items-center gap-4 transition-all group hover:scale-[1.02] shadow-lg active:scale-[0.98]",children:[e.jsx("span",{className:"text-2xl grayscale group-hover:grayscale-0 transition-all",children:s.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-bold text-cyan-50",children:s.label}),e.jsx("div",{className:"text-[8px] text-slate-600 uppercase font-black tracking-tighter",children:s.type})]})]},n)})}),e.jsxs("div",{className:"mt-auto pt-6 border-t border-cyan-900/20",children:[e.jsx("div",{className:"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2",children:"Neural Link Status"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),e.jsx("span",{className:"text-[10px] text-slate-400",children:"Engine Ready"})]})]})]}),e.jsxs("div",{className:"flex-1 relative h-full bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-[#0a1222] via-[#050a15] to-[#050a15]",onDrop:v,onDragOver:b,children:[e.jsxs("div",{className:"absolute top-6 left-6 z-10 flex flex-col",children:[e.jsxs("h1",{className:"text-2xl font-black text-white uppercase tracking-tighter flex items-center gap-3",children:[e.jsx("span",{className:"text-cyan-500",children:"Pipeline"})," Architect"]}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.5em] text-cyan-900/60 mt-1 ml-1",children:"v4.0 Finalizer"})]}),e.jsxs("div",{className:"absolute top-6 right-6 z-10 flex gap-3",children:[e.jsxs("button",{onClick:j,className:`flex items-center gap-3 px-8 py-3 rounded-2xl font-black uppercase tracking-widest text-[10px] transition-all shadow-2xl ${g?"bg-amber-600/20 text-amber-500 border border-amber-500/50 animate-pulse":"bg-emerald-600 text-white hover:bg-emerald-500 shadow-emerald-500/20"}`,children:[g?e.jsx(pe,{size:14,className:"animate-spin"}):e.jsx(xe,{size:14})," ",g?"Processing...":"Execute Sequence"]}),e.jsx("button",{onClick:()=>$(!h),className:`p-3 rounded-2xl border transition-all ${h?"bg-cyan-600 text-white border-cyan-400 shadow-lg shadow-cyan-500/20":"bg-[#0a1222]/80 text-cyan-400 border-cyan-900/30 hover:bg-cyan-900/20"}`,children:e.jsx(me,{size:20})})]}),e.jsxs(X,{nodes:t,edges:l,onNodesChange:z,onEdgesChange:y,onConnect:S,onNodeClick:(n,s)=>d(s.id),nodeTypes:ge,fitView:!0,className:"no-scrollbar",children:[e.jsx(ie,{color:"#00f2ff",gap:20,size:1}),e.jsx(ae,{className:"bg-[#0a1222] border border-cyan-900/40 rounded-xl overflow-hidden [&>button]:border-cyan-900/20 [&>button]:text-cyan-400 [&>button:hover]:bg-cyan-900/20"})]}),e.jsxs("div",{className:"absolute bottom-6 left-6 right-6 h-32 bg-[#050a15]/80 backdrop-blur-xl border border-cyan-900/30 rounded-3xl p-6 overflow-hidden flex flex-col gap-2 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-cyan-500/50",children:"Execution Logs"}),e.jsx("button",{onClick:()=>m([]),className:"text-[8px] text-slate-500 hover:text-white uppercase font-black transition-colors underline underline-offset-4",children:"Purge Buffer"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto font-mono text-[10px] space-y-1 no-scrollbar opacity-80",children:[x.length===0&&e.jsx("div",{className:"text-slate-800 uppercase italic",children:"Awaiting input signal..."}),x.map((n,s)=>e.jsx("div",{className:n.includes("failed")||n.includes("Failure")?"text-rose-500":"text-cyan-400/80",children:n},s))]})]})]}),h&&p&&e.jsxs("div",{className:"w-80 border-l border-cyan-900/30 bg-[#0a1222]/95 backdrop-blur-2xl p-8 flex flex-col gap-8 shrink-0 animate-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-[11px] font-black uppercase tracking-widest text-cyan-400",children:"Node Properties"}),e.jsxs("p",{className:"text-[9px] text-slate-500 uppercase font-black mt-1",children:["Configuring: ",p.data.label]})]}),e.jsx("button",{onClick:()=>d(null),className:"text-slate-600 hover:text-white",children:"Ã—"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar space-y-8",children:_[p.data.type].parameters.map(n=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block",children:n.label||n.name}),n.type==="string"?e.jsx("input",{type:"text",value:String(p.data?.parameters?.[n.name]??""),onChange:s=>k(p.id,n.name,s.target.value),className:"w-full bg-black/40 border border-cyan-900/40 rounded-xl px-4 py-3 text-xs text-cyan-50 outline-none focus:border-cyan-500 transition-colors"}):n.type==="number"?e.jsx("input",{type:"number",value:Number(p.data?.parameters?.[n.name]??0),onChange:s=>k(p.id,n.name,parseFloat(s.target.value)),className:"w-full bg-black/40 border border-cyan-900/40 rounded-xl px-4 py-3 text-xs text-cyan-50 outline-none focus:border-cyan-500"}):n.type==="select"?e.jsxs("select",{value:String(p.data?.parameters?.[n.name]??""),onChange:s=>k(p.id,n.name,s.target.value),className:"w-full bg-black/40 border border-cyan-900/40 rounded-xl px-4 py-3 text-xs text-cyan-50 outline-none focus:border-cyan-500 appearance-none",children:[e.jsx("option",{value:"",children:"Select Option"}),n.options?.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]}):null]},n.name))}),e.jsx("div",{className:"pt-6 border-t border-cyan-900/20",children:e.jsxs("button",{onClick:()=>{a(n=>n.filter(s=>s.id!==p.id)),d(null)},className:"w-full py-4 bg-rose-600/10 hover:bg-rose-600 text-rose-500 hover:text-white border border-rose-500/20 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all transition-all flex items-center justify-center gap-2",children:[e.jsx(fe,{size:14})," Delete Node"]})})]})]})};export{je as N8NWorkflow,je as default};
