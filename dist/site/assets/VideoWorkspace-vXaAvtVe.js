import{a as D,b as P,r as a,j as e}from"./main-Cu5wNbky.js";import{u as I}from"./useNotification-BnnzYWaB.js";function z(){const{callLimb:C}=D(),{addNotification:c}=I(),{sourceRelic:o}=P(),[s,m]=a.useState(!1),[d,g]=a.useState("sequence"),[h,f]=a.useState("An epic battle scene on a volcanic ridge..."),[w,M]=a.useState(`// Cinematic Directive Alpha
camera_reveal(target: RELIC_DNA, duration: 5s);
actor_spawn(npc: 5, pose: "EMOTE_VICTORY");`),[v,$]=a.useState("ORBITAL"),[i,j]=a.useState(null),[N,u]=a.useState(0),[b,A]=a.useState(!1),[r,E]=a.useState(!1),[y,T]=a.useState({rtt:42,jitter:3}),x=30,k=async t=>{m(!0);try{const n=o||{id:"genesis",type:"system"};c("info","Scene Builder: Initializing latent cinematic buffer...");const l=await C("video",t==="video_render_cutscene"?"render":t,{prompt:d==="director"?h:w,options:{cameraMode:v,sourceRelic:n,fidelity:"PRO_GRADE"}});if(l.status==="success"){const p=l.uid||l.videoUrl?.split("/").pop(),_="pog-network",R=r?`https://customer-${_}.cloudflarestream.com/${p}/manifest/video.whep`:`https://customer-${_}.cloudflarestream.com/${p}/manifest/video.m3u8`;j(R),c("success",`Cinema Engine: ${r?"Magical HDMI Link (WHEP)":"Stream Manifest"} Distributed`)}else c("error",`Cinema Engine Error: ${l.message||"Unknown fault"}`)}catch(n){c("error",`Cinema Engine Error: ${n.message}`)}finally{m(!1)}},S=t=>{const n=Math.floor(t/60),l=Math.floor(t%60),p=Math.floor(t%1*100);return`00:${n.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}:${p.toString().padStart(2,"0")}`};return e.jsx("div",{className:"flex-1 flex flex-col h-full bg-black/40 animate-fade-in relative overflow-hidden",children:e.jsxs("div",{className:"flex-1 flex gap-6 p-6 overflow-hidden",children:[e.jsxs("div",{className:"flex-1 glass-ultra rounded-[40px] relative overflow-hidden border border-white/5 flex flex-col group shadow-2xl",children:[e.jsxs("div",{className:"absolute inset-0 bg-black",children:[i?e.jsx("video",{className:`w-full h-full object-cover transition-opacity duration-1000 ${s?"opacity-20":"opacity-80"}`,loop:!0,autoPlay:!0,muted:!0,playsInline:!0,children:e.jsx("source",{src:i,type:r?"application/vnd.apple.mpegurl":"video/mp4"})},i):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[radial-gradient(circle,rgba(0,242,255,0.05)_0%,transparent_70%)]",children:e.jsx("div",{className:"text-[10px] font-black uppercase tracking-[0.8em] text-white/10",children:"Waiting for Render Directive"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-80"}),s&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-neon-cyan/20 border-t-neon-cyan rounded-full animate-spin shadow-[0_0_20px_var(--neon-cyan)]"}),e.jsx("div",{className:"text-[10px] font-black uppercase tracking-[0.6em] text-neon-cyan animate-pulse",children:"Choreographing Scene..."})]})})]}),e.jsxs("div",{className:"absolute top-6 left-6 z-10 flex gap-3",children:[e.jsx("div",{className:"glass px-4 py-2 rounded-full text-[10px] font-black tracking-widest text-white border border-white/10 uppercase bg-white/5 backdrop-blur-md",children:"Active_Scene: Cinematic_01"}),e.jsx("div",{className:"glass px-4 py-2 rounded-full text-[10px] font-black tracking-widest text-neon-cyan border border-neon-cyan/30 uppercase bg-neon-cyan/5 backdrop-blur-md",children:"Director Mode"}),e.jsx("div",{className:`glass px-4 py-2 rounded-full text-[10px] font-black tracking-widest uppercase cursor-pointer transition-all border ${r?"text-neon-cyan border-neon-cyan/50 bg-neon-cyan/10":"text-white/20 border-white/5 bg-black/40"}`,onClick:()=>{if(E(!r),i){const t=r?i.replace(".whep",".m3u8"):i.replace(".m3u8",".whep");j(t)}},children:r?"Sub-Second: ON":"Sub-Second: OFF"}),e.jsx("div",{className:"glass px-4 py-2 rounded-full text-[10px] font-black tracking-widest text-white/40 border border-white/5 uppercase bg-black/40 backdrop-blur-md",children:"30s"}),r&&e.jsxs("div",{className:"flex flex-col gap-1 items-end opacity-80 scale-90 origin-right",children:[e.jsxs("div",{className:"text-[9px] font-black tracking-widest text-neon-cyan uppercase",children:["Edge_RTT: ",y.rtt,"ms"]}),e.jsxs("div",{className:"text-[8px] font-mono text-white/40 uppercase",children:["Jitter: ",y.jitter,"ms"]})]}),e.jsx("div",{className:"glass px-4 py-2 rounded-full text-[10px] font-black tracking-widest text-amber-500 border border-amber-500/20 uppercase bg-black/40 backdrop-blur-md",children:o?`Actor: ${o.id}`:"No Actor Bound"})]}),e.jsxs("div",{className:"mt-auto p-8 z-10 space-y-4 bg-gradient-to-t from-black to-transparent",children:[e.jsxs("div",{className:"flex justify-between items-end text-[10px] font-mono text-white/50 px-2 tracking-0.2em uppercase",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-[8px] text-neon-cyan/60",children:"TIMECODE"}),e.jsx("span",{className:"text-white",children:S(N)})]}),e.jsxs("div",{className:"text-right flex flex-col gap-1",children:[e.jsx("span",{className:"text-[8px] text-white/20",children:"TRUTH_SYNC"}),e.jsx("span",{children:S(x)})]})]}),e.jsx("div",{className:"h-20 relative group/scrub cursor-pointer flex flex-col gap-1",onClick:t=>{const n=t.currentTarget.getBoundingClientRect(),l=t.clientX-n.left;u(l/n.width*x)},children:e.jsxs("div",{className:"flex-1 relative glass rounded-xl border border-white/5 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full h-[1px] bg-white/10"})}),e.jsx("div",{className:"absolute inset-y-0 left-[0%] w-[100%] bg-white/5"}),e.jsx("div",{className:"absolute h-full w-[2px] bg-neon-cyan shadow-[0_0_15px_rgba(0,242,255,1)] z-30 transition-all duration-100",style:{left:`${N/x*100}%`},children:e.jsx("div",{className:"absolute top-0 -left-1.5 w-4 h-4 rounded-b-full bg-neon-cyan shadow-xl"})}),e.jsx("div",{className:"absolute inset-y-2 left-[10%] w-[80%] glass-ultra rounded-lg border border-neon-cyan/20 flex items-center px-6",children:e.jsxs("span",{className:"text-[7px] text-neon-cyan font-black uppercase tracking-widest",children:["Master Shot Reconstruction - grounded in relic://",o?.id||"genesis"]})})]})}),e.jsxs("div",{className:"flex items-center justify-center gap-10",children:[e.jsx("button",{onClick:()=>u(0),className:"text-white/40 hover:text-white transition-all scale-125",children:"â®"}),e.jsx("button",{onClick:()=>A(!b),className:`w-14 h-14 rounded-full flex items-center justify-center border transition-all transform hover:scale-110
                                    ${b?"bg-neon-magenta text-white border-neon-magenta shadow-[0_0_20px_rgba(255,0,225,0.4)]":"bg-white text-black border-white/20 hover:bg-neon-cyan"}
                                `,children:e.jsx("span",{className:"text-xl",children:b?"â¸":"â–¶"})}),e.jsx("button",{onClick:()=>u(x),className:"text-white/40 hover:text-white transition-all scale-125",children:"â­"})]})]})]}),e.jsx("div",{className:"w-96 flex flex-col gap-6",children:e.jsxs("div",{className:"glass-ultra rounded-[40px] p-8 flex-1 flex flex-col border border-white/5 shadow-2xl bg-white/5 backdrop-blur-3xl overflow-hidden",children:[e.jsxs("div",{className:"flex gap-2 mb-8 p-1 glass rounded-2xl border border-white/5 bg-black/20",children:[e.jsx("button",{onClick:()=>g("sequence"),className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${d==="sequence"?"bg-neon-cyan/20 text-neon-cyan shadow-[0_0_15px_rgba(0,242,255,0.2)]":"text-white/20 hover:text-white/40"}`,children:"Sequence"}),e.jsx("button",{onClick:()=>g("director"),className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${d==="director"?"bg-neon-purple/20 text-neon-purple shadow-[0_0_15px_rgba(188,0,255,0.2)]":"text-white/20 hover:text-white/40"}`,children:"Director"})]}),d==="sequence"?e.jsxs("div",{className:"flex-1 flex flex-col gap-8 animate-in fade-in slide-in-from-left-4 duration-500",children:[e.jsxs("div",{className:"text-[10px] font-black tracking-[0.4em] text-neon-cyan uppercase flex items-center gap-3",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-neon-cyan animate-pulse shadow-[0_0_8px_var(--neon-cyan)]"}),"Choreography Lab"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[9px] font-black uppercase tracking-[0.2em] text-white/30 mb-3 border-b border-white/5 pb-2",children:"Manual Script"}),e.jsx("textarea",{value:w,onChange:t=>M(t.target.value),className:"w-full bg-black/40 border border-white/5 rounded-2xl p-4 text-[11px] text-white/80 font-mono resize-none focus:border-neon-cyan/50 outline-none h-32 shadow-inner",placeholder:"Envision the sequence..."})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[9px] font-black uppercase tracking-[0.2em] text-white/30 mb-3 border-b border-white/5 pb-2",children:"Camera Logic"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Dynamic","Static","Pan Left","Orbit"].map(t=>e.jsx("button",{onClick:()=>$(t),className:`py-3 rounded-xl text-[9px] font-black transition-all border ${v===t?"bg-neon-cyan text-black border-neon-cyan":"bg-white/5 text-white/40 border-white/5 hover:border-white/20"}`,children:t.toUpperCase()},t))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"text-[9px] font-black uppercase tracking-[0.4em] text-white/30 border-b border-white/5 pb-2",children:"Media Pipeline (Cloudflare Native)"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{label:"Video (H.264)",val:"Optimized MP4",color:"text-neon-cyan"},{label:"Frame (Still)",val:"AVIF / PNG / JPG",color:"text-white/60"},{label:"Spritesheet",val:"JPEG Frame Grid",color:"text-neon-magenta"},{label:"Audio Extract",val:"AAC (M4A)",color:"text-white/60"}].map(t=>e.jsxs("div",{className:"p-4 glass rounded-[24px] border border-white/5 flex flex-col gap-1 hover:border-white/20 transition-all cursor-pointer group",children:[e.jsx("span",{className:"text-[9px] font-black text-white/20 uppercase tracking-widest group-hover:text-neon-cyan/50",children:t.label}),e.jsx("span",{className:`text-[10px] font-black uppercase ${t.color}`,children:t.val})]},t.label))}),e.jsx("div",{className:"text-[8px] font-mono text-white/20 px-2 italic",children:"* Serves from Zone. Max: 100MB / 10m. Supports time/duration slicing."})]})]}),e.jsx("button",{onClick:()=>k("video_render_cutscene"),disabled:s,className:`w-full py-5 rounded-2xl mt-auto font-black text-xs tracking-[0.2em] transition-all uppercase shadow-2xl flex items-center justify-center gap-3
                                        ${s?"bg-neon-cyan/20 text-white border border-neon-cyan/50 cursor-wait":"bg-white text-black hover:bg-neon-cyan hover:shadow-[0_0_30px_rgba(0,242,255,0.4)]"}
                                    `,children:s?"Directing...":"ðŸŽ¬ Action!"})]}):e.jsxs("div",{className:"flex-1 flex flex-col gap-8 animate-in fade-in slide-in-from-right-4 duration-500",children:[e.jsxs("div",{className:"text-[10px] font-black tracking-[0.4em] text-neon-purple uppercase flex items-center gap-3",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-neon-purple animate-pulse shadow-[0_0_8px_var(--neon-purple)]"}),"Scene Director AI"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-[9px] font-black uppercase tracking-[0.4em] text-white/30 border-b border-white/5 pb-2",children:"Director's Intent"}),e.jsx("textarea",{value:h,onChange:t=>f(t.target.value),placeholder:"Describe the cinematic sequence (e.g., 'A dramatic reveal of the ancient dragon, camera orbits slowly showing the scale')...",className:"w-full h-40 bg-black/40 border border-white/10 rounded-2xl p-4 text-[11px] font-mono text-white/70 outline-none focus:border-neon-purple/40 transition-all resize-none shadow-inner"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{label:"Epic Reveal",prompt:"Cinematic wide shot sweeping across the landscape revealing the main castle"},{label:"Combat Intro",prompt:"Fast-paced rhythmic cuts showing two warriors preparing for battle"},{label:"Atmospheric",prompt:"Slow moody pan across the foggy forest with bioluminescence"},{label:"Retro Cut",prompt:"Classic frame-stepped cutscene style with sharp static angles"}].map(t=>e.jsx("button",{onClick:()=>f(t.prompt),className:"p-3 glass rounded-xl border border-white/5 hover:border-neon-purple/30 text-[9px] font-bold text-white/40 hover:text-white transition-all text-left",children:t.label},t.label))})]}),e.jsx("button",{onClick:()=>k("video_render_cutscene"),disabled:!h||s,className:`w-full py-5 rounded-2xl mt-auto font-black text-xs tracking-[0.2em] transition-all uppercase shadow-2xl flex items-center justify-center gap-3 ${s?"bg-white/10 text-white/20":"bg-neon-purple text-white hover:shadow-[0_0_30px_rgba(188,0,255,0.4)]"}`,children:s?"Rendering Scene...":"Synthesize Sequence"})]})]})})]})})}export{z as VideoWorkspace};
