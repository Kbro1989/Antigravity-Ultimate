import{c as hn,f as rn}from"./enginecache-DOiY41nD.js";import"./main-Cu5wNbky.js";import"./three.module-aN59MUBe.js";import"../src/services/rsmv/clientscript/index.ts";import"../src/services/rsmv/clientscript/interpreter.ts";const{Texture:cn,Buffer:un,TextureOp:fn}=(function(){class b{static copy$byte_A$int$byte_A$int$int(t,n,e,s,i){if(t===e){if(n===s)return;if(s>n&&s<n+i){i--;let l=n+i,o=s+i;for(i=l-i,i+=7;l>=i;){let a=o-1,h=l-1;e[o]=t[l],e[a--]=t[h--],e[a--]=t[h--],e[a--]=t[h--],e[a--]=t[h--],e[a--]=t[h--],e[a--]=t[h--],o=a-1,l=h-1,e[a]=t[h]}for(i-=7;l>=i;)e[o--]=t[l--];return}}for(i+=n,i-=7;n<i;){let l=s+1,o=n+1;e[s]=t[n],e[l++]=t[o++],e[l++]=t[o++],e[l++]=t[o++],e[l++]=t[o++],e[l++]=t[o++],e[l++]=t[o++],s=l+1,n=o+1,e[l]=t[o]}for(i+=7;n<i;)e[s++]=t[n++]}static copy(t,n,e,s,i){if((t!=null&&t instanceof Array&&(t.length==0||t[0]==null||typeof t[0]=="number")||t===null)&&(typeof n=="number"||n===null)&&(e!=null&&e instanceof Array&&(e.length==0||e[0]==null||typeof e[0]=="number")||e===null)&&(typeof s=="number"||s===null)&&(typeof i=="number"||i===null))return b.copy$byte_A$int$byte_A$int$int(t,n,e,s,i);if((t!=null&&t instanceof Array&&(t.length==0||t[0]==null||typeof t[0]=="number")||t===null)&&(typeof n=="number"||n===null)&&(e!=null&&e instanceof Array&&(e.length==0||e[0]==null||typeof e[0]=="number")||e===null)&&(typeof s=="number"||s===null)&&(typeof i=="number"||i===null))return b.copy$short_A$int$short_A$int$int(t,n,e,s,i);if((t!=null&&t instanceof Array&&(t.length==0||t[0]==null||typeof t[0]=="number")||t===null)&&(typeof n=="number"||n===null)&&(e!=null&&e instanceof Array&&(e.length==0||e[0]==null||typeof e[0]=="number")||e===null)&&(typeof s=="number"||s===null)&&(typeof i=="number"||i===null))return b.copy$int_A$int$int_A$int$int(t,n,e,s,i);if((t!=null&&t instanceof Array&&(t.length==0||t[0]==null||typeof t[0]=="number")||t===null)&&(typeof n=="number"||n===null)&&(e!=null&&e instanceof Array&&(e.length==0||e[0]==null||typeof e[0]=="number")||e===null)&&(typeof s=="number"||s===null)&&(typeof i=="number"||i===null))return b.copy$long_A$int$long_A$int$int(t,n,e,s,i);if((t!=null&&t instanceof Array&&(t.length==0||t[0]==null||typeof t[0]=="number")||t===null)&&(typeof n=="number"||n===null)&&(e!=null&&e instanceof Array&&(e.length==0||e[0]==null||typeof e[0]=="number")||e===null)&&(typeof s=="number"||s===null)&&(typeof i=="number"||i===null))return b.copy$float_A$int$float_A$int$int(t,n,e,s,i);if((t!=null&&t instanceof Array&&(t.length==0||t[0]==null||t[0]!=null)||t===null)&&(typeof n=="number"||n===null)&&(e!=null&&e instanceof Array&&(e.length==0||e[0]==null||e[0]!=null)||e===null)&&(typeof s=="number"||s===null)&&(typeof i=="number"||i===null))return b.copy$java_lang_Object_A$int$java_lang_Object_A$int$int(t,n,e,s,i);throw new Error("invalid overload")}static copy$short_A$int$short_A$int$int(t,n,e,s,i){if(t===e){if(n===s)return;if(s>n&&s<n+i){i--;let l=n+i,o=s+i;for(i=l-i,i+=7;l>=i;){let a=o-1,h=l-1;e[o]=t[l],e[a--]=t[h--],e[a--]=t[h--],e[a--]=t[h--],e[a--]=t[h--],e[a--]=t[h--],e[a--]=t[h--],o=a-1,l=h-1,e[a]=t[h]}for(i-=7;l>=i;)e[o--]=t[l--];return}}for(i+=n,i-=7;n<i;){let l=s+1,o=n+1;e[s]=t[n],e[l++]=t[o++],e[l++]=t[o++],e[l++]=t[o++],e[l++]=t[o++],e[l++]=t[o++],e[l++]=t[o++],s=l+1,n=o+1,e[l]=t[o]}for(i+=7;n<i;)e[s++]=t[n++]}static copy$int_A$int$int_A$int$int(t,n,e,s,i){if(t===e){if(n===s)return;if(s>n&&s<n+i){i--;let l=n+i,o=s+i;for(i=l-i,i+=7;l>=i;){let a=o-1,h=l-1;e[o]=t[l],e[a--]=t[h--],e[a--]=t[h--],e[a--]=t[h--],e[a--]=t[h--],e[a--]=t[h--],e[a--]=t[h--],o=a-1,l=h-1,e[a]=t[h]}for(i-=7;l>=i;)e[o--]=t[l--];return}}for(i+=n,i-=7;n<i;){let l=s+1,o=n+1;e[s]=t[n],e[l++]=t[o++],e[l++]=t[o++],e[l++]=t[o++],e[l++]=t[o++],e[l++]=t[o++],e[l++]=t[o++],s=l+1,n=o+1,e[l]=t[o]}for(i+=7;n<i;)e[s++]=t[n++]}static copy$long_A$int$long_A$int$int(t,n,e,s,i){if(t===e){if(n===s)return;if(s>n&&s<n+i){i--;let l=n+i,o=s+i;for(i=l-i,i+=3;l>=i;){let a=o-1,h=l-1;e[o]=t[l],e[a--]=t[h--],e[a--]=t[h--],o=a-1,l=h-1,e[a]=t[h]}for(i-=3;l>=i;)e[o--]=t[l--];return}}for(i+=n,i-=3;n<i;){let l=s+1,o=n+1;e[s]=t[n],e[l++]=t[o++],e[l++]=t[o++],s=l+1,n=o+1,e[l]=t[o]}for(i+=3;n<i;)e[s++]=t[n++]}static copy$float_A$int$float_A$int$int(t,n,e,s,i){if(t!==e){for(i-=7;n<i;){let l=s+1,o=n+1;e[s]=t[n],e[l++]=t[o++],e[l++]=t[o++],e[l++]=t[o++],e[l++]=t[o++],e[l++]=t[o++],e[l++]=t[o++],s=l+1,n=o+1,e[l]=t[o]}for(i+=7;n<i;)e[s++]=t[n++]}}static copy$java_lang_Object_A$int$java_lang_Object_A$int$int(t,n,e,s,i){if(t===e){if(n===s)return;if(s>n&&s<n+i){i--;let l=n+i,o=s+i;for(i=l-i,i+=7;l>=i;){let a=o-1,h=l-1;e[o]=t[l],e[a--]=t[h--],e[a--]=t[h--],e[a--]=t[h--],e[a--]=t[h--],e[a--]=t[h--],e[a--]=t[h--],o=a-1,l=h-1,e[a]=t[h]}for(i-=7;l>=i;)e[o--]=t[l--];return}}for(i+=n,i-=7;n<i;){let l=s+1,o=n+1;e[s]=t[n],e[l++]=t[o++],e[l++]=t[o++],e[l++]=t[o++],e[l++]=t[o++],e[l++]=t[o++],e[l++]=t[o++],s=l+1,n=o+1,e[l]=t[o]}for(i+=7;n<i;)e[s++]=t[n++]}static clear(t,n,e){for(e=e-7;n<e;){let s=n+1;t[n]=0,t[s++]=0,t[s++]=0,t[s++]=0,t[s++]=0,t[s++]=0,t[s++]=0,n=s+1,t[s]=0}for(e+=7;n<e;)t[n++]=0}static fill$short_A$int$int$short(t,n,e,s){for(e=e-7;n<e;){let i=n+1;t[n]=s,t[i++]=s,t[i++]=s,t[i++]=s,t[i++]=s,t[i++]=s,t[i++]=s,n=i+1,t[i]=s}for(e+=7;n<e;)t[n++]=s}static fill(t,n,e,s){if((t!=null&&t instanceof Array&&(t.length==0||t[0]==null||typeof t[0]=="number")||t===null)&&(typeof n=="number"||n===null)&&(typeof e=="number"||e===null)&&(typeof s=="number"||s===null))return b.fill$short_A$int$int$short(t,n,e,s);if((t!=null&&t instanceof Array&&(t.length==0||t[0]==null||typeof t[0]=="number")||t===null)&&(typeof n=="number"||n===null)&&(typeof e=="number"||e===null)&&(typeof s=="number"||s===null))return b.fill$int_A$int$int$int(t,n,e,s);throw new Error("invalid overload")}static fill$int_A$int$int$int(t,n,e,s){for(e=n+e-7;n<e;){let i=n+1;t[n]=s,t[i++]=s,t[i++]=s,t[i++]=s,t[i++]=s,t[i++]=s,t[i++]=s,n=i+1,t[i]=s}for(e+=7;n<e;)t[n++]=s}static sort$int_A$java_lang_Object_A(t,n){b.sort$int_A$java_lang_Object_A$int$int(t,n,0,t.length-1)}static sort$int_A$java_lang_Object_A$int$int(t,n,e,s){if(s<=e)return;const i=(e+s)/2|0;let l=e;const o=t[i];t[i]=t[s],t[s]=o;const a=n[i];n[i]=n[s],n[s]=a;for(let h=e;h<s;h++)if(o+(h&1)>t[h]){const c=t[h];t[h]=t[l],t[l]=c;const d=n[h];n[h]=n[l],n[l++]=d}t[s]=t[l],t[l]=o,n[s]=n[l],n[l]=a,b.sort$int_A$java_lang_Object_A$int$int(t,n,e,l-1),b.sort$int_A$java_lang_Object_A$int$int(t,n,l+1,s)}static sort(t,n,e,s){if((t!=null&&t instanceof Array&&(t.length==0||t[0]==null||typeof t[0]=="number")||t===null)&&(n!=null&&n instanceof Array&&(n.length==0||n[0]==null||n[0]!=null)||n===null)&&(typeof e=="number"||e===null)&&(typeof s=="number"||s===null))return b.sort$int_A$java_lang_Object_A$int$int(t,n,e,s);if((t!=null&&t instanceof Array&&(t.length==0||t[0]==null||typeof t[0]=="string")||t===null)&&(n!=null&&n instanceof Array&&(n.length==0||n[0]==null||typeof n[0]=="number")||n===null)&&(typeof e=="number"||e===null)&&(typeof s=="number"||s===null))return b.sort$java_lang_String_A$short_A$int$int(t,n,e,s);if((t!=null&&t instanceof Array&&(t.length==0||t[0]==null||typeof t[0]=="number")||t===null)&&(n!=null&&n instanceof Array&&(n.length==0||n[0]==null||n[0]!=null)||n===null)&&(typeof e=="number"||e===null)&&(typeof s=="number"||s===null))return b.sort$long_A$java_lang_Object_A$int$int(t,n,e,s);if((t!=null&&t instanceof Array&&(t.length==0||t[0]==null||typeof t[0]=="number")||t===null)&&(n!=null&&n instanceof Array&&(n.length==0||n[0]==null||typeof n[0]=="number")||n===null)&&(typeof e=="number"||e===null)&&(typeof s=="number"||s===null))return b.sort$long_A$int_A$int$int(t,n,e,s);if((t!=null&&t instanceof Array&&(t.length==0||t[0]==null||typeof t[0]=="number")||t===null)&&(n!=null&&n instanceof Array&&(n.length==0||n[0]==null||typeof n[0]=="number")||n===null)&&(typeof e=="number"||e===null)&&(typeof s=="number"||s===null))return b.sort$int_A$int_A$int$int(t,n,e,s);if((t!=null&&t instanceof Array&&(t.length==0||t[0]==null||typeof t[0]=="number")||t===null)&&(n!=null&&n instanceof Array&&(n.length==0||n[0]==null||n[0]!=null)||n===null)&&e===void 0&&s===void 0)return b.sort$int_A$java_lang_Object_A(t,n);if((t!=null&&t instanceof Array&&(t.length==0||t[0]==null||typeof t[0]=="string")||t===null)&&(n!=null&&n instanceof Array&&(n.length==0||n[0]==null||typeof n[0]=="number")||n===null)&&e===void 0&&s===void 0)return b.sort$java_lang_String_A$short_A(t,n);if((t!=null&&t instanceof Array&&(t.length==0||t[0]==null||typeof t[0]=="number")||t===null)&&(n!=null&&n instanceof Array&&(n.length==0||n[0]==null||n[0]!=null)||n===null)&&e===void 0&&s===void 0)return b.sort$long_A$java_lang_Object_A(t,n);if((t!=null&&t instanceof Array&&(t.length==0||t[0]==null||typeof t[0]=="number")||t===null)&&(n!=null&&n instanceof Array&&(n.length==0||n[0]==null||typeof n[0]=="number")||n===null)&&e===void 0&&s===void 0)return b.sort$long_A$int_A(t,n);throw new Error("invalid overload")}static sort$java_lang_String_A$short_A(t,n){b.sort$java_lang_String_A$short_A$int$int(t,n,0,t.length-1)}static sort$java_lang_String_A$short_A$int$int(t,n,e,s){if(s<=e)return;const i=(e+s)/2|0;let l=e;const o=t[i];t[i]=t[s],t[s]=o;const a=n[i];n[i]=n[s],n[s]=a;for(let h=e;h<s;h++)if(o==null||t[h]!=null&&t[h].localeCompare(o)<(h&1)){const c=t[h];t[h]=t[l],t[l]=c;const d=n[h];n[h]=n[l],n[l++]=d}t[s]=t[l],t[l]=o,n[s]=n[l],n[l]=a,b.sort$java_lang_String_A$short_A$int$int(t,n,e,l-1),b.sort$java_lang_String_A$short_A$int$int(t,n,l+1,s)}static copyOfNullable$short_A(t){if(t==null)return null;{const n=(e=>{let s=[];for(;e-- >0;)s.push(0);return s})(t.length);return b.copy$short_A$int$short_A$int$int(t,0,n,0,t.length),n}}static copyOfNullable(t){if(t!=null&&t instanceof Array&&(t.length==0||t[0]==null||typeof t[0]=="number")||t===null)return b.copyOfNullable$short_A(t);if(t!=null&&t instanceof Array&&(t.length==0||t[0]==null||typeof t[0]=="number")||t===null)return b.copyOfNullable$int_A(t);throw new Error("invalid overload")}static copyOf$short_A$int(t,n){const e=(s=>{let i=[];for(;s-- >0;)i.push(0);return i})(n);return b.copy$short_A$int$short_A$int$int(t,0,e,0,n),e}static copyOf(t,n){if((t!=null&&t instanceof Array&&(t.length==0||t[0]==null||typeof t[0]=="number")||t===null)&&(typeof n=="number"||n===null))return b.copyOf$short_A$int(t,n);if((t!=null&&t instanceof Array&&(t.length==0||t[0]==null||typeof t[0]=="number")||t===null)&&(typeof n=="number"||n===null))return b.copyOf$float_A$int(t,n);throw new Error("invalid overload")}static copyOfNullable$int_A(t){if(t==null)return null;{const n=(e=>{let s=[];for(;e-- >0;)s.push(0);return s})(t.length);return b.copy$int_A$int$int_A$int$int(t,0,n,0,t.length),n}}static copyOf$float_A$int(t,n){const e=(s=>{let i=[];for(;s-- >0;)i.push(0);return i})(n);return b.copy$float_A$int$float_A$int$int(t,0,e,0,n),e}static sort$long_A$java_lang_Object_A$int$int(t,n,e,s){if(e>=s)return;const i=(s+e)/2|0;let l=e;const o=t[i];t[i]=t[s],t[s]=o;const a=n[i];n[i]=n[s],n[s]=a;for(let h=e;h<s;h++)if(t[h]<(c=>c<0?Math.ceil(c):Math.floor(c))(h&1)+o){const c=t[h];t[h]=t[l],t[l]=c;const d=n[h];n[h]=n[l],n[l++]=d}t[s]=t[l],t[l]=o,n[s]=n[l],n[l]=a,b.sort$long_A$java_lang_Object_A$int$int(t,n,e,l-1),b.sort$long_A$java_lang_Object_A$int$int(t,n,l+1,s)}static sort$long_A$java_lang_Object_A(t,n){b.sort$long_A$java_lang_Object_A$int$int(t,n,0,t.length-1)}static sort$long_A$int_A$int$int(t,n,e,s){if(s<=e)return;const i=(s+e)/2|0;let l=e;const o=t[i];t[i]=t[s],t[s]=o;const a=n[i];n[i]=n[s],n[s]=a;for(let h=e;h<s;h++)if(t[h]<(c=>c<0?Math.ceil(c):Math.floor(c))(h&1)+o){const c=t[h];t[h]=t[l],t[l]=c;const d=n[h];n[h]=n[l],n[l++]=d}t[s]=t[l],t[l]=o,n[s]=n[l],n[l]=a,b.sort$long_A$int_A$int$int(t,n,e,l-1),b.sort$long_A$int_A$int$int(t,n,l+1,s)}static sort$long_A$int_A(t,n){b.sort$long_A$int_A$int$int(t,n,0,t.length-1)}static fillRange(t,n,e,s){e--;const i=e-7;let l=n-1;for(;l<i;)n=l+1,t[n]=s,n++,t[n]=s,n++,t[n]=s,n++,t[n]=s,n++,t[n]=s,n++,t[n]=s,n++,t[n]=s,l=n+1,t[l]=s;for(;l<e;)l++,t[l]=s}static sort$int_A$int_A$int$int(t,n,e,s){if(e>=s)return;let i=e;const l=(s+e)/2|0,o=t[l];t[l]=t[s],t[s]=o;const a=n[l];n[l]=n[s],n[s]=a;for(let h=e;h<s;h++)if(t[h]>(h&1)+o){const c=t[h];t[h]=t[i],t[i]=c;const d=n[h];n[h]=n[i],n[i++]=d}t[s]=t[i],t[i]=o,n[s]=n[i],n[i]=a,b.sort$int_A$int_A$int$int(t,n,e,i-1),b.sort$int_A$int_A$int$int(t,n,i+1,s)}}b.__class="ArrayUtils";class v{static smallBuffers_$LI$(){return v.smallBuffers==null&&(v.smallBuffers=(t=>{let n=[];for(;t-- >0;)n.push(null);return n})(1e3)),v.smallBuffers}static mediumBuffers_$LI$(){return v.mediumBuffers==null&&(v.mediumBuffers=(t=>{let n=[];for(;t-- >0;)n.push(null);return n})(250)),v.mediumBuffers}static largeBuffers_$LI$(){return v.largeBuffers==null&&(v.largeBuffers=(t=>{let n=[];for(;t-- >0;)n.push(null);return n})(50)),v.largeBuffers}static allocate(t){if(t===100&&v.smallBufferCount>0){const n=v.smallBuffers_$LI$()[--v.smallBufferCount];return v.smallBuffers_$LI$()[v.smallBufferCount]=null,n}else if(t===5e3&&v.mediumBufferCount>0){const n=v.mediumBuffers_$LI$()[--v.mediumBufferCount];return v.mediumBuffers_$LI$()[v.mediumBufferCount]=null,n}else if(t===3e4&&v.largeBufferCount>0){const n=v.largeBuffers_$LI$()[--v.largeBufferCount];return v.largeBuffers_$LI$()[v.largeBufferCount]=null,n}else return(n=>{let e=[];for(;n-- >0;)e.push(0);return e})(t)}}v.smallBufferCount=0,v.mediumBufferCount=0,v.largeBufferCount=0,v.__class="BufferPool";class k{constructor(t,n,e){this.singleRow=-1,this.size=0,this.recentlyUsed=new F,this.invalid=!1,this.capacity===void 0&&(this.capacity=0),this.height===void 0&&(this.height=0),this.entries===void 0&&(this.entries=null),this.pixels===void 0&&(this.pixels=null),this.capacity=t,this.height=n,this.entries=(s=>{let i=[];for(;s-- >0;)i.push(null);return i})(this.height),this.pixels=(function(s){let i=function(l){if(l.length===0)return 0;{let o=[];for(let a=0;a<l[0];a++)o.push(i(l.slice(1)));return o}};return i(s)})([this.capacity,3,e])}clear(){for(let t=0;t<this.capacity;t++)this.pixels[t][0]=null,this.pixels[t][1]=null,this.pixels[t][2]=null,this.pixels[t]=null;this.pixels=null,this.entries=null,this.recentlyUsed.clear(),this.recentlyUsed=null}get$(){if(this.capacity!==this.height)throw Object.defineProperty(new Error("Can only retrieve a full image cache"),"__classes",{configurable:!0,value:["java.lang.Throwable","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]});for(let t=0;t<this.capacity;t++)this.entries[t]=it.VALID_$LI$();return this.pixels}get$int(t){if(this.height===this.capacity)return this.invalid=this.entries[t]==null,this.entries[t]=it.VALID_$LI$(),this.pixels[t];if(this.capacity===1)return this.invalid=t!==this.singleRow,this.singleRow=t,this.pixels[0];{let n=this.entries[t];if(n==null){if(this.invalid=!0,this.capacity<=this.size){const e=this.recentlyUsed.tail();n=new it(t,e.index),this.entries[e.row]=null,e.unlink()}else n=new it(t,this.size),this.size++;this.entries[t]=n}else this.invalid=!1;return this.recentlyUsed.addHead(n),this.pixels[n.index]}}get(t){if(typeof t=="number"||t===null)return this.get$int(t);if(t===void 0)return this.get$();throw new Error("invalid overload")}}k.__class="ColorImageCache";class Z{constructor(t){this.searchCursor===void 0&&(this.searchCursor=null),this.searchKey===void 0&&(this.searchKey=0),this.iteratorCursor===void 0&&(this.iteratorCursor=null),this.iteratorBucket=0,this.buckets===void 0&&(this.buckets=null),this.bucketCount===void 0&&(this.bucketCount=0),this.buckets=(n=>{let e=[];for(;n-- >0;)e.push(null);return e})(t),this.bucketCount=t;for(let n=0;n<t;n++){const e=this.buckets[n]=new S;e.prev=e,e.next=e}}getBucketCount(){return this.bucketCount}put(t,n){n.prev!=null&&n.unlink();const e=this.buckets[t&(s=>s<0?Math.ceil(s):Math.floor(s))(this.bucketCount-1)|0];n.key=t,n.next=e,n.prev=e.prev,n.prev.next=n,n.next.prev=n}size(){let t=0;for(let n=0;n<this.bucketCount;n++){const e=this.buckets[n];for(let s=e.next;s!==e;s=s.next)t++}return t}head(){return this.iteratorBucket=0,this.next()}next(){if(this.iteratorBucket>0&&this.buckets[this.iteratorBucket-1]!==this.iteratorCursor){const n=this.iteratorCursor;return this.iteratorCursor=n.next,n}let t;do{if(this.iteratorBucket>=this.bucketCount)return null;t=this.buckets[this.iteratorBucket++].next}while(t===this.buckets[this.iteratorBucket-1]);return this.iteratorCursor=t.next,t}get(t){this.searchKey=t;const n=this.buckets[t&(e=>e<0?Math.ceil(e):Math.floor(e))(this.bucketCount-1)|0];for(this.searchCursor=n.next;this.searchCursor!==n;this.searchCursor=this.searchCursor.next)if(this.searchCursor.key===t){const e=this.searchCursor;return this.searchCursor=this.searchCursor.next,e}return this.searchCursor=null,null}toArray(t){let n=0;for(let e=0;e<this.bucketCount;e++){const s=this.buckets[e];for(let i=s.next;i!==s;i=i.next)t[n++]=i}return n}nextWithKey(){if(this.searchCursor==null)return null;const t=this.buckets[(n=>n<0?Math.ceil(n):Math.floor(n))(this.bucketCount-1)&this.searchKey|0];for(;t!==this.searchCursor;){if(this.searchKey===this.searchCursor.key){const n=this.searchCursor;return this.searchCursor=this.searchCursor.next,n}this.searchCursor=this.searchCursor.next}return this.searchCursor=null,null}clear(){for(let t=0;t<this.bucketCount;t++){const n=this.buckets[t];for(;;){const e=n.next;if(e===n)break;e.unlink()}}this.iteratorCursor=null,this.searchCursor=null}}Z.__class="HashTable";class R{static clp2(t){return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}static flp2(t){let n=t>>>1;return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,t&~n}static isPowerOfTwo(t){return t===(t&-t)}static bitCount(t){let n=0;return(t<0||t>=65536)&&(t>>>=16,n+=16),t>=256&&(t>>>=8,n+=8),t>=16&&(t>>>=4,n+=4),t>=4&&(n+=2,t>>>=2),t>=1&&(n++,t>>>=1),n+t}static bitCountFast(t){return t=(t>>>1&1431655765)+(t&1431655765),t=(t&858993459)+(t>>>2&-1288490189),t=(t>>>4)+t&252645135,t+=t>>>8,t+=t>>>16,t&255}static signum(t){return t>0?1:t<0?-1:0}static toString(t){return t<0?""+t:R.toStringInternal(t)}static toStringInternal(t){if(t<0)return""+t;let n=2;for(let s=t/10|0;s!==0;s=(i=>i<0?Math.ceil(i):Math.floor(i))(s/10))n++;const e=(s=>{let i=[];for(;s-- >0;)i.push(null);return i})(n);e[0]="+";for(let s=n-1;s>0;s--){const i=t;t=(o=>o<0?Math.ceil(o):Math.floor(o))(t/10);const l=i-t*10;l>=10?e[s]=String.fromCharCode(l+87):e[s]=String.fromCharCode(l+48)}return e.join("")}static bitReverse(t,n){let e=0;for(;n>0;)e=t&1|e<<1,t>>>=1,n--;return e}static pow(t,n){let e=1;for(;n>1;)(n&1)!==0&&(e*=t),n>>=1,t*=t;return n===1?t*e:e}static clamp(t,n,e){return t<n?n:t>e?e:t}}R.__class="IntUtils";class F{constructor(){this.cursor===void 0&&(this.cursor=null),this.sentinel=new S,this.sentinel.next=this.sentinel,this.sentinel.prev=this.sentinel}static insertBefore(t,n){t.prev!=null&&t.unlink(),t.next=n,t.prev=n.prev,t.prev.next=t,t.next.prev=t}clear(){for(;;){const t=this.sentinel.next;if(this.sentinel===t){this.cursor=null;return}t.unlink()}}addHead(t){t.prev!=null&&t.unlink(),t.prev=this.sentinel,t.next=this.sentinel.next,t.prev.next=t,t.next.prev=t}removeHead(){const t=this.sentinel.next;return t===this.sentinel?null:(t.unlink(),t)}isEmpty(){return this.sentinel.next===this.sentinel}head(){const t=this.sentinel.next;return t===this.sentinel?(this.cursor=null,null):(this.cursor=t.next,t)}addTail(t){t.prev!=null&&t.unlink(),t.prev=this.sentinel.prev,t.next=this.sentinel,t.prev.next=t,t.next.prev=t}tail(){const t=this.sentinel.prev;return t===this.sentinel?(this.cursor=null,null):(this.cursor=t.prev,t)}prev(){const t=this.cursor;return t===this.sentinel?(this.cursor=null,null):(this.cursor=t.prev,t)}next(){const t=this.cursor;return this.sentinel===t?(this.cursor=null,null):(this.cursor=t.next,t)}}F.__class="LinkedList";class H{constructor(t){this.aClass4_Sub3_18=new ft,this.queue=new xt,this.available===void 0&&(this.available=0),this.capacity===void 0&&(this.capacity=0),this.table===void 0&&(this.table=null),this.available=t;let n;for(n=1;n+n<t;n+=n);this.capacity=t,this.table=new Z(n)}head(){return this.table.head()}put(t,n){if(this.available===0){const e=this.queue.removeHead();if(e.unlink(),e.unlinkSecondary(),this.aClass4_Sub3_18===e){const s=this.queue.removeHead();s.unlink(),s.unlinkSecondary()}}else this.available--;this.table.put(t,n),this.queue.addTail(n)}get(t){const n=this.table.get(t);return n!=null&&this.queue.addTail(n),n}next(){return this.table.next()}clear(){this.queue.clear(),this.table.clear(),this.aClass4_Sub3_18=new ft,this.available=this.capacity}}H.__class="LruHashTable";class r{static sub10_method283(t,n,e,s,i,l,o,a,h){if(h===i&&e===a&&l===o&&n===t){r.sub9_method280(t,h,e,s,o);return}let c=h,d=e;const p=h*3,m=e*3,y=i*3,u=l*3,I=a*3,w=n*3,$=y+o-h-u,x=I+t-w-e,_=u+p-y-y,O=w+m-I-I,T=I-m,B=y-p;for(let A=128;A<=4096;A+=128){const E=A*A>>12,D=A*E>>12,N=D*$,g=E*_,V=B*A,G=O*E,X=(V+g+N>>12)+h,W=x*D,P=(T*A+W+G>>12)+e;r.sub9_method280(P,c,d,s,X),c=X,d=P}}static sub22_method4693(t,n,e,s,i,l,o,a,h){r.sub2_anInt902<=h&&h<=r.sub3_anInt2553&&r.sub2_anInt902<=t&&r.sub3_anInt2553>=t&&r.sub2_anInt902<=s&&r.sub3_anInt2553>=s&&r.sub2_anInt902<=i&&i<=r.sub3_anInt2553&&l>=r.sub4_anInt3086&&l<=r.sub5_anInt4230&&n>=r.sub4_anInt3086&&r.sub5_anInt4230>=n&&a>=r.sub4_anInt3086&&r.sub5_anInt4230>=a&&r.sub4_anInt3086<=o&&r.sub5_anInt4230>=o?r.sub10_method283(o,a,l,e,t,s,i,n,h):r.sub31_method3662(h,a,i,t,n,l,o,e,s)}static sub9_method280(t,n,e,s,i){let l=t-e,o=i-n;if(o===0)l!==0&&r.sub10_method306(n,s,t,e);else if(l===0)r.sub20_method1975(n,i,s,e);else{o<0&&(o=-o),l<0&&(l=-l);const a=l>o;if(a){const y=n;n=e,e=y;const u=i;i=t,t=u}if(i<n){const y=n;n=i;const u=e;e=t,t=u,i=y}let h=e;const c=i-n;let d=t-e;const p=t>e?1:-1;d<0&&(d=-d);let m=-(c>>1);if(a)for(let y=n;y<=i;y++)m+=d,r.sub5_anIntArrayArray36[y][h]=s,m>0&&(h+=p,m-=c);else for(let y=n;y<=i;y++)m+=d,r.sub5_anIntArrayArray36[h][y]=s,m>0&&(h+=p,m-=c)}}static sub10_method306(t,n,e,s){if(e>=s)for(let i=s;i<e;i++)r.sub5_anIntArrayArray36[i][t]=n;else for(let i=e;i<s;i++)r.sub5_anIntArrayArray36[i][t]=n}static sub20_method1975(t,n,e,s){n>=t?b.fillRange(r.sub5_anIntArrayArray36[s],t,n,e):b.fillRange(r.sub5_anIntArrayArray36[s],n,t,e)}static sub31_method3662(t,n,e,s,i,l,o,a,h){if(s===t&&i===l&&h===e&&n===o){r.sub32_method4022(l,o,a,t,e);return}let c=t,d=l;const p=t*3,m=i*3,y=s*3,u=h*3,I=e+y-t-u,w=l*3,$=p+u-y-y,x=n*3,_=x+w-m-m,O=m+o-l-x,T=y-p,B=m-w;for(let A=128;A<=4096;A+=128){const E=A*A>>12,D=E*$,N=A*E>>12,g=N*I,V=B*A,G=_*E,X=O*N,Q=(T*A+D+g>>12)+t,P=(V+X+G>>12)+l;r.sub32_method4022(d,P,a,c,Q),d=P,c=Q}}static sub32_method4022(t,n,e,s,i){const l=i-s,o=n-t;if(l===0)o!==0&&r.sub20_method1930(s,t,n,e);else if(o===0)r.sub13_method1015(s,i,e,t);else{const a=(o<<12)/l|0,h=t-(s*a>>12);let c,d;s<r.sub2_anInt902?(d=h+(r.sub2_anInt902*a>>12),c=r.sub2_anInt902):r.sub3_anInt2553>=s?(c=s,d=t):(c=r.sub3_anInt2553,d=(r.sub3_anInt2553*a>>12)+h);let p,m;i<r.sub2_anInt902?(p=r.sub2_anInt902,m=h+(r.sub2_anInt902*a>>12)):i<=r.sub3_anInt2553?(p=i,m=n):(p=r.sub3_anInt2553,m=(a*r.sub3_anInt2553>>12)+h),r.sub4_anInt3086>m?(p=(r.sub4_anInt3086-h<<12)/a|0,m=r.sub4_anInt3086):r.sub5_anInt4230<m&&(p=(r.sub5_anInt4230-h<<12)/a|0,m=r.sub5_anInt4230),r.sub4_anInt3086>d?(c=(r.sub4_anInt3086-h<<12)/a|0,d=r.sub4_anInt3086):d>r.sub5_anInt4230&&(d=r.sub5_anInt4230,c=(r.sub5_anInt4230-h<<12)/a|0),r.sub9_method280(m,c,d,e,p)}}static sub20_method1930(t,n,e,s){r.sub2_anInt902<=t&&r.sub3_anInt2553>=t&&(n=R.clamp(n,r.sub4_anInt3086,r.sub5_anInt4230),e=R.clamp(e,r.sub4_anInt3086,r.sub5_anInt4230),r.sub10_method306(t,s,e,n))}static sub13_method1015(t,n,e,s){r.sub4_anInt3086<=s&&s<=r.sub5_anInt4230&&(t=R.clamp(t,r.sub2_anInt902,r.sub3_anInt2553),n=R.clamp(n,r.sub2_anInt902,r.sub3_anInt2553),r.sub20_method1975(t,n,e,s))}static sub36_method4566(t,n,e,s,i,l,o){t>=r.sub2_anInt902&&l<=r.sub3_anInt2553&&r.sub4_anInt3086<=o&&i<=r.sub5_anInt4230?r.sub9_method758(n,l,o,t,i,e,s):r.sub22_method2190(i,s,e,n,t,l,o)}static sub9_method758(t,n,e,s,i,l,o){const a=e+o,h=i-o,c=s+o,d=n-o;for(let p=e;p<a;p++)b.fillRange(r.sub5_anIntArrayArray36[p],s,n,t);for(let p=i;p>h;p--)b.fillRange(r.sub5_anIntArrayArray36[p],s,n,t);for(let p=a;p<=h;p++){const m=r.sub5_anIntArrayArray36[p];b.fillRange(m,s,c,t),b.fillRange(m,c,d,l),b.fillRange(m,d,n,t)}}static sub22_method2190(t,n,e,s,i,l,o){const a=R.clamp(o,r.sub4_anInt3086,r.sub5_anInt4230),h=R.clamp(t,r.sub4_anInt3086,r.sub5_anInt4230),c=R.clamp(i,r.sub2_anInt902,r.sub3_anInt2553),d=R.clamp(l,r.sub2_anInt902,r.sub3_anInt2553),p=R.clamp(o+n,r.sub4_anInt3086,r.sub5_anInt4230),m=R.clamp(t-n,r.sub4_anInt3086,r.sub5_anInt4230);for(let I=a;I<p;I++)b.fillRange(r.sub5_anIntArrayArray36[I],c,d,s);for(let I=h;I>m;I--)b.fillRange(r.sub5_anIntArrayArray36[I],c,d,s);const y=R.clamp(i+n,r.sub2_anInt902,r.sub3_anInt2553),u=R.clamp(l-n,r.sub2_anInt902,r.sub3_anInt2553);for(let I=p;I<=m;I++){const w=r.sub5_anIntArrayArray36[I];b.fillRange(w,c,y,s),b.fillRange(w,y,u,e),b.fillRange(w,u,d,s)}}static sub32_method3997(t,n,e,s,i,l){t>=r.sub2_anInt902&&r.sub3_anInt2553>=l&&e>=r.sub4_anInt3086&&r.sub5_anInt4230>=i?s===1?r.sub27_method4706(n,t,l,e,i):r.sub14_method1200(n,t,i,l,s,e):s===1?r.sub27_method4241(l,i,e,n,t):r.sub31_method3781(l,n,s,t,e,i)}static sub31_method3781(t,n,e,s,i,l){const o=R.clamp(i,r.sub4_anInt3086,r.sub5_anInt4230),a=R.clamp(l,r.sub4_anInt3086,r.sub5_anInt4230),h=R.clamp(s,r.sub2_anInt902,r.sub3_anInt2553),c=R.clamp(t,r.sub2_anInt902,r.sub3_anInt2553),d=R.clamp(e+i,r.sub4_anInt3086,r.sub5_anInt4230),p=R.clamp(l-e,r.sub4_anInt3086,r.sub5_anInt4230);for(let u=o;u<d;u++)b.fillRange(r.sub5_anIntArrayArray36[u],h,c,n);for(let u=a;u>p;u--)b.fillRange(r.sub5_anIntArrayArray36[u],h,c,n);const m=R.clamp(s+e,r.sub2_anInt902,r.sub3_anInt2553),y=R.clamp(t-e,r.sub2_anInt902,r.sub3_anInt2553);for(let u=d;u<=p;u++){const I=r.sub5_anIntArrayArray36[u];b.fillRange(I,h,m,n),b.fillRange(I,y,c,n)}}static sub27_method4241(t,n,e,s,i){if(r.sub5_anInt4230<e||r.sub4_anInt3086>n)return;let l;r.sub2_anInt902>i?(i=r.sub2_anInt902,l=!1):i>r.sub3_anInt2553?(i=r.sub3_anInt2553,l=!1):l=!0;let o;t<r.sub2_anInt902?(t=r.sub2_anInt902,o=!1):r.sub3_anInt2553<t?(t=r.sub3_anInt2553,o=!1):o=!0;let a;r.sub4_anInt3086<=e?(a=e+1,b.fillRange(r.sub5_anIntArrayArray36[e],i,t,s)):a=r.sub4_anInt3086;let h;if(r.sub5_anInt4230<n?h=r.sub5_anInt4230:(h=n-1,b.fillRange(r.sub5_anIntArrayArray36[n],i,t,s)),l&&o)for(let c=a;c<=h;c++){const d=r.sub5_anIntArrayArray36[c];d[i]=d[t]=s}else if(l)for(let c=a;c<=h;c++)r.sub5_anIntArrayArray36[c][i]=s;else if(o)for(let c=a;c<=h;c++)r.sub5_anIntArrayArray36[c][t]=s}static sub27_method4706(t,n,e,s,i){b.fillRange(r.sub5_anIntArrayArray36[s++],n,e,t),b.fillRange(r.sub5_anIntArrayArray36[i--],n,e,t);for(let l=s;l<=i;l++){const o=r.sub5_anIntArrayArray36[l];o[n]=o[e]=t}}static sub14_method1200(t,n,e,s,i,l){const o=i+l,a=e-i,h=i+n;for(let d=l;d<o;d++)b.fillRange(r.sub5_anIntArrayArray36[d],n,s,t);for(let d=e;d>a;d--)b.fillRange(r.sub5_anIntArrayArray36[d],n,s,t);const c=s-i;for(let d=o;d<=a;d++){const p=r.sub5_anIntArrayArray36[d];b.fillRange(p,n,h,t),b.fillRange(p,c,s,t)}}static sub29_method3429(t,n,e,s,i){r.sub2_anInt902<=t&&e<=r.sub3_anInt2553&&r.sub4_anInt3086<=s&&n<=r.sub5_anInt4230?r.sub15_method1477(s,t,n,i,e):r.sub22_method4701(t,e,s,i,n)}static sub15_method1477(t,n,e,s,i){for(let l=t;l<=e;l++)b.fillRange(r.sub5_anIntArrayArray36[l],n,i,s)}static sub22_method4701(t,n,e,s,i){const l=R.clamp(e,r.sub4_anInt3086,r.sub5_anInt4230),o=R.clamp(i,r.sub4_anInt3086,r.sub5_anInt4230),a=R.clamp(t,r.sub2_anInt902,r.sub3_anInt2553),h=R.clamp(n,r.sub2_anInt902,r.sub3_anInt2553);for(let c=l;c<=o;c++)b.fillRange(r.sub5_anIntArrayArray36[c],a,h,s)}static sub18_method1745(t,n,e,s,i,l,o){t===o?r.sub8_method100(t,s,l,n,e,i):e-t>=r.sub2_anInt902&&r.sub3_anInt2553>=t+e&&l-o>=r.sub4_anInt3086&&o+l<=r.sub5_anInt4230?r.sub10_method388(e,i,s,l,t,n,o):r.sub32_method4031(n,s,e,o,l,t,i)}static sub32_method4031(t,n,e,s,i,l,o){let a=0;const h=s-o;let c=s,d=0;const p=l-o,m=l*l,y=s*s,u=p*p,I=y<<1,w=h*h,$=m<<1,x=w<<1,_=u<<1,O=s<<1,T=h<<1;let B=I+(1-O)*m,A=y-(O-1)*$,E=u*(1-T)+x;const D=m<<2;let N=w-_*(T-1);const g=y<<2,V=u<<2,G=w<<2;let X=I*3,W=x*3,Q=$*(O-3),P=g,at=(T-3)*_,K=D*(s-1),M=G,pt=(h-1)*V;if(i>=r.sub4_anInt3086&&r.sub5_anInt4230>=i){const ot=r.sub5_anIntArrayArray36[i],tt=R.clamp(e-l,r.sub2_anInt902,r.sub3_anInt2553),ht=R.clamp(e+l,r.sub2_anInt902,r.sub3_anInt2553),nt=R.clamp(e-p,r.sub2_anInt902,r.sub3_anInt2553),et=R.clamp(e+p,r.sub2_anInt902,r.sub3_anInt2553);b.fillRange(ot,tt,nt,n),b.fillRange(ot,nt,et,t),b.fillRange(ot,et,ht,n)}for(;c>0;){if(B<0)for(;B<0;)B+=X,a++,X+=g,A+=P,P+=g;A<0&&(a++,B+=X,X+=g,A+=P,P+=g);const ot=h>=c;if(A+=-Q,c--,ot){if(E<0)for(;E<0;)E+=W,N+=M,W+=G,M+=G,d++;N<0&&(E+=W,W+=G,N+=M,M+=G,d++),N+=-at,at-=V,E+=-pt,pt-=V}B+=-K;const tt=c+i,ht=i-c;if(K-=D,Q-=D,tt>=r.sub4_anInt3086&&r.sub5_anInt4230>=ht){const nt=R.clamp(a+e,r.sub2_anInt902,r.sub3_anInt2553),et=R.clamp(e-a,r.sub2_anInt902,r.sub3_anInt2553);if(ot){const rt=R.clamp(e+d,r.sub2_anInt902,r.sub3_anInt2553),ct=R.clamp(e-d,r.sub2_anInt902,r.sub3_anInt2553);if(r.sub4_anInt3086<=ht){const st=r.sub5_anIntArrayArray36[ht];b.fillRange(st,et,ct,n),b.fillRange(st,ct,rt,t),b.fillRange(st,rt,nt,n)}if(r.sub5_anInt4230>=tt){const st=r.sub5_anIntArrayArray36[tt];b.fillRange(st,et,ct,n),b.fillRange(st,ct,rt,t),b.fillRange(st,rt,nt,n)}}else ht>=r.sub4_anInt3086&&b.fillRange(r.sub5_anIntArrayArray36[ht],et,nt,n),r.sub5_anInt4230>=tt&&b.fillRange(r.sub5_anIntArrayArray36[tt],et,nt,n)}}}static sub10_method388(t,n,e,s,i,l,o){let a=0,h=o;const c=i-n;let d=0;const p=o-n,m=i*i,y=o*o,u=c*c,I=p*p,w=y<<1,$=I<<1,x=m<<1,_=u<<1,O=o<<1,T=p<<1;let B=m*(1-O)+w,A=y-x*(O-1),E=$+(1-T)*u,D=I-_*(T-1);const N=m<<2,g=y<<2,V=I<<2,G=u<<2;let X=w*3,W=x*(O-3),Q=$*3,P=g,at=(T-3)*_,K=V,M=(o-1)*N,pt=G*(p-1);const ot=r.sub5_anIntArrayArray36[s];for(b.fillRange(ot,t-i,t-c,e),b.fillRange(ot,t-c,c+t,l),b.fillRange(ot,c+t,t+i,e);h>0;){if(B<0)for(;B<0;)B+=X,X+=g,a++,A+=P,P+=g;A<0&&(B+=X,A+=P,X+=g,a++,P+=g),B+=-M;const tt=t-a,ht=p>=h,nt=t+a;M-=N,h--,A+=-W;const et=h+s;if(W-=N,ht){if(E<0)for(;E<0;)d++,D+=K,E+=Q,K+=V,Q+=V;D<0&&(E+=Q,Q+=V,d++,D+=K,K+=V),D+=-at,E+=-pt,pt-=G,at-=G}const rt=s-h;if(ht){const ct=t-d;b.fillRange(r.sub5_anIntArrayArray36[rt],tt,ct,e);const st=t+d;b.fillRange(r.sub5_anIntArrayArray36[rt],ct,st,l),b.fillRange(r.sub5_anIntArrayArray36[rt],st,nt,e),b.fillRange(r.sub5_anIntArrayArray36[et],tt,ct,e),b.fillRange(r.sub5_anIntArrayArray36[et],ct,st,l),b.fillRange(r.sub5_anIntArrayArray36[et],st,nt,e)}else b.fillRange(r.sub5_anIntArrayArray36[rt],tt,nt,e),b.fillRange(r.sub5_anIntArrayArray36[et],tt,nt,e)}}static sub8_method100(t,n,e,s,i,l){r.sub2_anInt902<=i-t&&t+i<=r.sub3_anInt2553&&e-t>=r.sub4_anInt3086&&r.sub5_anInt4230>=t+e?r.sub10_method896(l,n,t,s,i,e):r.sub14_method1082(t,l,i,n,s,e)}static sub32_method3885(t){(r.sub7_anIntArray678==null||r.sub7_anIntArray678.length<t)&&(r.sub7_anIntArray678=(n=>{let e=[];for(;n-- >0;)e.push(0);return e})(t))}static sub14_method1082(t,n,e,s,i,l){r.sub32_method3885(t);let o=t-n,a=t,h=0,c=-t;o<0&&(o=0);let d=o;if(r.sub4_anInt3086<=l&&l<=r.sub5_anInt4230){const u=r.sub5_anIntArrayArray36[l],I=R.clamp(e-t,r.sub2_anInt902,r.sub3_anInt2553),w=R.clamp(t+e,r.sub2_anInt902,r.sub3_anInt2553),$=R.clamp(e-o,r.sub2_anInt902,r.sub3_anInt2553),x=R.clamp(e+o,r.sub2_anInt902,r.sub3_anInt2553);b.fillRange(u,I,$,s),b.fillRange(u,$,x,i),b.fillRange(u,x,w,s)}let p=-o,m=-1,y=-1;for(;h<a;){if(m+=2,p+=m,y+=2,p>=0&&d>=1&&(d--,p-=d<<1,r.sub7_anIntArray678[d]=h),h++,c+=y,c>=0){a--,c-=a<<1;const w=l-a,$=l+a;if(r.sub4_anInt3086<=$&&w<=r.sub5_anInt4230)if(a>=o){const x=R.clamp(e+h,r.sub2_anInt902,r.sub3_anInt2553),_=R.clamp(e-h,r.sub2_anInt902,r.sub3_anInt2553);r.sub5_anInt4230>=$&&b.fillRange(r.sub5_anIntArrayArray36[$],_,x,s),w>=r.sub4_anInt3086&&b.fillRange(r.sub5_anIntArrayArray36[w],_,x,s)}else{const x=r.sub7_anIntArray678[a],_=R.clamp(e+h,r.sub2_anInt902,r.sub3_anInt2553),O=R.clamp(e-h,r.sub2_anInt902,r.sub3_anInt2553),T=R.clamp(e+x,r.sub2_anInt902,r.sub3_anInt2553),B=R.clamp(e-x,r.sub2_anInt902,r.sub3_anInt2553);if(r.sub5_anInt4230>=$){const A=r.sub5_anIntArrayArray36[$];b.fillRange(A,O,B,s),b.fillRange(A,B,T,i),b.fillRange(A,T,_,s)}if(r.sub4_anInt3086<=w){const A=r.sub5_anIntArrayArray36[w];b.fillRange(A,O,B,s),b.fillRange(A,B,T,i),b.fillRange(A,T,_,s)}}}const u=l+h,I=l-h;if(r.sub4_anInt3086<=u&&r.sub5_anInt4230>=I){const w=a+e,$=e-a;if(w>=r.sub2_anInt902&&r.sub3_anInt2553>=$){const x=R.clamp(w,r.sub2_anInt902,r.sub3_anInt2553),_=R.clamp($,r.sub2_anInt902,r.sub3_anInt2553);if(h>=o)r.sub5_anInt4230>=u&&b.fillRange(r.sub5_anIntArrayArray36[u],_,x,s),r.sub4_anInt3086<=I&&b.fillRange(r.sub5_anIntArrayArray36[I],_,x,s);else{const O=d>=h?d:r.sub7_anIntArray678[h],T=R.clamp(e+O,r.sub2_anInt902,r.sub3_anInt2553),B=R.clamp(e-O,r.sub2_anInt902,r.sub3_anInt2553);if(r.sub5_anInt4230>=u){const A=r.sub5_anIntArrayArray36[u];b.fillRange(A,_,B,s),b.fillRange(A,B,T,i),b.fillRange(A,T,x,s)}if(r.sub4_anInt3086<=I){const A=r.sub5_anIntArrayArray36[I];b.fillRange(A,_,B,s),b.fillRange(A,B,T,i),b.fillRange(A,T,x,s)}}}}}}static sub10_method896(t,n,e,s,i,l){r.sub32_method3885(e);let o=0,a=-e,h=e-t,c=e,d=-1,p=-1;const m=r.sub5_anIntArrayArray36[l];h<0&&(h=0);let y=h;const u=i-h;b.fillRange(m,i-e,u,n);const I=h+i;let w=-h;for(b.fillRange(m,u,I,s),b.fillRange(m,I,i+e,n);c>o;){if(p+=2,a+=p,d+=2,w+=d,w>=0&&y>=1&&(r.sub7_anIntArray678[y]=o,y--,w-=y<<1),o++,a>=0){if(c--,c>=h){const T=r.sub5_anIntArrayArray36[l+c],B=i+o,A=r.sub5_anIntArrayArray36[l-c],E=i-o;b.fillRange(T,E,B,n),b.fillRange(A,E,B,n)}else{const T=r.sub5_anIntArrayArray36[c+l],B=r.sub7_anIntArray678[c],A=r.sub5_anIntArrayArray36[l-c],E=o+i,D=i-B,N=B+i,g=i-o;b.fillRange(T,g,D,n),b.fillRange(T,D,N,s),b.fillRange(T,N,E,n),b.fillRange(A,g,D,n),b.fillRange(A,D,N,s),b.fillRange(A,N,E,n)}a-=c<<1}const $=r.sub5_anIntArrayArray36[l+o],x=r.sub5_anIntArrayArray36[l-o],_=c+i,O=i-c;if(h<=o)b.fillRange($,O,_,n),b.fillRange(x,O,_,n);else{const T=o>y?r.sub7_anIntArray678[o]:y,B=T+i,A=i-T;b.fillRange($,O,A,n),b.fillRange($,A,B,s),b.fillRange($,B,_,n),b.fillRange(x,O,A,n),b.fillRange(x,A,B,s),b.fillRange(x,B,_,n)}}}static sub28_method3323(t,n,e,s,i){t===i?r.sub32_method4032(i,e,s,n):r.sub2_anInt902<=n-i&&r.sub3_anInt2553>=n+i&&s-t>=r.sub4_anInt3086&&r.sub5_anInt4230>=s+t?r.sub19_method4379(t,n,e,s,i):r.sub26_method4814(s,t,e,i,n)}static sub32_method4032(t,n,e,s){s-t>=r.sub2_anInt902&&r.sub3_anInt2553>=s+t&&e-t>=r.sub4_anInt3086&&e+t<=r.sub5_anInt4230?r.sub11_method565(e,s,t,n):r.sub29_method3463(e,s,t,n)}static sub29_method3463(t,n,e,s){let i=0,l=e,o=-1,a=-e;const h=R.clamp(e+n,r.sub2_anInt902,r.sub3_anInt2553),c=R.clamp(n-e,r.sub2_anInt902,r.sub3_anInt2553);for(b.fillRange(r.sub5_anIntArrayArray36[t],c,h,s);l>i;){if(o+=2,a+=o,a>0){l--,a-=l<<1;const m=t-l,y=l+t;if(y>=r.sub4_anInt3086&&m<=r.sub5_anInt4230){const u=R.clamp(n+i,r.sub2_anInt902,r.sub3_anInt2553),I=R.clamp(n-i,r.sub2_anInt902,r.sub3_anInt2553);r.sub5_anInt4230>=y&&b.fillRange(r.sub5_anIntArrayArray36[y],I,u,s),r.sub4_anInt3086<=m&&b.fillRange(r.sub5_anIntArrayArray36[m],I,u,s)}}i++;const d=t-i,p=t+i;if(r.sub4_anInt3086<=p&&d<=r.sub5_anInt4230){const m=R.clamp(n+l,r.sub2_anInt902,r.sub3_anInt2553),y=R.clamp(n-l,r.sub2_anInt902,r.sub3_anInt2553);p<=r.sub5_anInt4230&&b.fillRange(r.sub5_anIntArrayArray36[p],y,m,s),r.sub4_anInt3086<=d&&b.fillRange(r.sub5_anIntArrayArray36[d],y,m,s)}}}static sub11_method565(t,n,e,s){b.fillRange(r.sub5_anIntArrayArray36[t],n-e,e+n,s);let i=0,l=e,o=-e,a=-1;for(;l>i;){if(a+=2,i++,o+=a,o>=0){l--,o-=l<<1;const m=r.sub5_anIntArrayArray36[t-l],y=r.sub5_anIntArrayArray36[t+l],u=n-i,I=n+i;b.fillRange(y,u,I,s),b.fillRange(m,u,I,s)}const h=n+l,c=n-l,d=r.sub5_anIntArrayArray36[t+i],p=r.sub5_anIntArrayArray36[t-i];b.fillRange(d,c,h,s),b.fillRange(p,c,h,s)}}static sub19_method4379(t,n,e,s,i){b.fillRange(r.sub5_anIntArrayArray36[s],n-i,i+n,e);let l=0,o=t;const a=i*i,h=t*t,c=a<<1,d=t<<1,p=h<<1;let m=h-c*(d-1),y=p+(1-d)*a;const u=a<<2;let I=p*3,w=c*((t<<1)-3);const $=h<<2;let x=$,_=(t-1)*u;for(;o>0;){if(y<0)for(;y<0;)l++,y+=I,m+=x,x+=$,I+=$;o--,m<0&&(m+=x,y+=I,I+=$,x+=$,l++);const O=s-o;y+=-_;const T=n+l;_-=u;const B=o+s;m+=-w,w-=u;const A=n-l;b.fillRange(r.sub5_anIntArrayArray36[O],A,T,e),b.fillRange(r.sub5_anIntArrayArray36[B],A,T,e)}}static sub26_method4814(t,n,e,s,i){let l=n,o=0;const a=n*n,h=s*s,c=h<<1,d=a<<1,p=n<<1;let m=a-(p-1)*c,y=(1-p)*h+d;const u=h<<2,I=a<<2;let w=d*3,$=I,x=((n<<1)-3)*c;if(t>=r.sub4_anInt3086&&r.sub5_anInt4230>=t){const O=R.clamp(i+s,r.sub2_anInt902,r.sub3_anInt2553),T=R.clamp(i-s,r.sub2_anInt902,r.sub3_anInt2553);b.fillRange(r.sub5_anIntArrayArray36[t],T,O,e)}let _=u*(n-1);for(;l>0;){if(y<0)for(;y<0;)y+=w,m+=$,$+=I,w+=I,o++;l--,m<0&&(m+=$,$+=I,y+=w,o++,w+=I),y+=-_;const O=t-l;m+=-x,_-=u;const T=l+t;if(x-=u,T>=r.sub4_anInt3086&&r.sub5_anInt4230>=O){const B=R.clamp(o+i,r.sub2_anInt902,r.sub3_anInt2553),A=R.clamp(i-o,r.sub2_anInt902,r.sub3_anInt2553);r.sub4_anInt3086<=O&&b.fillRange(r.sub5_anIntArrayArray36[O],A,B,e),T<=r.sub5_anInt4230&&b.fillRange(r.sub5_anIntArrayArray36[T],A,B,e)}}}static sub18_method4374(t,n){r.sub5_anInt4230=t,r.sub3_anInt2553=n,r.sub4_anInt3086=0,r.sub2_anInt902=0}static sub35_method4335(t){r.sub5_anIntArrayArray36=t}}r.sub5_anInt4230=100,r.sub4_anInt3086=0,r.sub7_anIntArray678=null,r.sub3_anInt2553=100,r.sub2_anInt902=0,r.sub5_anIntArrayArray36=null,r.__class="MergedStatics";class S{constructor(){this.prev===void 0&&(this.prev=null),this.next===void 0&&(this.next=null),this.key===void 0&&(this.key=0)}isLinked(){return this.prev!=null}unlink(){this.prev!=null&&(this.prev.next=this.next,this.next.prev=this.prev,this.prev=null,this.next=null)}}S.__class="Node";class j{constructor(t){if(typeof t=="number"||t===null)this.nextNextGaussian===void 0&&(this.nextNextGaussian=0),this.seedhi===void 0&&(this.seedhi=0),this.seedlo===void 0&&(this.seedlo=0),this.haveNextNextGaussian=!1,this.setSeed$long(t);else if(t===void 0){this.nextNextGaussian===void 0&&(this.nextNextGaussian=0),this.seedhi===void 0&&(this.seedhi=0),this.seedlo===void 0&&(this.seedlo=0),this.haveNextNextGaussian=!1;const n=j.uniqueSeed+++Date.now(),e=(Math.floor(n*j.twoToTheMinus24)|0)&16777215,s=n-e*j.twoToThe24|0;this.setSeed$int$int(e,s)}else throw new Error("invalid overload")}static __static_initialize(){j.__static_initialized||(j.__static_initialized=!0,j.__static_initializer_0())}static twoToTheXMinus24_$LI$(){return j.__static_initialize(),j.twoToTheXMinus24==null&&(j.twoToTheXMinus24=(t=>{let n=[];for(;t-- >0;)n.push(0);return n})(25)),j.twoToTheXMinus24}static twoToTheXMinus48_$LI$(){return j.__static_initialize(),j.twoToTheXMinus48==null&&(j.twoToTheXMinus48=(t=>{let n=[];for(;t-- >0;)n.push(0);return n})(33)),j.twoToTheXMinus48}static __static_initializer_0(){let t=152587890625e-16;for(let e=32;e>=0;e--)j.twoToTheXMinus48_$LI$()[e]=t,t*=.5;let n=1;for(let e=24;e>=0;e--)j.twoToTheXMinus24_$LI$()[e]=n,n*=.5}nextBoolean(){return this.nextInternal(1)!==0}nextBytes(t){let n=0,e=0,s=0;for(;e<t.length;)s===0?(n=this.nextInternal(32)|0,s=3):s--,t[e++]=n|0,n>>=8}nextDouble(){return this.nextInternal(26)*j.twoToTheMinus26+this.nextInternal(27)*j.twoToTheMinus53}nextFloat(){return Math.fround(this.nextInternal(24)*j.twoToTheMinus24)}nextGaussian(){if(this.haveNextNextGaussian)return this.haveNextNextGaussian=!1,this.nextNextGaussian;let t,n,e;do t=2*this.nextDouble()-1,n=2*this.nextDouble()-1,e=t*t+n*n;while(e>=1);const s=e===0?0:Math.sqrt(-2*Math.log(e)/e);return this.nextNextGaussian=n*s,this.haveNextNextGaussian=!0,t*s}nextInt(){return this.nextInternal(32)|0}nextLong(){return((t=>t<0?Math.ceil(t):Math.floor(t))(this.nextInternal(32))<<32)+(t=>t<0?Math.ceil(t):Math.floor(t))(this.nextInternal(32))}setSeed$long(t){this.setSeed$int$int(t>>24&16777215|0,t&16777215|0)}next(t){return this.nextInternal(t)|0}nextInternal(t){let n=this.seedhi*j.multiplierLo+this.seedlo*j.multiplierHi,e=this.seedlo*j.multiplierLo+11;const s=Math.floor(e*j.twoToTheMinus24);if(n+=s,e-=s*j.twoToThe24,n%=j.twoToThe24,this.seedhi=n,this.seedlo=e,t<=24)return Math.floor(this.seedhi*j.twoToTheXMinus24_$LI$()[t]);{const i=this.seedhi*(1<<t-24),l=Math.floor(this.seedlo*j.twoToTheXMinus48_$LI$()[t]);let o=i+l;return o>=j.twoToThe31&&(o-=j.twoToThe32),o}}setSeed$int$int(t,n){this.seedhi=t^1502,this.seedlo=n^15525485,this.haveNextNextGaussian=!1}setSeed(t,n){if((typeof t=="number"||t===null)&&(typeof n=="number"||n===null))return this.setSeed$int$int(t,n);if((typeof t=="number"||t===null)&&n===void 0)return this.setSeed$long(t);throw new Error("invalid overload")}}j.__static_initialized=!1,j.multiplierHi=1502,j.multiplierLo=15525485,j.twoToThe24=16777216,j.twoToThe31=2147483648,j.twoToThe32=4294967296,j.twoToTheMinus24=5960464477539063e-23,j.twoToTheMinus26=14901161193847656e-24,j.twoToTheMinus31=4656612873077393e-25,j.twoToTheMinus53=11102230246251565e-32,j.uniqueSeed=0,j.__class="Random";class Y{static nextInt(t,n){if(n<=0)throw Object.defineProperty(new Error,"__classes",{configurable:!0,value:["java.lang.Throwable","java.lang.Object","java.lang.RuntimeException","java.lang.IllegalArgumentException","java.lang.Exception"]});if(R.isPowerOfTwo(n))return t.nextInt()&n-1;{const e=-2147483648-(4294967296%(i=>i<0?Math.ceil(i):Math.floor(i))(n)|0)|0;let s;do s=t.nextInt();while(s>=e);return Y.method3538(s,n)}}static method3538(t,n){return(t>>31&n-1)+(t+(t>>>31))%n}}Y.__class="RandomUtils";class xt{constructor(){this.cursor===void 0&&(this.cursor=null),this.sentinel=new ft,this.sentinel.secondaryPrev=this.sentinel,this.sentinel.secondaryNext=this.sentinel}static insertAfter(t,n){t.secondaryPrev!=null&&t.unlinkSecondary(),t.secondaryNext=n.secondaryNext,t.secondaryPrev=n,t.secondaryPrev.secondaryNext=t,t.secondaryNext.secondaryPrev=t}head(){const t=this.sentinel.secondaryNext;return t===this.sentinel?(this.cursor=null,null):(this.cursor=t.secondaryNext,t)}addTail(t){t.secondaryPrev!=null&&t.unlinkSecondary(),t.secondaryNext=this.sentinel,t.secondaryPrev=this.sentinel.secondaryPrev,t.secondaryPrev.secondaryNext=t,t.secondaryNext.secondaryPrev=t}size(){let t=0,n=this.sentinel.secondaryNext;for(;this.sentinel!==n;)n=n.secondaryNext,t++;return t}removeHead(){const t=this.sentinel.secondaryNext;return this.sentinel===t?null:(t.unlinkSecondary(),t)}clear(){for(;;){const t=this.sentinel.secondaryNext;if(t===this.sentinel){this.cursor=null;return}t.unlinkSecondary()}}next(){const t=this.cursor;return this.sentinel===t?(this.cursor=null,null):(this.cursor=t.secondaryNext,t)}}xt.__class="SecondaryLinkedList";class J{static __static_initialize(){J.__static_initialized||(J.__static_initialized=!0,J.__static_initializer_0())}static INVERSE_SQUARE_ROOT_$LI$(){return J.__static_initialize(),J.INVERSE_SQUARE_ROOT==null&&(J.INVERSE_SQUARE_ROOT=(t=>{let n=[];for(;t-- >0;)n.push(0);return n})(32896)),J.INVERSE_SQUARE_ROOT}static __static_initializer_0(){let t=0;for(let n=0;n<256;n++)for(let e=0;e<=n;e++)J.INVERSE_SQUARE_ROOT_$LI$()[t++]=255/Math.sqrt(Math.fround((n*n+e*e+65535)/65535))|0}}J.__static_initialized=!1,J.__class="TextureMathUtils";class dt{constructor(t,n,e){this.fillColor===void 0&&(this.fillColor=0),this.outlineWidth===void 0&&(this.outlineWidth=0),this.outlineColor===void 0&&(this.outlineColor=0),this.fillColor=t,this.outlineWidth=e,this.outlineColor=n}}dt.__class="TextureOpRasterizerShape";class ut extends S{constructor(t){if(t!=null&&t instanceof Array&&(t.length==0||t[0]==null||typeof t[0]=="number")||t===null)super(),this.bytes===void 0&&(this.bytes=null),this.position===void 0&&(this.position=0),this.bytes=t,this.position=0;else if(typeof t=="number"||t===null){let e=arguments[0];super(),this.bytes===void 0&&(this.bytes=null),this.position===void 0&&(this.position=0),this.bytes=v.allocate(e),this.position=0}else throw new Error("invalid overload")}static crc32$byte_A$int$int(t,n,e){throw Object.defineProperty(new Error("removed"),"__classes",{configurable:!0,value:["java.lang.Throwable","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]})}static crc32(t,n,e){if((t!=null&&t instanceof Array&&(t.length==0||t[0]==null||typeof t[0]=="number")||t===null)&&(typeof n=="number"||n===null)&&(typeof e=="number"||e===null))return ut.crc32$byte_A$int$int(t,n,e);if((t!=null&&t instanceof Array&&(t.length==0||t[0]==null||typeof t[0]=="number")||t===null)&&(typeof n=="number"||n===null)&&e===void 0)return ut.crc32$byte_A$int(t,n);throw new Error("invalid overload")}static crc32$byte_A$int(t,n){return ut.crc32$byte_A$int$int(t,0,n)}static getStringLength(t){return t.length+1}writeString(t){throw Object.defineProperty(new Error("removed"),"__classes",{configurable:!0,value:["java.lang.Throwable","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]})}readShort(){this.position+=2;let t=((this.bytes[this.position-2]&255)<<8)+(this.bytes[this.position-1]&255);return t>32767&&(t-=65536),t}writeUnsignedShortSmart(t){if(t>=0&&t<128)this.writeByte(t);else if(t>=0&&t<32768)this.writeShort(t+32768);else throw Object.defineProperty(new Error,"__classes",{configurable:!0,value:["java.lang.Throwable","java.lang.Object","java.lang.RuntimeException","java.lang.IllegalArgumentException","java.lang.Exception"]})}writeByteC(t){this.bytes[this.position++]=-t|0}readUnsignedShortSmart(){return(this.bytes[this.position]&255)<128?this.readUnsignedByte():this.readUnsignedShort()-32768}writeVarInt(t){(t&-128)!==0&&((t&-16384)!==0&&((t&-2097152)!==0&&((t&-268435456)!==0&&this.writeByte(t>>>28|128),this.writeByte(t>>>21|128)),this.writeByte(t>>>14|128)),this.writeByte(t>>>7|128)),this.writeByte(t&127)}writeByte(t){this.bytes[this.position++]=t|0}writeLong(t){this.bytes[this.position++]=t>>56|0,this.bytes[this.position++]=t>>48|0,this.bytes[this.position++]=t>>40|0,this.bytes[this.position++]=t>>32|0,this.bytes[this.position++]=t>>24|0,this.bytes[this.position++]=t>>16|0,this.bytes[this.position++]=t>>8|0,this.bytes[this.position++]=t|0}readIntAlt3Reverse(){return this.position+=4,((this.bytes[this.position-1]&255)<<16)+((this.bytes[this.position-2]&255)<<24)+((this.bytes[this.position-4]&255)<<8)+(this.bytes[this.position-3]&255)}writeIntAlt3(t){this.bytes[this.position++]=t>>16|0,this.bytes[this.position++]=t>>24|0,this.bytes[this.position++]=t|0,this.bytes[this.position++]=t>>8|0}readShortLE(){this.position+=2;let t=((this.bytes[this.position-1]&255)<<8)+(this.bytes[this.position-2]&255);return t>32767&&(t-=65536),t}writeByteS(t){this.bytes[this.position++]=128-t|0}readIntAlt3(){return this.position+=4,(this.bytes[this.position-2]&255)+((this.bytes[this.position-4]&255)<<16)+((this.bytes[this.position-3]&255)<<24)+((this.bytes[this.position-1]&255)<<8)}readUnsignedShortLEA(){return this.position+=2,((this.bytes[this.position-1]&255)<<8)+(this.bytes[this.position-2]-128&255)}readUnsignedByteC(){return-this.bytes[this.position++]&255}method4590(){return this.position+=3,((this.bytes[this.position-2]&255)<<16)+((this.bytes[this.position-3]&255)<<8)+(this.bytes[this.position-1]&255)}writeIntAlt3Reverse(t){this.bytes[this.position++]=t>>8|0,this.bytes[this.position++]=t|0,this.bytes[this.position++]=t>>24|0,this.bytes[this.position++]=t>>16|0}readString(){throw Object.defineProperty(new Error("removed"),"__classes",{configurable:!0,value:["java.lang.Throwable","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]})}writeBytes(t,n){for(let e=0;e<n;e++)this.bytes[this.position++]=t[e]}readInt(){return this.position+=4,(this.bytes[this.position-1]&255)+((this.bytes[this.position-4]&255)<<24)+((this.bytes[this.position-3]&255)<<16)+((this.bytes[this.position-2]&255)<<8)}readVarLong(t){if(t--,t<0||t>7)throw Object.defineProperty(new Error,"__classes",{configurable:!0,value:["java.lang.Throwable","java.lang.Object","java.lang.RuntimeException","java.lang.IllegalArgumentException","java.lang.Exception"]});let n=0;for(let e=t*8;e>=0;e-=8)n|=((s=>s<0?Math.ceil(s):Math.floor(s))(this.bytes[this.position++])&255)<<e;return n}readShortSmart(){return(this.bytes[this.position]&255)<128?this.readUnsignedByte()-64:this.readUnsignedShort()-49152}readUnsignedMultiSmart(){let t=0,n;for(n=this.readUnsignedShortSmart();n===32767;n=this.readUnsignedShortSmart())t+=32767;return t+n}writeIntLE(t){this.bytes[this.position++]=t|0,this.bytes[this.position++]=t>>8|0,this.bytes[this.position++]=t>>16|0,this.bytes[this.position++]=t>>24|0}readBytesA(t,n){for(let e=0;e<n;e++)t[e]=this.bytes[this.position++]-128|0}verifyCrc32(){this.position-=4;const t=ut.crc32$byte_A$int$int(this.bytes,0,this.position),n=this.readInt();return t===n}writeMedium(t){this.bytes[this.position++]=t>>16|0,this.bytes[this.position++]=t>>8|0,this.bytes[this.position++]=t|0}writeShortLE(t){this.bytes[this.position++]=t|0,this.bytes[this.position++]=t>>8|0}writeFloat(t){const n=(e=>{let s=new ArrayBuffer(4);return new Float32Array(s)[0]=e,new Uint32Array(s)[0]})(t);this.bytes[this.position++]=n>>24|0,this.bytes[this.position++]=n>>16|0,this.bytes[this.position++]=n>>8|0,this.bytes[this.position++]=n|0}readUnsignedByteS(){return 128-this.bytes[this.position++]&255}writeVarLong(t,n){if(n--,n<0||n>7)throw Object.defineProperty(new Error,"__classes",{configurable:!0,value:["java.lang.Throwable","java.lang.Object","java.lang.RuntimeException","java.lang.IllegalArgumentException","java.lang.Exception"]});for(let e=n*8;e>=0;e-=8)this.bytes[this.position++]=t>>e|0}xteaDecrypt(t,n){const e=(n-5)/8|0,s=this.position;this.position=5;for(let i=0;i<e;i++){let l=this.readInt(),o=this.readInt(),a=-957401312,h=32;for(;h-- >0;)o-=(l<<4^l>>>5)+l^t[a>>>11&3]+a,a-=-1640531527,l-=(o<<4^o>>>5)+o^a+t[a&3];this.position-=8,this.writeInt(l),this.writeInt(o)}this.position=s}readByteS(){return 128-this.bytes[this.position++]|0}readVarInt(){let t=this.bytes[this.position++],n=0;for(;t<0;)n=(t&127|n)<<7,t=this.bytes[this.position++];return n|t}writeIntLength(t){this.bytes[this.position-t-4]=t>>24|0,this.bytes[this.position-t-3]=t>>16|0,this.bytes[this.position-t-2]=t>>8|0,this.bytes[this.position-t-1]=t|0}writeByteA(t){this.bytes[this.position++]=t+128|0}readBytes(t,n){for(let e=0;e<n;e++)t[e]=this.bytes[this.position++]}writeShortLE2(t){this.bytes[this.position++]=t|0,this.bytes[this.position++]=t>>8|0}writeShortA(t){this.bytes[this.position++]=t>>8|0,this.bytes[this.position++]=t+128|0}readByteC(){return-this.bytes[this.position++]|0}readUnsignedShort(){return this.position+=2,(this.bytes[this.position-1]&255)+((this.bytes[this.position-2]&255)<<8)}writeInt(t){this.bytes[this.position++]=t>>24|0,this.bytes[this.position++]=t>>16|0,this.bytes[this.position++]=t>>8|0,this.bytes[this.position++]=t|0}readUnsignedMedium(){return this.position+=3,(this.bytes[this.position-1]&255)+((this.bytes[this.position-3]&255)<<16)+((this.bytes[this.position-2]&255)<<8)}readIntLE(){return this.position+=4,(this.bytes[this.position-4]&255)+((this.bytes[this.position-1]&255)<<24)+((this.bytes[this.position-2]&255)<<16)+((this.bytes[this.position-3]&255)<<8)}writeCrc32(t){const n=ut.crc32$byte_A$int$int(this.bytes,t,this.position);return this.writeInt(n),n}readLong(){const t=(e=>e<0?Math.ceil(e):Math.floor(e))(this.readInt())&4294967295,n=(e=>e<0?Math.ceil(e):Math.floor(e))(this.readInt())&4294967295;return(t<<32)+n}readUnsignedByteA(){return this.bytes[this.position++]-128&255}writeIntLE2(t){this.bytes[this.position++]=t|0,this.bytes[this.position++]=t>>8|0,this.bytes[this.position++]=t>>16|0,this.bytes[this.position++]=t>>24|0}readStringFast(){return this.bytes[this.position]===0?(this.position++,null):this.readString()}readShortA(){this.position+=2;let t=(this.bytes[this.position-1]-128&255)+((this.bytes[this.position-2]&255)<<8);return t>32767&&(t-=65536),t}xteaEncrypt(t){const n=this.position/8|0;this.position=0;for(let e=0;e<n;e++){let s=this.readInt(),i=this.readInt(),l=0,o=32;for(;o-- >0;)s+=i+(i<<4^i>>>5)^l+t[l&3],l+=-1640531527,i+=l+t[l>>>11&-1354760189]^(s>>>5^s<<4)+s;this.position-=8,this.writeInt(s),this.writeInt(i)}}readUnsignedByte(){return this.bytes[this.position++]&255}readUnsignedShortA(){return this.position+=2,((this.bytes[this.position-2]&255)<<8)+(this.bytes[this.position-1]-128&255)}writeShort(t){this.bytes[this.position++]=t>>8|0,this.bytes[this.position++]=t|0}writeFloatLE(t){const n=(e=>{let s=new ArrayBuffer(4);return new Float32Array(s)[0]=e,new Uint32Array(s)[0]})(t);this.bytes[this.position++]=n|0,this.bytes[this.position++]=n>>8|0,this.bytes[this.position++]=n>>16|0,this.bytes[this.position++]=n>>24|0}readVersionedString(){throw Object.defineProperty(new Error("removed"),"__classes",{configurable:!0,value:["java.lang.Throwable","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]})}readBytesReverse(t,n){for(let e=n-1;e>=0;e--)t[e]=this.bytes[this.position++]}readUnsignedShortLE(){return this.position+=2,((this.bytes[this.position-1]&255)<<8)+(this.bytes[this.position-2]&255)}writeShortLEA(t){this.bytes[this.position++]=t+128|0,this.bytes[this.position++]=t>>8|0}readByte(){return this.bytes[this.position++]}writeByteLength(t){this.bytes[this.position-t-1]=t|0}}ut.__class="Buffer";class it extends S{constructor(t,n){super(),this.row===void 0&&(this.row=0),this.index===void 0&&(this.index=0),this.row=t,this.index=n}static VALID_$LI$(){return it.VALID==null&&(it.VALID=new it(0,0)),it.VALID}}it.__class="ColorImageCacheEntry";class lt extends S{constructor(t,n){super(),this.row===void 0&&(this.row=0),this.index===void 0&&(this.index=0),this.row=t,this.index=n}static VALID_$LI$(){return lt.VALID==null&&(lt.VALID=new lt(0,0)),lt.VALID}}lt.__class="MonochromeImageCacheEntry";class ft extends S{constructor(){super(),this.secondaryPrev===void 0&&(this.secondaryPrev=null),this.secondaryKey===void 0&&(this.secondaryKey=0),this.secondaryNext===void 0&&(this.secondaryNext=null)}unlinkSecondary(){this.secondaryPrev!=null&&(this.secondaryPrev.secondaryNext=this.secondaryNext,this.secondaryNext.secondaryPrev=this.secondaryPrev,this.secondaryPrev=null,this.secondaryNext=null)}isSecondaryLinked(){return this.secondaryPrev!=null}}ft.__class="SecondaryNode";class C extends S{constructor(t,n){super(),this.colorImageCache===void 0&&(this.colorImageCache=null),this.monochromeImageCache===void 0&&(this.monochromeImageCache=null),this.imageCacheCapacity===void 0&&(this.imageCacheCapacity=0),this.monochrome===void 0&&(this.monochrome=!1),this.childOps===void 0&&(this.childOps=null),this.monochrome=n,this.childOps=(e=>{let s=[];for(;e-- >0;)s.push(null);return s})(t)}static permutations_$LI$(){return C.permutations==null&&(C.permutations=new H(16)),C.permutations}static createTrigonometryTables(){if(!(C.SINE!=null&&C.COSINE!=null)){C.COSINE=(t=>{let n=[];for(;t-- >0;)n.push(0);return n})(256),C.SINE=(t=>{let n=[];for(;t-- >0;)n.push(0);return n})(256);for(let t=0;t<256;t++){const n=t/255*6.283185307179586;C.SINE[t]=Math.sin(n)*4096|0,C.COSINE[t]=Math.cos(n)*4096|0}}}static getPermutation(t){let n=C.permutations_$LI$().get(t);if(n==null){const e=(i=>{let l=[];for(;i-- >0;)l.push(0);return l})(512),s=new j(t);for(let i=0;i<255;i++)e[i]=i|0;for(let i=0;i<255;i++){const l=255-i,o=Y.nextInt(s,l),a=e[o];e[o]=e[l],e[l]=e[511-i]=a}n=new At(e),C.permutations_$LI$().put(t,n)}return n.value}static perlinFade(t){const n=(t*t>>12)*t>>12|0,e=t*6-61440|0,s=(t*e>>12)+40960|0;return n*s>>12|0}static decode(t){t.readUnsignedByte();const n=t.readUnsignedByte(),e=C.create(n);e.imageCacheCapacity=t.readUnsignedByte();const s=t.readUnsignedByte();for(let i=0;i<s;i++){const l=t.readUnsignedByte();e.decode(t,l)}return e.postDecode(),e}static create(t){return t===0?new Wt:t===1?new jt:t===2?new Xt:t===3?new en:t===4?new Bt:t===5?new Rt:t===6?new Tt:t===7?new Lt:t===8?new gt:t===9?new Dt:t===10?new Ut:t===11?new vt:t===12?new sn:t===13?new Qt:t===14?new ln:t===15?new L:t===16?new Nt:t===17?new kt:t===18?new on:t===19?new Zt:t===20?new nn:t===21?new Gt:t===22?new Vt:t===23?new z:t===24?new Yt:t===25?new Ot:t===26?new Ct:t===27?new Mt:t===28?new Ft:t===29?new St:t===30?new Kt:t===31?new Pt:t===32?new zt:t===33?new Et:t===34?new Jt:t===35?new Ht:t===36?new tn:t===37?new _t:t===38?new qt:t===39?new wt:null}getChildColorOutput(t,n){if(!this.childOps[t].monochrome)return this.childOps[t].getColorOutput(n);const e=[null,null,null],s=this.childOps[t].getMonochromeOutput(n);return e[0]=s,e[2]=s,e[1]=s,e}decode(t,n){}getSpriteId(){return-1}getTextureId(){return-1}getMonochromeOutput(t){throw Object.defineProperty(new Error("This operation does not have a monochrome output"),"__classes",{configurable:!0,value:["java.lang.Throwable","java.lang.IllegalStateException","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]})}getColorOutput(t){throw Object.defineProperty(new Error("This operation does not have a colour output"),"__classes",{configurable:!0,value:["java.lang.Throwable","java.lang.IllegalStateException","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]})}clearImageCache(){this.monochrome?(this.monochromeImageCache.clear(),this.monochromeImageCache=null):(this.colorImageCache.clear(),this.colorImageCache=null)}createImageCache(t,n){const e=this.imageCacheCapacity===255?t:this.imageCacheCapacity;this.monochrome?this.monochromeImageCache=new q(e,t,n):this.colorImageCache=new k(e,t,n)}getChildMonochromeOutput(t,n){return this.childOps[t].monochrome?this.childOps[t].getMonochromeOutput(n):this.childOps[t].getColorOutput(n)[0]}postDecode(){}}C.COSINE=null,C.SINE=null,C.__class="TextureOp";class mt extends dt{constructor(t,n,e,s,i,l,o,a,h,c){super(-1,h,c),this.y1===void 0&&(this.y1=0),this.x0===void 0&&(this.x0=0),this.y0===void 0&&(this.y0=0),this.x1===void 0&&(this.x1=0),this.x2===void 0&&(this.x2=0),this.y2===void 0&&(this.y2=0),this.x3===void 0&&(this.x3=0),this.y3===void 0&&(this.y3=0),this.y1=s,this.x0=t,this.y0=n,this.x1=e,this.x2=i,this.y2=l,this.x3=o,this.y3=a}static create(t){return new mt(t.readShort(),t.readShort(),t.readShort(),t.readShort(),t.readShort(),t.readShort(),t.readShort(),t.readShort(),t.readUnsignedMedium(),t.readUnsignedByte())}renderOutline(t,n){const e=t*this.x0>>12,s=t*this.x1>>12,i=n*this.y1>>12,l=t*this.x2>>12,o=n*this.y0>>12,a=n*this.y2>>12,h=n*this.y3>>12,c=t*this.x3>>12;r.sub22_method4693(s,i,this.outlineColor,l,c,o,h,a,e)}renderFill(t,n){}render(t,n){}}mt.__class="TextureOpRasterizerBezierCurve";class It extends dt{constructor(t,n,e,s,i,l,o){super(i,l,o),this.x===void 0&&(this.x=0),this.horizontalRadius===void 0&&(this.horizontalRadius=0),this.y===void 0&&(this.y=0),this.verticalRadius===void 0&&(this.verticalRadius=0),this.x=t,this.horizontalRadius=e,this.y=n,this.verticalRadius=s}static create(t){return new It(t.readShort(),t.readShort(),t.readShort(),t.readShort(),t.readUnsignedMedium(),t.readUnsignedMedium(),t.readUnsignedByte())}render(t,n){const e=this.x*t>>12,s=this.horizontalRadius*t>>12,i=this.verticalRadius*n>>12,l=this.y*n>>12;r.sub18_method1745(s,this.fillColor,e,this.outlineColor,this.outlineWidth,l,i)}renderFill(t,n){const e=this.x*t>>12,s=this.horizontalRadius*t>>12,i=this.verticalRadius*n>>12,l=this.y*n>>12;r.sub28_method3323(i,e,this.fillColor,l,s)}renderOutline(t,n){}}It.__class="TextureOpRasterizerEllipse";class bt extends dt{constructor(t,n,e,s,i,l){super(-1,i,l),this.x1===void 0&&(this.x1=0),this.y0===void 0&&(this.y0=0),this.x0===void 0&&(this.x0=0),this.y1===void 0&&(this.y1=0),this.x1=e,this.y0=n,this.x0=t,this.y1=s}static create(t){return new bt(t.readShort(),t.readShort(),t.readShort(),t.readShort(),t.readUnsignedMedium(),t.readUnsignedByte())}renderFill(t,n){}renderOutline(t,n){const e=this.x0*t>>12,s=this.x1*t>>12,i=this.y1*n>>12,l=this.y0*n>>12;r.sub32_method4022(l,i,this.outlineColor,e,s)}render(t,n){}}bt.__class="TextureOpRasterizerLine";class yt extends dt{constructor(t,n,e,s,i,l,o){super(i,l,o),this.x1===void 0&&(this.x1=0),this.y1===void 0&&(this.y1=0),this.x0===void 0&&(this.x0=0),this.y0===void 0&&(this.y0=0),this.x1=e,this.y1=s,this.x0=t,this.y0=n}static create(t){return new yt(t.readShort(),t.readShort(),t.readShort(),t.readShort(),t.readUnsignedMedium(),t.readUnsignedMedium(),t.readUnsignedByte())}render(t,n){const e=this.x0*t>>12,s=this.y0*n>>12,i=this.x1*t>>12,l=this.y1*n>>12;r.sub36_method4566(e,this.outlineColor,this.fillColor,this.outlineWidth,l,i,s)}renderOutline(t,n){const e=this.x0*t>>12,s=this.x1*t>>12,i=this.y0*n>>12,l=this.y1*n>>12;r.sub32_method3997(e,this.outlineColor,i,this.outlineWidth,l,s)}renderFill(t,n){const e=this.x0*t>>12,s=this.x1*t>>12,i=this.y0*n>>12,l=this.y1*n>>12;r.sub29_method3429(e,l,s,i,this.fillColor)}}yt.__class="TextureOpRasterizerRectangle";class At extends ft{constructor(t){super(),this.value===void 0&&(this.value=null),this.value=t}}At.__class="ByteArraySecondaryNode";class an extends ft{constructor(){super(),this.innerWidth===void 0&&(this.innerWidth=0),this.yOffset===void 0&&(this.yOffset=0),this.xOffset===void 0&&(this.xOffset=0),this.height===void 0&&(this.height=0),this.width===void 0&&(this.width=0),this.innerHeight===void 0&&(this.innerHeight=0)}renderRotatedScaledTransparent$int$int$int$int$int$int(t,n,e,s,i,l){throw new Error("cannot invoke abstract overloaded method... check your argument(s) type(s)")}renderRotatedScaledTransparent(t,n,e,s,i,l){if((typeof t=="number"||t===null)&&(typeof n=="number"||n===null)&&(typeof e=="number"||e===null)&&(typeof s=="number"||s===null)&&(typeof i=="number"||i===null)&&(typeof l=="number"||l===null))return this.renderRotatedScaledTransparent$int$int$int$int$int$int(t,n,e,s,i,l);if((typeof t=="number"||t===null)&&(typeof n=="number"||n===null)&&(typeof e=="number"||e===null)&&(typeof s=="number"||s===null)&&i===void 0&&l===void 0)return this.renderRotatedScaledTransparent$int$int$int$int(t,n,e,s);throw new Error("invalid overload")}renderRotatedScaledTransparent$int$int$int$int(t,n,e,s){const i=this.innerWidth<<3;e=(i&15)+(e<<4);const l=this.innerHeight<<3;t=(l&15)+(t<<4),this.renderRotatedScaledTransparent$int$int$int$int$int$int(i,l,e,t,n,s)}}an.__class="Sprite";class f extends ft{constructor(t){super(),this.spriteIds===void 0&&(this.spriteIds=null),this.textureIds===void 0&&(this.textureIds=null),this.brightnessOp===void 0&&(this.brightnessOp=null),this.colorOp===void 0&&(this.colorOp=null),this.alphaOp===void 0&&(this.alphaOp=null),this.ops===void 0&&(this.ops=null);let n=0;const e=t.readUnsignedByte();this.ops=(a=>{let h=[];for(;a-- >0;)h.push(null);return h})(e);let s=0;const i=(a=>{let h=[];for(;a-- >0;)h.push(null);return h})(e);for(let a=0;a<e;a++){const h=C.decode(t);h.getSpriteId()>=0&&n++,h.getTextureId()>=0&&s++;const c=h.childOps.length;i[a]=(d=>{let p=[];for(;d-- >0;)p.push(0);return p})(c);for(let d=0;d<c;d++)i[a][d]=t.readUnsignedByte();this.ops[a]=h}this.textureIds=(a=>{let h=[];for(;a-- >0;)h.push(0);return h})(s);let l=0;this.spriteIds=(a=>{let h=[];for(;a-- >0;)h.push(0);return h})(n);let o=0;for(let a=0;a<e;a++){const h=this.ops[a],c=h.childOps.length;for(let m=0;m<c;m++)h.childOps[m]=this.ops[i[a][m]];const d=h.getSpriteId(),p=h.getTextureId();d>0&&(this.spriteIds[o++]=d),p>0&&(this.textureIds[l++]=p),i[a]=null}this.colorOp=this.ops[t.readUnsignedByte()],this.alphaOp=this.ops[t.readUnsignedByte()],this.brightnessOp=this.ops[t.readUnsignedByte()]}static brightnessMap_$LI$(){return f.brightnessMap==null&&(f.brightnessMap=(t=>{let n=[];for(;t-- >0;)n.push(0);return n})(256)),f.brightnessMap}static setBrightness(t){if(f.brightness!==t){for(let n=0;n<256;n++){const e=Math.pow(n/255,t)*255|0;f.brightnessMap_$LI$()[n]=e>255?255:e}f.brightness=t}}static setSize(t,n){if(t!==f.width){f.normalisedX=(e=>{let s=[];for(;e-- >0;)s.push(0);return s})(t);for(let e=0;e<t;e++)f.normalisedX[e]=(e<<12)/t|0;f.widthMask=t-1,f.width=t,f.widthTimes32=t*32}if(n!==f.height){if(n===f.width)f.normalisedY=f.normalisedX;else{f.normalisedY=(e=>{let s=[];for(;e-- >0;)s.push(0);return s})(n);for(let e=0;e<n;e++)f.normalisedY[e]=(e<<12)/n|0}f.heightMask=n-1,f.height=n}}getPixels(t,n,e,s,i,l){f.setBrightness(s),f.setSize(t,n);const o=(p=>{let m=[];for(;p-- >0;)m.push(0);return m})(t*n);for(let p=0;p<this.ops.length;p++)this.ops[p].createImageCache(n,t);f.loadedTextures=e;let a,h,c;l?(c=t-1,a=-1,h=-1):(h=1,a=t,c=0);let d=0;for(let p=0;p<n;p++){i&&(d=p);let m,y,u;if(this.colorOp.monochrome){const I=this.colorOp.getMonochromeOutput(p);y=I,u=I,m=I}else{const I=this.colorOp.getColorOutput(p);m=I[0],u=I[2],y=I[1]}for(let I=c;I!==a;I+=h){let w=m[I]>>4,$=y[I]>>4;$>255&&($=255);let x=u[I]>>4;w>255&&(w=255),x>255&&(x=255),$<0&&($=0),w<0&&(w=0);const _=f.brightnessMap_$LI$()[$],O=f.brightnessMap_$LI$()[w];x<0&&(x=0);const T=f.brightnessMap_$LI$()[x];o[d++]=T+(O<<16)+(_<<8),i&&(d+=t-1)}}for(let p=0;p<this.ops.length;p++)this.ops[p].clearImageCache();return o}}f.loadedTextures=null,f.spriteGroupId=-1,f.brightness=-1,f.width=0,f.height=0,f.widthMask=0,f.heightMask=0,f.normalisedX=null,f.normalisedY=null,f.widthTimes32=0,f.__class="Texture";class q{constructor(t,n,e){this.size=0,this.singleRow=-1,this.recentlyUsed=new F,this.invalid=!1,this.height===void 0&&(this.height=0),this.entries===void 0&&(this.entries=null),this.capacity===void 0&&(this.capacity=0),this.pixels===void 0&&(this.pixels=null),this.height=n,this.entries=(s=>{let i=[];for(;s-- >0;)i.push(null);return i})(this.height),this.capacity=t,this.pixels=(function(s){let i=function(l){if(l.length===0)return 0;{let o=[];for(let a=0;a<l[0];a++)o.push(i(l.slice(1)));return o}};return i(s)})([this.capacity,e])}static __static_initialize(){q.__static_initialized||(q.__static_initialized=!0,q.__static_initializer_0())}static PERLIN_FADE_$LI$(){return q.__static_initialize(),q.PERLIN_FADE==null&&(q.PERLIN_FADE=(t=>{let n=[];for(;t-- >0;)n.push(0);return n})(4096)),q.PERLIN_FADE}static __static_initializer_0(){for(let t=0;t<4096;t++)q.PERLIN_FADE_$LI$()[t]=C.perlinFade(t)}get$(){if(this.capacity!==this.height)throw Object.defineProperty(new Error("Can only retrieve a full image cache"),"__classes",{configurable:!0,value:["java.lang.Throwable","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]});for(let t=0;t<this.capacity;t++)this.entries[t]=lt.VALID_$LI$();return this.pixels}get$int(t){if(this.capacity===this.height)return this.invalid=this.entries[t]==null,this.entries[t]=lt.VALID_$LI$(),this.pixels[t];if(this.capacity===1)return this.invalid=t!==this.singleRow,this.singleRow=t,this.pixels[0];{let n=this.entries[t];if(n==null){if(this.invalid=!0,this.capacity>this.size)n=new lt(t,this.size),this.size++;else{const e=this.recentlyUsed.tail();n=new lt(t,e.index),this.entries[e.row]=null,e.unlink()}this.entries[t]=n}else this.invalid=!1;return this.recentlyUsed.addHead(n),this.pixels[n.index]}}get(t){if(typeof t=="number"||t===null)return this.get$int(t);if(t===void 0)return this.get$();throw new Error("invalid overload")}clear(){for(let t=0;t<this.capacity;t++)this.pixels[t]=null;this.pixels=null,this.entries=null,this.recentlyUsed.clear(),this.recentlyUsed=null}}q.__static_initialized=!1,q.__class="MonochromeImageCache";class _t extends C{constructor(){super(0,!0),this.anInt4505=0,this.anInt4503=8192,this.anInt4508=2048,this.anInt4504=0,this.anInt4515=2048,this.anInt4507=12288,this.anInt4517=4096}method3687(t,n){const e=(n-t)*this.anInt4507>>12;let s=C.COSINE[e*255>>12&255];return s=(s<<12)/this.anInt4507|0,s=(s<<12)/this.anInt4503|0,s=this.anInt4517*s>>12,s>t+n&&-s<t+n}method3690(t,n){const e=(n+t)*this.anInt4507>>12;let s=C.COSINE[e*255>>12&255];return s=(s<<12)/this.anInt4507|0,s=(s<<12)/this.anInt4503|0,s=s*this.anInt4517>>12,s>n-t&&n-t>-s}postDecode(){C.createTrigonometryTables()}decode(t,n){n===0?this.anInt4508=t.readUnsignedShort():n===1?this.anInt4505=t.readUnsignedShort():n===2?this.anInt4504=t.readUnsignedShort():n===3?this.anInt4515=t.readUnsignedShort():n===4?this.anInt4507=t.readUnsignedShort():n===5?this.anInt4517=t.readUnsignedShort():n===6&&(this.anInt4503=t.readUnsignedShort())}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);if(this.monochromeImageCache.invalid){const e=f.normalisedY[t]-2048;for(let s=0;s<f.width;s++){const i=f.normalisedX[s]-2048;let l=i+this.anInt4508;l=l>=-2048?l:l+4096;let o=e+this.anInt4505;l=l<=2048?l:l-4096,o=o>=-2048?o:o+4096,o=o<=2048?o:o-4096;let a=i+this.anInt4504,h=e+this.anInt4515;a=a>=-2048?a:a+4096,a=a<=2048?a:a-4096,h=h>=-2048?h:h+4096,h=h<=2048?h:h-4096,n[s]=this.method3687(l,o)||this.method3690(a,h)?4096:0}}return n}}_t.__class="TextureOp37";class Ct extends C{constructor(){super(1,!0),this.minValue=0,this.maxValue=4096}decode(t,n){n===0?this.minValue=t.readUnsignedShort():n===1&&(this.maxValue=t.readUnsignedShort())}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);if(this.monochromeImageCache.invalid){const e=this.getChildMonochromeOutput(0,t);for(let s=0;s<f.width;s++){const i=e[s];n[s]=i>=this.minValue&&i<=this.maxValue?4096:0}}return n}}Ct.__class="TextureOpBinary";class Rt extends C{constructor(){super(1,!1),this.radiusY=1,this.radiusX=1}getColorOutput(t){const n=this.colorImageCache.get$int(t);if(this.colorImageCache.invalid){const e=this.radiusY+this.radiusY+1,s=65536/e|0,l=65536/(this.radiusX+this.radiusX+1)|0,o=(d=>{let p=[];for(;d-- >0;)p.push(null);return p})(e);for(let d=t-this.radiusY;d<=t+this.radiusY;d++){const p=this.getChildColorOutput(0,d&f.heightMask),m=(function(A){let E=function(D){if(D.length===0)return 0;{let N=[];for(let g=0;g<D[0];g++)N.push(E(D.slice(1)));return N}};return E(A)})([3,f.width]);let y=0,u=0;const I=p[0];let w=0;const $=p[2],x=p[1];for(let A=-this.radiusX;A<=this.radiusX;A++){const E=f.widthMask&A;w+=x[E],y+=I[E],u+=$[E]}const _=m[0],O=m[1],T=m[2];let B=0;for(;f.width>B;){_[B]=l*y>>16,O[B]=w*l>>16,T[B]=l*u>>16;let A=B-this.radiusX&f.widthMask;const E=w-x[A],D=y-I[A];B++;const N=u-$[A];A=B+this.radiusX&f.widthMask,y=D+I[A],w=E+x[A],u=N+$[A]}o[d+this.radiusY-t]=m}const a=n[1],h=n[2],c=n[0];for(let d=0;d<f.width;d++){let p=0,m=0,y=0;for(let u=0;u<e;u++){const I=o[u];y+=I[2][d],p+=I[0][d],m+=I[1][d]}c[d]=s*p>>16,a[d]=s*m>>16,h[d]=y*s>>16}}return n}decode(t,n){n===0?this.radiusX=t.readUnsignedByte():n===1?this.radiusY=t.readUnsignedByte():n===2&&(this.monochrome=t.readUnsignedByte()===1)}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);if(this.monochromeImageCache.invalid){const e=this.radiusY+this.radiusY+1,s=65536/e|0,l=65536/(this.radiusX+this.radiusX+1)|0,o=(a=>{let h=[];for(;a-- >0;)h.push(null);return h})(e);for(let a=t-this.radiusY;a<=t+this.radiusY;a++){const h=this.getChildMonochromeOutput(0,f.heightMask&a),c=(m=>{let y=[];for(;m-- >0;)y.push(0);return y})(f.width);let d=0;for(let m=-this.radiusX;m<=this.radiusX;m++)d+=h[m&f.widthMask];let p=0;for(;p<f.width;){c[p]=d*l>>16;const m=d-h[p-this.radiusX&f.widthMask];p++,d=m+h[f.widthMask&p+this.radiusX]}o[a+this.radiusY-t]=c}for(let a=0;a<f.width;a++){let h=0;for(let c=0;c<e;c++)h+=o[c][a];n[a]=h*s>>16}}return n}}Rt.__class="TextureOpBoxBlur";class Bt extends C{constructor(){super(0,!0),this.anInt4937===void 0&&(this.anInt4937=0),this.anIntArrayArray41===void 0&&(this.anIntArrayArray41=null),this.anInt4948===void 0&&(this.anInt4948=0),this.anIntArray536===void 0&&(this.anIntArray536=null),this.anInt4949===void 0&&(this.anInt4949=0),this.anIntArrayArray42===void 0&&(this.anIntArrayArray42=null),this.anInt4935=81,this.anInt4943=4,this.anInt4944=0,this.anInt4942=1024,this.anInt4941=1024,this.anInt4945=409,this.anInt4954=204,this.anInt4936=8}method4057(){const t=new j(this.anInt4936);this.anInt4937=4096/this.anInt4936|0,this.anIntArray536=(s=>{let i=[];for(;s-- >0;)i.push(0);return i})(this.anInt4936+1),this.anIntArrayArray41=(function(s){let i=function(l){if(l.length===0)return 0;{let o=[];for(let a=0;a<l[0];a++)o.push(i(l.slice(1)));return o}};return i(s)})([this.anInt4936,this.anInt4943+1]),this.anIntArrayArray42=(function(s){let i=function(l){if(l.length===0)return 0;{let o=[];for(let a=0;a<l[0];a++)o.push(i(l.slice(1)));return o}};return i(s)})([this.anInt4936,this.anInt4943]),this.anIntArray536[0]=0,this.anInt4949=4096/this.anInt4943|0;const n=this.anInt4949/2|0;this.anInt4948=this.anInt4935/2|0;const e=this.anInt4937/2|0;for(let s=0;s<this.anInt4936;s++){if(s>0){let i=this.anInt4937;const l=(Y.nextInt(t,4096)-2048)*this.anInt4954>>12;i+=l*e>>12,this.anIntArray536[s]=i+this.anIntArray536[s-1]}this.anIntArrayArray41[s][0]=0;for(let i=0;i<this.anInt4943;i++){if(i>0){let l=this.anInt4949;const o=(Y.nextInt(t,4096)-2048)*this.anInt4945>>12;l+=n*o>>12,this.anIntArrayArray41[s][i]=this.anIntArrayArray41[s][i-1]+l}this.anIntArrayArray42[s][i]=this.anInt4941<=0?4096:4096-Y.nextInt(t,this.anInt4941)}this.anIntArrayArray41[s][this.anInt4943]=4096}this.anIntArray536[this.anInt4936]=4096}postDecode(){this.method4057()}decode(t,n){n===0?this.anInt4943=t.readUnsignedByte():n===1?this.anInt4936=t.readUnsignedByte():n===2?this.anInt4945=t.readUnsignedShort():n===3?this.anInt4954=t.readUnsignedShort():n===4?this.anInt4942=t.readUnsignedShort():n===5?this.anInt4944=t.readUnsignedShort():n===6?this.anInt4935=t.readUnsignedShort():n===7&&(this.anInt4941=t.readUnsignedShort())}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);if(this.monochromeImageCache.invalid){let e=0,s;for(s=this.anInt4944+f.normalisedY[t];s<0;s+=4096);for(;s>4096;)s-=4096;for(;this.anInt4936>e&&s>=this.anIntArray536[e];)e++;const i=e-1,l=this.anIntArray536[e],o=(e&1)===0;if(this.anIntArray536[e-1]+this.anInt4948<s&&s<l-this.anInt4948)for(let h=0;h<f.width;h++){const c=o?this.anInt4942:-this.anInt4942;let d=f.normalisedX[h]+(c*this.anInt4949>>12),p=0;for(;d<0;)d+=4096;for(;d>4096;)d-=4096;for(;p<this.anInt4943&&d>=this.anIntArrayArray41[i][p];)p++;const m=this.anIntArrayArray41[i][p],y=p-1;this.anIntArrayArray41[i][y]+this.anInt4948<d&&m-this.anInt4948>d?n[h]=this.anIntArrayArray42[i][y]:n[h]=0}else b.fill$int_A$int$int$int(n,0,f.width,0)}return n}}Bt.__class="TextureOpBricks";class Ot extends C{constructor(){super(1,!1),this.maxValue=409,this.redFactor=4096,this.blueFactor=4096,this.colorDelta=[0,0,0],this.greenFactor=4096}getColorOutput(t){const n=this.colorImageCache.get$int(t);if(this.colorImageCache.invalid){const e=this.getChildColorOutput(0,t),s=e[0],i=e[1],l=e[2],o=n[1],a=n[0],h=n[2];for(let c=0;c<f.width;c++){const d=s[c];let p=d-this.colorDelta[0];if(p<0&&(p=-p),p<=this.maxValue){const m=i[c];let y=m-this.colorDelta[1];if(y<0&&(y=-y),y<=this.maxValue){const u=l[c];let I=u-this.colorDelta[2];I<0&&(I=-I),I<=this.maxValue?(a[c]=d*this.redFactor>>12,o[c]=m*this.greenFactor>>12,h[c]=u*this.blueFactor>>12):(a[c]=d,o[c]=m,h[c]=u)}else a[c]=d,o[c]=m,h[c]=l[c]}else a[c]=d,o[c]=i[c],h[c]=l[c]}}return n}decode(t,n){if(n===0)this.maxValue=t.readUnsignedShort();else if(n===1)this.blueFactor=t.readUnsignedShort();else if(n===2)this.greenFactor=t.readUnsignedShort();else if(n===3)this.redFactor=t.readUnsignedShort();else if(n===4){const e=t.readUnsignedMedium();this.colorDelta[0]=(e&16711680)<<4,this.colorDelta[2]=e>>12&0,this.colorDelta[1]=e>>4&4080}}}Ot.__class="TextureOpBrightness";class Tt extends C{constructor(){super(1,!1),this.minValue=0,this.maxValue=4096}decode(t,n){n===0?this.minValue=t.readUnsignedShort():n===1?this.maxValue=t.readUnsignedShort():n===2&&(this.monochrome=t.readUnsignedByte()===1)}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);if(this.monochromeImageCache.invalid){const e=this.getChildMonochromeOutput(0,t);for(let s=0;s<f.width;s++){const i=e[s];i<this.minValue?n[s]=this.minValue:i>this.maxValue?n[s]=this.maxValue:n[s]=i}}return n}getColorOutput(t){const n=this.colorImageCache.get$int(t);if(this.colorImageCache.invalid){const e=this.getChildColorOutput(0,t),s=e[0],i=e[1],l=n[0],o=e[2],a=n[1],h=n[2];for(let c=0;c<f.width;c++){const d=i[c],p=s[c],m=o[c];p<this.minValue?l[c]=this.minValue:p>this.maxValue?l[c]=this.maxValue:l[c]=p,d<this.minValue?a[c]=this.minValue:d>this.maxValue?a[c]=this.maxValue:a[c]=d,m<this.minValue?h[c]=this.minValue:m>this.maxValue?h[c]=this.maxValue:h[c]=m}}return n}}Tt.__class="TextureOpClamp";class Et extends C{constructor(){super(1,!1),this.anInt3634=4096,this.aBoolean263=!0}decode(t,n){n===0?this.anInt3634=t.readUnsignedShort():n===1&&(this.aBoolean263=t.readUnsignedByte()===1)}getColorOutput(t){const n=this.colorImageCache.get$int(t);if(this.colorImageCache.invalid){const e=this.getChildMonochromeOutput(0,f.heightMask&t-1),s=this.getChildMonochromeOutput(0,t),i=this.getChildMonochromeOutput(0,t+1&f.heightMask),l=n[0],o=n[1],a=n[2];for(let h=0;h<f.width;h++){const c=(i[h]-e[h])*this.anInt3634,d=this.anInt3634*(s[h+1&f.widthMask]-s[h-1&f.widthMask]),p=c>>12,m=d>>12,y=p*p>>12,u=m*m>>12,I=Math.sqrt(Math.fround((y+u+4096)/4096))*4096|0;let w,$,x;I===0?($=0,x=0,w=0):($=c/I|0,x=16777216/I|0,w=d/I|0),this.aBoolean263&&(w=(w>>1)+2048,$=($>>1)+2048,x=(x>>1)+2048),l[h]=w,o[h]=$,a[h]=x}}return n}}Et.__class="TextureOpColorEdgeDetector";class jt extends C{constructor(t){if(typeof t=="number"||t===null)super(0,!1),this.blue===void 0&&(this.blue=0),this.green===void 0&&(this.green=0),this.red===void 0&&(this.red=0),this.setColor(t);else if(t===void 0){{let n=0;super(0,!1),this.blue===void 0&&(this.blue=0),this.green===void 0&&(this.green=0),this.red===void 0&&(this.red=0),this.setColor(n)}this.blue===void 0&&(this.blue=0),this.green===void 0&&(this.green=0),this.red===void 0&&(this.red=0)}else throw new Error("invalid overload")}decode(t,n){n===0&&this.setColor(t.readUnsignedMedium())}getColorOutput(t){const n=this.colorImageCache.get$int(t);if(this.colorImageCache.invalid){const e=n[1],s=n[0],i=n[2];for(let l=0;l<f.width;l++)s[l]=this.red,e[l]=this.green,i[l]=this.blue}return n}setColor(t){this.green=t>>4&4080,this.red=t>>12&4080,this.blue=(t&255)<<4}}jt.__class="TextureOpColorFill";class Ut extends C{constructor(){super(1,!1),this.samples===void 0&&(this.samples=null),this.colors=(t=>{let n=[];for(;t-- >0;)n.push(0);return n})(257)}setPreset(t){if(t!==0)if(t===1)this.samples=(function(n){let e=function(s){if(s.length===0)return 0;{let i=[];for(let l=0;l<s[0];l++)i.push(e(s.slice(1)));return i}};return e(n)})([2,4]),this.samples[0][0]=0,this.samples[0][3]=0,this.samples[0][1]=0,this.samples[1][0]=4096,this.samples[0][2]=0,this.samples[1][2]=4096,this.samples[1][1]=4096,this.samples[1][3]=4096;else if(t===2)this.samples=(function(n){let e=function(s){if(s.length===0)return 0;{let i=[];for(let l=0;l<s[0];l++)i.push(e(s.slice(1)));return i}};return e(n)})([8,4]),this.samples[0][0]=0,this.samples[0][1]=2650,this.samples[0][2]=2602,this.samples[1][0]=2867,this.samples[2][0]=3072,this.samples[1][2]=1799,this.samples[1][1]=2313,this.samples[2][2]=1734,this.samples[3][2]=1220,this.samples[4][2]=963,this.samples[0][3]=2361,this.samples[5][2]=2152,this.samples[3][0]=3276,this.samples[2][1]=2618,this.samples[6][2]=1060,this.samples[4][0]=3481,this.samples[1][3]=1558,this.samples[7][2]=1413,this.samples[5][0]=3686,this.samples[6][0]=3891,this.samples[7][0]=4096,this.samples[3][1]=2296,this.samples[2][3]=1413,this.samples[3][3]=947,this.samples[4][1]=2072,this.samples[5][1]=2730,this.samples[6][1]=2232,this.samples[7][1]=1686,this.samples[4][3]=722,this.samples[5][3]=1766,this.samples[6][3]=915,this.samples[7][3]=1140;else if(t===3)this.samples=(function(n){let e=function(s){if(s.length===0)return 0;{let i=[];for(let l=0;l<s[0];l++)i.push(e(s.slice(1)));return i}};return e(n)})([7,4]),this.samples[0][3]=4096,this.samples[0][2]=0,this.samples[1][3]=4096,this.samples[2][3]=0,this.samples[0][0]=0,this.samples[3][3]=0,this.samples[4][3]=0,this.samples[1][2]=4096,this.samples[2][2]=4096,this.samples[5][3]=4096,this.samples[3][2]=4096,this.samples[0][1]=0,this.samples[1][0]=663,this.samples[1][1]=0,this.samples[6][3]=4096,this.samples[2][1]=0,this.samples[4][2]=0,this.samples[5][2]=0,this.samples[2][0]=1363,this.samples[3][0]=2048,this.samples[3][1]=4096,this.samples[4][0]=2727,this.samples[6][2]=0,this.samples[4][1]=4096,this.samples[5][0]=3411,this.samples[6][0]=4096,this.samples[5][1]=4096,this.samples[6][1]=0;else if(t===4)this.samples=(function(n){let e=function(s){if(s.length===0)return 0;{let i=[];for(let l=0;l<s[0];l++)i.push(e(s.slice(1)));return i}};return e(n)})([6,4]),this.samples[0][0]=0,this.samples[0][1]=0,this.samples[0][2]=0,this.samples[1][2]=0,this.samples[0][3]=0,this.samples[1][0]=1843,this.samples[1][1]=0,this.samples[2][0]=2457,this.samples[1][3]=1493,this.samples[2][1]=0,this.samples[3][1]=0,this.samples[2][2]=0,this.samples[3][2]=1124,this.samples[3][0]=2781,this.samples[2][3]=2939,this.samples[3][3]=3565,this.samples[4][0]=3481,this.samples[5][0]=4096,this.samples[4][3]=4031,this.samples[4][2]=3084,this.samples[4][1]=546,this.samples[5][2]=4096,this.samples[5][3]=4096,this.samples[5][1]=4096;else if(t===5)this.samples=(function(n){let e=function(s){if(s.length===0)return 0;{let i=[];for(let l=0;l<s[0];l++)i.push(e(s.slice(1)));return i}};return e(n)})([16,4]),this.samples[0][2]=192,this.samples[0][1]=80,this.samples[0][3]=321,this.samples[0][0]=0,this.samples[1][2]=449,this.samples[1][1]=321,this.samples[2][1]=578,this.samples[1][3]=562,this.samples[2][2]=690,this.samples[2][3]=803,this.samples[3][3]=1140,this.samples[3][1]=947,this.samples[3][2]=995,this.samples[1][0]=155,this.samples[2][0]=389,this.samples[3][0]=671,this.samples[4][2]=1397,this.samples[5][2]=1429,this.samples[4][0]=897,this.samples[4][3]=1509,this.samples[6][2]=1461,this.samples[5][3]=1413,this.samples[4][1]=1285,this.samples[6][3]=1333,this.samples[5][0]=1175,this.samples[7][3]=1702,this.samples[8][3]=2056,this.samples[6][0]=1368,this.samples[9][3]=2666,this.samples[10][3]=3276,this.samples[5][1]=1525,this.samples[7][0]=1507,this.samples[7][2]=1525,this.samples[6][1]=1734,this.samples[11][3]=3228,this.samples[8][0]=1736,this.samples[9][0]=2088,this.samples[7][1]=1413,this.samples[8][2]=1590,this.samples[9][2]=2056,this.samples[8][1]=1108,this.samples[10][0]=2355,this.samples[9][1]=1766,this.samples[11][0]=2691,this.samples[10][1]=2409,this.samples[12][0]=3031,this.samples[13][0]=3522,this.samples[10][2]=2586,this.samples[11][1]=3116,this.samples[11][2]=3148,this.samples[12][3]=3196,this.samples[14][0]=3727,this.samples[15][0]=4096,this.samples[12][2]=3710,this.samples[13][3]=3019,this.samples[13][2]=3421,this.samples[12][1]=3806,this.samples[14][3]=3228,this.samples[15][3]=2746,this.samples[13][1]=3437,this.samples[14][1]=3116,this.samples[15][1]=2377,this.samples[14][2]=3148,this.samples[15][2]=2505;else if(t===6)this.samples=(function(n){let e=function(s){if(s.length===0)return 0;{let i=[];for(let l=0;l<s[0];l++)i.push(e(s.slice(1)));return i}};return e(n)})([4,4]),this.samples[0][3]=0,this.samples[0][1]=0,this.samples[1][3]=0,this.samples[0][2]=4096,this.samples[1][2]=4096,this.samples[2][3]=0,this.samples[2][2]=4096,this.samples[0][0]=2048,this.samples[3][3]=0,this.samples[1][1]=4096,this.samples[3][2]=0,this.samples[1][0]=2867,this.samples[2][1]=4096,this.samples[3][1]=4096,this.samples[2][0]=3276,this.samples[3][0]=4096;else throw Object.defineProperty(new Error("Invalid gradient preset"),"__classes",{configurable:!0,value:["java.lang.Throwable","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]})}interpolate(){const t=this.samples.length;if(!(t<=0))for(let n=0;n<257;n++){let e=0;const s=n<<4;for(let d=0;d<t&&s>=this.samples[d][0];d++)e++;let i,l,o;if(e>=t){const d=this.samples[t-1];o=d[3],i=d[1],l=d[2]}else{const d=this.samples[e];if(e<=0)l=d[2],i=d[1],o=d[3];else{const p=this.samples[e-1],m=(s-p[0]<<12)/(d[0]-p[0])|0,y=4096-m;l=d[2]*m+p[2]*y>>12,i=d[1]*m+p[1]*y>>12,o=d[3]*m+p[3]*y>>12}}let a=l>>4;a<0?a=0:a>255&&(a=255);let h=o>>4,c=i>>4;c<0?c=0:c>255&&(c=255),h<0?h=0:h>255&&(h=255),this.colors[n]=h|a<<8|c<<16}}postDecode(){this.samples==null&&this.setPreset(1),this.interpolate()}decode(t,n){if(n!==0)return;const e=t.readUnsignedByte();if(e!==0){this.setPreset(e);return}this.samples=(function(s){let i=function(l){if(l.length===0)return 0;{let o=[];for(let a=0;a<l[0];a++)o.push(i(l.slice(1)));return o}};return i(s)})([t.readUnsignedByte(),4]);for(let s=0;s<this.samples.length;s++)this.samples[s][0]=t.readUnsignedShort(),this.samples[s][1]=t.readUnsignedByte()<<4,this.samples[s][2]=t.readUnsignedByte()<<4,this.samples[s][3]=t.readUnsignedByte()<<4}getColorOutput(t){const n=this.colorImageCache.get$int(t);if(this.colorImageCache.invalid){const e=this.getChildMonochromeOutput(0,t),s=n[1],i=n[2],l=n[0];for(let o=0;o<f.width;o++){let a=e[o]>>4;a<0&&(a=0),a>256&&(a=256);const h=this.colors[a];l[o]=h>>12&4080,s[o]=h>>4&4080,i[o]=(h&255)<<4}}return n}}Ut.__class="TextureOpColorGradient";class vt extends C{constructor(){super(1,!1),this.green=4096,this.red=4096,this.blue=4096}decode(t,n){n===0?this.red=t.readUnsignedShort():n===1?this.green=t.readUnsignedShort():n===2&&(this.blue=t.readUnsignedShort())}getColorOutput(t){const n=this.colorImageCache.get$int(t);if(this.colorImageCache.invalid){const e=this.getChildColorOutput(0,t),s=e[1],i=e[0],l=n[0],o=n[1],a=e[2],h=n[2];for(let c=0;c<f.width;c++){const d=i[c],p=a[c],m=s[c];d===p&&p===m?(l[c]=this.red*d>>12,o[c]=this.green*p>>12,h[c]=this.blue*m>>12):(l[c]=this.red,o[c]=this.green,h[c]=this.blue)}}return n}}vt.__class="TextureOpColorize";class Lt extends C{constructor(){super(2,!1),this.function=6}decode(t,n){n===0?this.function=t.readUnsignedByte():n===1&&(this.monochrome=t.readUnsignedByte()===1)}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);if(this.monochromeImageCache.invalid){const e=this.getChildMonochromeOutput(0,t),s=this.getChildMonochromeOutput(1,t),i=this.function;if(i===1)for(let l=0;l<f.width;l++)n[l]=s[l]+e[l];else if(i===2)for(let l=0;l<f.width;l++)n[l]=e[l]-s[l];else if(i===3)for(let l=0;l<f.width;l++)n[l]=e[l]*s[l]>>12;else if(i===4)for(let l=0;l<f.width;l++){const o=s[l];n[l]=o===0?4096:(e[l]<<12)/o|0}else if(i===5)for(let l=0;l<f.width;l++)n[l]=4096-((4096-e[l])*(4096-s[l])>>12);else if(i===6)for(let l=0;l<f.width;l++){const o=s[l];n[l]=o>=2048?4096-((4096-o)*(4096-e[l])>>11):o*e[l]>>11}else if(i===7)for(let l=0;l<f.width;l++){const o=e[l];n[l]=o===4096?4096:(s[l]<<12)/(4096-o)|0}else if(i===8)for(let l=0;l<f.width;l++){const o=e[l];n[l]=o===0?0:4096-((4096-s[l]<<12)/o|0)}else if(i===9)for(let l=0;l<f.width;l++){const o=e[l],a=s[l];n[l]=o<a?o:a}else if(i===10)for(let l=0;l<f.width;l++){const o=e[l],a=s[l];n[l]=o<=a?a:o}else if(i===11)for(let l=0;l<f.width;l++){const o=s[l],a=e[l];n[l]=a>o?a-o:o-a}else if(i===12)for(let l=0;l<f.width;l++){const o=e[l],a=s[l];n[l]=o+a-(o*a>>11)}}return n}getColorOutput(t){const n=this.colorImageCache.get$int(t);if(this.colorImageCache.invalid){const e=this.getChildColorOutput(0,t),s=this.getChildColorOutput(1,t),i=n[0],l=n[1],o=e[0],a=n[2],h=e[1],c=s[2],d=e[2],p=s[1],m=s[0],y=this.function;if(y===1)for(let u=0;u<f.width;u++)i[u]=o[u]+m[u],l[u]=h[u]+p[u],a[u]=d[u]+c[u];else if(y===2)for(let u=0;u<f.width;u++)i[u]=o[u]-m[u],l[u]=h[u]-p[u],a[u]=d[u]-c[u];else if(y===3)for(let u=0;u<f.width;u++)i[u]=o[u]*m[u]>>12,l[u]=p[u]*h[u]>>12,a[u]=c[u]*d[u]>>12;else if(y===4)for(let u=0;u<f.width;u++){const I=p[u],w=m[u],$=c[u];i[u]=w===0?4096:(o[u]<<12)/w|0,l[u]=I===0?4096:(h[u]<<12)/I|0,a[u]=$===0?4096:(d[u]<<12)/$|0}else if(y===5)for(let u=0;u<f.width;u++)i[u]=4096-((4096-o[u])*(4096-m[u])>>12),l[u]=4096-((4096-h[u])*(4096-p[u])>>12),a[u]=4096-((4096-d[u])*(4096-c[u])>>12);else if(y===6)for(let u=0;u<f.width;u++){const I=p[u],w=m[u],$=c[u];i[u]=w>=2048?4096-((4096-o[u])*(4096-w)>>11):w*o[u]>>11,l[u]=I>=2048?4096-((4096-h[u])*(4096-I)>>11):h[u]*I>>11,a[u]=$>=2048?4096-((4096-d[u])*(4096-$)>>11):d[u]*$>>11}else if(y===7)for(let u=0;u<f.width;u++){const I=d[u],w=h[u],$=o[u];i[u]=$===4096?4096:(m[u]<<12)/(4096-$)|0,l[u]=w===4096?4096:(p[u]<<12)/(4096-w)|0,a[u]=I===4096?4096:(c[u]<<12)/(4096-I)|0}else if(y===8)for(let u=0;u<f.width;u++){const I=h[u],w=d[u],$=o[u];i[u]=$===0?0:4096-((4096-m[u]<<12)/$|0),l[u]=I===0?0:4096-((4096-p[u]<<12)/I|0),a[u]=w===0?0:4096-((4096-c[u]<<12)/w|0)}else if(y===9)for(let u=0;u<f.width;u++){const I=d[u],w=c[u],$=p[u],x=m[u],_=o[u],O=h[u];i[u]=_<x?_:x,l[u]=O<$?O:$,a[u]=I<w?I:w}else if(y===10)for(let u=0;u<f.width;u++){const I=o[u],w=d[u],$=c[u],x=m[u],_=p[u],O=h[u];i[u]=I>x?I:x,l[u]=O>_?O:_,a[u]=w>$?w:$}else if(y===11)for(let u=0;u<f.width;u++){const I=m[u],w=p[u],$=d[u],x=c[u],_=o[u],O=h[u];i[u]=_<=I?I-_:_-I,l[u]=O<=w?w-O:O-w,a[u]=$<=x?x-$:$-x}else if(y===12)for(let u=0;u<f.width;u++){const I=h[u],w=d[u],$=m[u],x=c[u],_=o[u],O=p[u];i[u]=$+_-(_*$>>11),l[u]=I+O-(I*O>>11),a[u]=w+x-(w*x>>11)}}return n}}Lt.__class="TextureOpCombine";class gt extends C{constructor(){super(1,!0),this.markers===void 0&&(this.markers=null),this.firstMarker===void 0&&(this.firstMarker=null),this.lastMarker===void 0&&(this.lastMarker=null),this.aShortArray73=(t=>{let n=[];for(;t-- >0;)n.push(0);return n})(257),this.anInt3819=0}getMarker(t){return t<0?this.firstMarker:t<this.markers.length?this.markers[t]:this.lastMarker}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);if(this.monochromeImageCache.invalid){const e=this.getChildMonochromeOutput(0,t);for(let s=0;s<f.width;s++){let i=e[s]>>4;i<0&&(i=0),i>256&&(i=256),n[s]=this.aShortArray73[i]}}return n}method3182(){const t=this.anInt3819;if(t===2)for(let n=0;n<257;n++){const e=n<<4;let s;for(s=1;s<this.markers.length-1&&e>=this.markers[s][0];s++);const i=this.markers[s],l=this.markers[s-1],o=this.getMarker(s-2)[1],a=i[1],h=l[1],c=a-o,d=this.getMarker(s+1)[1],p=(e-l[0]<<12)/(i[0]-l[0])|0,m=d+h-o-a,y=o-h-m,u=p*p>>12,I=p*c>>12,w=(p*m>>12)*u>>12,$=u*y>>12;let x=w+$+I+h;x<=-32768&&(x=-32767),x>=32768&&(x=32767),this.aShortArray73[n]=x|0}else if(t===1)for(let n=0;n<257;n++){const e=n<<4;let s;for(s=1;this.markers.length-1>s&&this.markers[s][0]<=e;s++);const i=this.markers[s-1],l=this.markers[s],o=(e-i[0]<<12)/(l[0]-i[0])|0,a=4096-C.COSINE[o>>5&255]>>1,h=4096-a;let c=a*l[1]+h*i[1]>>12;c<=-32768&&(c=-32767),c>=32768&&(c=32767),this.aShortArray73[n]=c|0}else for(let n=0;n<257;n++){const e=n<<4;let s;for(s=1;this.markers.length-1>s&&e>=this.markers[s][0];s++);const i=this.markers[s-1],l=this.markers[s],o=(e-i[0]<<12)/(l[0]-i[0])|0,a=4096-o;let h=l[1]*o+a*i[1]>>12;h<=-32768&&(h=-32767),h>=32768&&(h=32767),this.aShortArray73[n]=h|0}}method3183(){const t=this.markers[0],n=this.markers[1],e=this.markers[this.markers.length-1],s=this.markers[this.markers.length-2];this.lastMarker=[s[0]+s[0]-e[0],s[1]+s[1]-e[1]],this.firstMarker=[t[0]+t[0]-n[0],t[1]+t[1]-n[1]]}postDecode(){if(this.markers==null&&(this.markers=[[0,0],[4096,4096]]),this.markers.length<2)throw Object.defineProperty(new Error("Curve operation requires at least two markers"),"__classes",{configurable:!0,value:["java.lang.Throwable","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]});this.anInt3819===2&&this.method3183(),C.createTrigonometryTables(),this.method3182()}decode(t,n){if(n===0){this.anInt3819=t.readUnsignedByte(),this.markers=(function(e){let s=function(i){if(i.length===0)return 0;{let l=[];for(let o=0;o<i[0];o++)l.push(s(i.slice(1)));return l}};return s(e)})([t.readUnsignedByte(),2]);for(let e=0;e<this.markers.length;e++)this.markers[e][0]=t.readUnsignedShort(),this.markers[e][1]=t.readUnsignedShort()}}}gt.__class="TextureOpCurve";class zt extends C{constructor(){super(1,!0),this.azimuth=3216,this.elevation=3216,this.depth=4096,this.anIntArray57=[0,0,0]}decode(t,n){n===0?this.depth=t.readUnsignedShort():n===1?this.azimuth=t.readUnsignedShort():n===2&&(this.elevation=t.readUnsignedShort())}postDecode(){this.method642()}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);if(this.monochromeImageCache.invalid){const e=f.widthTimes32*this.depth>>12,s=this.getChildMonochromeOutput(0,t-1&f.heightMask),i=this.getChildMonochromeOutput(0,t),l=this.getChildMonochromeOutput(0,f.heightMask&t+1);for(let o=0;o<f.width;o++){const a=e*(i[f.widthMask&o-1]-i[f.widthMask&o+1])>>12;let h=a>>4;const c=(l[o]-s[o])*e>>12;h<0&&(h=-h);let d=c>>4;d<0&&(d=-d),d>255&&(d=255),h>255&&(h=255);const p=J.INVERSE_SQUARE_ROOT_$LI$()[h+((d+1)*d>>1)]&255;let m=a*p>>8,y=p*c>>8;m=this.anIntArray57[0]*m>>12;let u=p*4096>>8;y=this.anIntArray57[1]*y>>12,u=this.anIntArray57[2]*u>>12,n[o]=u+y+m}}return n}method642(){const t=Math.cos(Math.fround(this.elevation/4096));this.anIntArray57[0]=Math.sin(Math.fround(this.azimuth/4096))*4096*t|0,this.anIntArray57[1]=Math.cos(Math.fround(this.azimuth/4096))*t*4096|0,this.anIntArray57[2]=Math.sin(Math.fround(this.elevation/4096))*4096|0;const n=this.anIntArray57[0]*this.anIntArray57[0]>>12,e=this.anIntArray57[2]*this.anIntArray57[2]>>12,s=this.anIntArray57[1]*this.anIntArray57[1]>>12,i=Math.sqrt(e+n+s>>12)*4096|0;i!==0&&(this.anIntArray57[0]=(this.anIntArray57[0]<<12)/i|0,this.anIntArray57[2]=(this.anIntArray57[2]<<12)/i|0,this.anIntArray57[1]=(this.anIntArray57[1]<<12)/i|0)}}zt.__class="TextureOpEmboss";class Dt extends C{constructor(){super(1,!1),this.flipVertical=!0,this.flipHorizontal=!0}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);if(this.monochromeImageCache.invalid){const e=this.getChildMonochromeOutput(0,this.flipVertical?f.heightMask-t:t);if(this.flipHorizontal)for(let s=0;s<f.width;s++)n[s]=e[f.widthMask-s];else b.copy$int_A$int$int_A$int$int(e,0,n,0,f.width)}return n}decode(t,n){n===0?this.flipHorizontal=t.readUnsignedByte()===1:n===1?this.flipVertical=t.readUnsignedByte()===1:n===2&&(this.monochrome=t.readUnsignedByte()===1)}getColorOutput(t){const n=this.colorImageCache.get$int(t);if(this.colorImageCache.invalid){const e=this.getChildColorOutput(0,this.flipVertical?f.heightMask-t:t),s=e[0],i=e[1],l=n[0],o=e[2],a=n[1],h=n[2];if(this.flipHorizontal)for(let c=0;c<f.width;c++)l[c]=s[f.widthMask-c],a[c]=i[f.widthMask-c],h[c]=o[f.widthMask-c];else for(let c=0;c<f.width;c++)l[c]=s[c],a[c]=i[c],h[c]=o[c]}return n}}Dt.__class="TextureOpFlip";class Nt extends C{constructor(){super(0,!0),this.scaleX=1,this.ratio=204,this.scaleY=1}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);if(this.monochromeImageCache.invalid)for(let e=0;e<f.width;e++){const s=f.normalisedX[e];let i=s*this.scaleX>>12;const l=f.normalisedY[t],o=l*this.scaleY>>12,a=this.scaleX*(s%(4096/this.scaleX|0));if(l%(4096/this.scaleY|0)*this.scaleY<this.ratio){for(i-=o;i<0;i+=4);for(;i>3;)i-=4;if(i!==1){n[e]=0;continue}if(a<this.ratio){n[e]=0;continue}}if(a<this.ratio){let c;for(c=i-o;c<0;c+=4);for(;c>3;)c-=4;if(c>0){n[e]=0;continue}}n[e]=4096}return n}decode(t,n){n===0?this.scaleX=t.readUnsignedByte():n===1?this.scaleY=t.readUnsignedByte():n===2&&(this.ratio=t.readUnsignedShort())}}Nt.__class="TextureOpHerringbone";class Xt extends C{constructor(){super(0,!0)}getMonochromeOutput(t){return f.normalisedX}}Xt.__class="TextureOpHorizontalGradient";class kt extends C{constructor(){super(1,!1),this.red===void 0&&(this.red=0),this.green===void 0&&(this.green=0),this.hue===void 0&&(this.hue=0),this.lightness===void 0&&(this.lightness=0),this.saturation===void 0&&(this.saturation=0),this.blue===void 0&&(this.blue=0),this.lightnessDelta=0,this.hueDelta=0,this.saturationDelta=0}hslToRgb(t,n,e){const s=e>2048?n+e-(e*n>>12):e*(n+4096)>>12;if(s<=0){this.red=this.green=this.blue=e;return}const i=e+e-s,l=(s-i<<12)/s|0;t*=6;const o=t>>12,a=t-(o<<12);let h=l*s>>12;h=h*a>>12;const c=s-h,d=i+h;o===0?(this.green=d,this.red=s,this.blue=i):o===1?(this.green=s,this.red=c,this.blue=i):o===2?(this.red=i,this.green=s,this.blue=d):o===3?(this.red=i,this.green=c,this.blue=s):o===4?(this.red=d,this.green=i,this.blue=s):o===5&&(this.green=i,this.red=s,this.blue=c)}decode(t,n){n===0?this.hueDelta=t.readShort():n===1?this.saturationDelta=(t.readByte()<<12)/100|0:n===2&&(this.lightnessDelta=(t.readByte()<<12)/100|0)}rgbToHsl(t,n,e){let s=t>n?t:n;s=e>s?e:s;let i=t<n?t:n;i=e<i?e:i,this.lightness=(s+i)/2|0;const l=s-i;if(l<=0)this.hue=0;else{const o=(s-e<<12)/l|0,a=(s-t<<12)/l|0,h=(s-n<<12)/l|0;s===t?this.hue=i===n?o+20480:4096-h:s===n?this.hue=i===e?a+4096:12288-o:this.hue=i===t?h+12288:20480-a,this.hue=(c=>c<0?Math.ceil(c):Math.floor(c))(this.hue/6)}this.lightness>0&&this.lightness<4096?this.saturation=(l<<12)/(this.lightness<=2048?this.lightness*2:8192-this.lightness*2)|0:this.saturation=0}getColorOutput(t){const n=this.colorImageCache.get$int(t);if(this.colorImageCache.invalid){const e=this.getChildColorOutput(0,t),s=e[0],i=e[1],l=n[0],o=e[2],a=n[1],h=n[2];for(let c=0;c<f.width;c++){for(this.rgbToHsl(s[c],i[c],o[c]),this.lightness+=this.lightnessDelta,this.saturation+=this.saturationDelta,this.saturation<0&&(this.saturation=0),this.hue+=this.hueDelta,this.saturation>4096&&(this.saturation=4096);this.hue<0;)this.hue+=4096;for(this.lightness<0&&(this.lightness=0),this.lightness>4096&&(this.lightness=4096);this.hue>4096;)this.hue-=4096;this.hslToRgb(this.hue,this.saturation,this.lightness),l[c]=this.red,a[c]=this.green,h[c]=this.blue}}return n}}kt.__class="TextureOpHslAdjust";class Gt extends C{constructor(){super(3,!1)}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);if(this.monochromeImageCache.invalid){const e=this.getChildMonochromeOutput(0,t),s=this.getChildMonochromeOutput(1,t),i=this.getChildMonochromeOutput(2,t);for(let l=0;l<f.width;l++){const o=i[l];o===4096?n[l]=e[l]:o===0?n[l]=s[l]:n[l]=o*e[l]+s[l]*(4096-o)>>12}}return n}decode(t,n){n===0&&(this.monochrome=t.readUnsignedByte()===1)}getColorOutput(t){const n=this.colorImageCache.get$int(t);if(this.colorImageCache.invalid){const e=this.getChildMonochromeOutput(2,t),s=this.getChildColorOutput(0,t),i=this.getChildColorOutput(1,t),l=n[0],o=n[1],a=n[2],h=s[1],c=s[0],d=i[1],p=i[0],m=s[2],y=i[2];for(let u=0;u<f.width;u++){const I=e[u];if(I===4096)l[u]=c[u],o[u]=h[u],a[u]=m[u];else if(I===0)l[u]=p[u],o[u]=d[u],a[u]=y[u];else{const w=4096-I;l[u]=p[u]*w+c[u]*I>>12,o[u]=d[u]*w+I*h[u]>>12,a[u]=m[u]*I+w*y[u]>>12}}}return n}}Gt.__class="TextureOpInterpolate";class Vt extends C{constructor(){super(1,!1)}decode(t,n){n===0&&(this.monochrome=t.readUnsignedByte()===1)}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);if(this.monochromeImageCache.invalid){const e=this.getChildMonochromeOutput(0,t);for(let s=0;s<f.width;s++)n[s]=4096-e[s]}return n}getColorOutput(t){const n=this.colorImageCache.get$int(t);if(this.colorImageCache.invalid){const e=this.getChildColorOutput(0,t),s=e[0],i=e[2],l=n[0],o=e[1],a=n[1],h=n[2];for(let c=0;c<f.width;c++)l[c]=4096-s[c],a[c]=4096-o[c],h[c]=4096-i[c]}return n}}Vt.__class="TextureOpInvert";class Ft extends C{constructor(){super(0,!0),this.anInt79===void 0&&(this.anInt79=0),this.anInt72=409,this.anInt81=1024,this.anInt77=1024,this.anInt82=819,this.anInt76=0,this.anInt75=1024,this.anInt84=1024,this.seed=0,this.anInt87=2048}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);if(!this.monochromeImageCache.invalid)return n;let e=0;const s=this.monochromeImageCache.get$();let i=0,l=0,o=0,a=0,h=!0,c=0,d=!0;const p=this.anInt84*f.width>>12;let m=0;const y=this.anInt72*f.height>>12,u=f.width*this.anInt87>>12,I=this.anInt82*f.height>>12;if(I<=1)return s[t];this.anInt79=(f.width/8|0)*this.anInt81>>12;const w=(f.width/p|0)+1,$=new j(this.seed);let x=(function(O){let T=function(B){if(B.length===0)return 0;{let A=[];for(let E=0;E<B[0];E++)A.push(T(B.slice(1)));return A}};return T(O)})([w,3]),_=(function(O){let T=function(B){if(B.length===0)return 0;{let A=[];for(let E=0;E<B[0];E++)A.push(T(B.slice(1)));return A}};return T(O)})([w,3]);for(;;)for(;;){let O=p+Y.nextInt($,u-p),T=Y.nextInt($,I-y)+y,B=l+O;B>f.width&&(O=f.width-l,B=f.width);let A;if(h)A=0;else{let E=a;A=_[a][2];let N=0,g=e+B;for(g<0&&(g+=f.width),f.width<g&&(g-=f.width);;){const V=_[E];if(V[0]<=g&&g<=V[1]){if(E!==a){let G=l+e;G<0&&(G+=f.width),G>f.width&&(G-=f.width);for(let X=1;X<=N;X++){const W=_[(X+a)%c];A=Math.max(A,W[2])}for(let X=0;X<=N;X++){const W=_[(X+a)%c],Q=W[2];if(Q!==A){const P=W[1],at=W[0];let K,M;G<g?(K=Math.max(G,at),M=Math.min(g,P)):at===0?(M=Math.min(g,P),K=0):(K=Math.max(G,at),M=f.width),this.method69(A-Q,M-K,o+K,Q,$,s)}}}a=E;break}E++,E>=c&&(E=0),N++}}if(f.height<T+A?T=f.height-A:d=!1,B===f.width){if(this.method69(T,O,l+i,A,$,s),d)return n;h=!1;const E=m+1,D=x[m];d=!0,D[1]=B,o=i,c=E,D[0]=l,D[2]=T+A,i=Y.nextInt($,f.width);const N=_;a=0,e=i-o,_=x;let g=e;for(x=N,e<0&&(g=e+f.width),m=0,f.width<g&&(g-=f.width);;){const V=_[a];if(g>=V[0]&&V[1]>=g){l=0;break}a++,c<=a&&(a=0)}}else{const E=x[m++];E[1]=B,E[2]=T+A,E[0]=l,this.method69(T,O,i+l,A,$,s),l=B}}}postDecode(){}method69(t,n,e,s,i,l){const o=this.anInt77>0?4096-Y.nextInt(i,this.anInt77):4096,a=this.anInt79*this.anInt75>>12,h=this.anInt79-(a>0?Y.nextInt(i,a):0);if(f.width<=e&&(e-=f.width),h>0){if(t<=0||n<=0)return;const c=n/2|0,d=t/2|0,p=c>=h?h:c,m=h>d?d:h,y=e+p,u=n-p*2;for(let I=0;I<t;I++){const w=l[I+s];if(m<=I){const $=t-I-1;if(m<=$){for(let x=0;x<p;x++)w[f.widthMask&e+x]=w[f.widthMask&n+e-x-1]=o*x/p|0;if(y+u<=f.width)b.fill$int_A$int$int$int(w,y,u,o);else{const x=f.width-y;b.fill$int_A$int$int$int(w,y,x,o),b.fill$int_A$int$int$int(w,0,u-x,o)}}else{const x=$*o/m|0;if(this.anInt76===0)for(let _=0;_<p;_++){const O=_*o/p|0;w[f.widthMask&e+_]=w[n+e-_-1&f.widthMask]=x*O>>12}else for(let _=0;_<p;_++){const O=o*_/p|0;w[f.widthMask&_+e]=w[f.widthMask&e+n-_-1]=x>O?O:x}if(f.width<u+y){const _=f.width-y;b.fill$int_A$int$int$int(w,y,_,x),b.fill$int_A$int$int$int(w,0,u-_,x)}else b.fill$int_A$int$int$int(w,y,u,x)}}else{const $=I*o/m|0;if(this.anInt76===0)for(let x=0;x<p;x++){const _=o*x/p|0;w[f.widthMask&x+e]=w[e+n-x-1&f.widthMask]=_*$>>12}else for(let x=0;x<p;x++){const _=o*x/p|0;w[x+e&f.widthMask]=w[n+e-x-1&f.widthMask]=$<=_?$:_}if(y+u>f.width){const x=f.width-y;b.fill$int_A$int$int$int(w,y,x,$),b.fill$int_A$int$int$int(w,0,u-x,$)}else b.fill$int_A$int$int$int(w,y,u,$)}}}else if(f.width>=n+e)for(let c=0;c<t;c++)b.fill$int_A$int$int$int(l[c+s],e,n,o);else{const c=f.width-e;for(let d=0;d<t;d++){const p=l[d+s];b.fill$int_A$int$int$int(p,e,c,o),b.fill$int_A$int$int$int(p,0,n-c,o)}}}decode(t,n){n===0?this.seed=t.readUnsignedByte():n===1?this.anInt84=t.readUnsignedShort():n===2?this.anInt87=t.readUnsignedShort():n===3?this.anInt72=t.readUnsignedShort():n===4?this.anInt82=t.readUnsignedShort():n===5?this.anInt81=t.readUnsignedShort():n===6?this.anInt76=t.readUnsignedByte():n===7?this.anInt75=t.readUnsignedShort():n===8&&(this.anInt77=t.readUnsignedShort())}}Ft.__class="TextureOpIrregularBricks";class z extends C{constructor(){super(1,!1)}getColorOutput(t){const n=this.colorImageCache.get$int(t);if(this.colorImageCache.invalid){const e=n[0],s=n[1],i=n[2];for(let l=0;l<f.width;l++){this.method4301(l,t);const o=this.getChildColorOutput(0,z.y0);e[l]=o[0][z.x0],s[l]=o[1][z.x0],i[l]=o[2][z.x0]}}return n}decode(t,n){n===0&&(this.monochrome=t.readUnsignedByte()===1)}method4301(t,n){const e=f.normalisedX[t],s=f.normalisedY[n],i=Math.fround(Math.atan2(e-2048,s-2048));i>=-3.141592653589793&&i<=-2.356194490192345?(z.x0=t,z.y0=n):i<=-1.5707963267948966&&i>=-2.356194490192345?(z.y0=t,z.x0=n):i<=-.7853981633974483&&i>=-1.5707963267948966?(z.x0=f.width-n,z.y0=t):i<=0&&i>=-.7853981633974483?(z.y0=f.height-n,z.x0=t):i>=0&&i<=.7853981633974483?(z.x0=f.width-t,z.y0=f.height-n):i>=.7853981633974483&&i<=1.5707963267948966?(z.x0=f.width-n,z.y0=f.height-t):i>=1.5707963267948966&&i<=2.356194490192345?(z.x0=n,z.y0=f.height-t):i>=2.356194490192345&&i<=3.141592653589793&&(z.y0=n,z.x0=f.width-t),z.x0&=f.widthMask,z.y0&=f.heightMask}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);if(this.monochromeImageCache.invalid)for(let e=0;e<f.width;e++){this.method4301(e,t);const s=this.getChildMonochromeOutput(0,z.y0);n[e]=s[z.x0]}return n}}z.y0=0,z.x0=0,z.__class="TextureOpKaleidoscope";class qt extends C{constructor(){super(0,!0),this.seed=0,this.minAngle=0,this.count=2e3,this.maxAngle=4096,this.length=16}postDecode(){C.createTrigonometryTables()}decode(t,n){n===0?this.seed=t.readUnsignedByte():n===1?this.count=t.readUnsignedShort():n===2?this.length=t.readUnsignedByte():n===3?this.minAngle=t.readUnsignedShort():n===4&&(this.maxAngle=t.readUnsignedShort())}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);if(this.monochromeImageCache.invalid){const e=this.maxAngle>>1,s=this.monochromeImageCache.get$(),i=new j(this.seed);for(let l=0;l<this.count;l++){let o=this.maxAngle>0?this.minAngle+Y.nextInt(i,this.maxAngle)-e:this.minAngle;o=o>>4&255;let a=Y.nextInt(i,f.width),h=Y.nextInt(i,f.height),c=a+(C.COSINE[o]*this.length>>12),d=h+(C.SINE[o]*this.length>>12),p=d-h,m=c-a;if(m!==0||p!==0){p<0&&(p=-p),m<0&&(m=-m);const y=p>m;if(y){const T=c,B=a;a=h,c=d,h=B,d=T}if(a>c){const T=a;a=c;const B=h;c=T,h=d,d=B}let u=h;const I=c-a;let w=-I/2|0,$=d-h;const x=1024-(Y.nextInt(i,4096)>>2);$<0&&($=-$);const _=2048/I|0,O=d<=h?-1:1;for(let T=a;T<c;T++){w+=$;const B=x+(T-a)*_+1024,A=u&f.heightMask,E=f.widthMask&T;w>0&&(w+=-I,u+=O),y?s[A][E]=B:s[E][A]=B}}}}return n}}qt.__class="TextureOpLineNoise";class Pt extends C{constructor(){super(0,!0),this.anInt1159=20,this.anInt1157=0,this.anInt1160=1365,this.anInt1164=0}decode(t,n){n===0?this.anInt1160=t.readUnsignedShort():n===1?this.anInt1159=t.readUnsignedShort():n===2?this.anInt1164=t.readUnsignedShort():n===3&&(this.anInt1157=t.readUnsignedShort())}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);if(this.monochromeImageCache.invalid)for(let e=0;e<f.width;e++){const s=this.anInt1164+((f.normalisedX[e]<<12)/this.anInt1160|0),i=this.anInt1157+((f.normalisedY[t]<<12)/this.anInt1160|0);let l=i,o=s,a=0,h=s*s>>12,c=i*i>>12;for(;h+c<16384&&a<this.anInt1159;)a++,l=i+(l*o>>12)*2,o=s+h-c,c=l*l>>12,h=o*o>>12;n[e]=a>=this.anInt1159-1?0:(a<<12)/this.anInt1159|0}return n}}Pt.__class="TextureOpMandelbrot";class Yt extends C{constructor(){super(1,!0)}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);if(this.monochromeImageCache.invalid){const e=this.getChildColorOutput(0,t),s=e[2],i=e[1],l=e[0];for(let o=0;o<f.width;o++)n[o]=(i[o]+l[o]+s[o])/3|0}return n}}Yt.__class="TextureOpMonochrome";class Ht extends C{constructor(){super(1,!0),this.anInt4832=4096}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);if(this.monochromeImageCache.invalid){const e=this.getChildMonochromeOutput(0,t-1&f.heightMask),s=this.getChildMonochromeOutput(0,t),i=this.getChildMonochromeOutput(0,t+1&f.heightMask);for(let l=0;l<f.width;l++){const o=this.anInt4832*(i[l]-e[l]),h=this.anInt4832*(s[f.widthMask&l+1]-s[f.widthMask&l-1])>>12,c=o>>12,d=c*c>>12,p=h*h>>12,m=Math.sqrt(Math.fround((d+p+4096)/4096))*4096|0,y=m===0?0:16777216/m|0;n[l]=4096-y}}return n}decode(t,n){n===0&&(this.anInt4832=t.readUnsignedShort())}}Ht.__class="TextureOpMonochromeEdgeDetector";class Wt extends C{constructor(t){if(typeof t=="number"||t===null)super(0,!0),this.value===void 0&&(this.value=0),this.value=4096,this.value=t;else if(t===void 0){{let n=4096;super(0,!0),this.value===void 0&&(this.value=0),this.value=4096,this.value=n}this.value===void 0&&(this.value=0)}else throw new Error("invalid overload")}decode(t,n){n===0&&(this.value=(t.readUnsignedByte()<<12)/255|0)}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);return this.monochromeImageCache.invalid&&b.fill$int_A$int$int$int(n,0,f.width,this.value),n}}Wt.__class="TextureOpMonochromeFill";class Qt extends C{constructor(){super(0,!0)}noise(t,n){let e=t+n*57;return e^=e<<1,4096-((e*(e*15731*e+789221|0)+1376312589&2147483647)/262144|0|0)|0}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);if(this.monochromeImageCache.invalid){const e=f.normalisedY[t];for(let s=0;s<f.width;s++)n[s]=this.noise(f.normalisedX[s],e)%4096}return n}}Qt.__class="TextureOpNoise";class Jt extends C{constructor(){super(0,!0),this.aShortArray37===void 0&&(this.aShortArray37=null),this.aShortArray38===void 0&&(this.aShortArray38=null),this.permutation=(t=>{let n=[];for(;t-- >0;)n.push(0);return n})(512),this.aBoolean181=!0,this.anInt2620=1638,this.anInt2625=4,this.anInt2628=4,this.seed=0,this.anInt2631=4}method2049(){if(this.anInt2620>0){this.aShortArray38=(t=>{let n=[];for(;t-- >0;)n.push(0);return n})(this.anInt2628),this.aShortArray37=(t=>{let n=[];for(;t-- >0;)n.push(0);return n})(this.anInt2628);for(let t=0;t<this.anInt2628;t++)this.aShortArray37[t]=Math.pow(Math.fround(this.anInt2620/4096),t)*4096|0,this.aShortArray38[t]=Math.pow(2,t)|0}else if(this.aShortArray37!=null&&this.aShortArray37.length===this.anInt2628){this.aShortArray38=(t=>{let n=[];for(;t-- >0;)n.push(0);return n})(this.anInt2628);for(let t=0;t<this.anInt2628;t++)this.aShortArray38[t]=Math.pow(2,t)|0}}decode(t,n){if(n===0)this.aBoolean181=t.readUnsignedByte()===1;else if(n===1)this.anInt2628=t.readUnsignedByte();else if(n===2){if(this.anInt2620=t.readShort(),this.anInt2620<0){this.aShortArray37=(e=>{let s=[];for(;e-- >0;)s.push(0);return s})(this.anInt2628);for(let e=0;e<this.anInt2628;e++)this.aShortArray37[e]=t.readShort()|0}}else n===3?this.anInt2631=this.anInt2625=t.readUnsignedByte():n===4?this.seed=t.readUnsignedByte():n===5?this.anInt2631=t.readUnsignedByte():n===6&&(this.anInt2625=t.readUnsignedByte())}method2051(t,n,e,s,i,l){const o=l-4096;let a=t>>12;t&=4095;let h=a+1;a&=255,h>=i&&(h=0);const c=t-4096,d=h&255,p=this.permutation[s+a]&3;let m;p<=1?m=p===0?l+t:l-t:m=p===2?t-l:-l-t;const y=this.permutation[s+d]&3,u=q.PERLIN_FADE_$LI$()[t];let I;y>1?I=y===2?c-l:-c-l:I=y===0?l+c:l-c;const w=this.permutation[a+n]&3,$=m+(u*(I-m)>>12);let x;w>1?x=w===2?t-o:-t-o:x=w===0?o+t:o-t;const _=this.permutation[n+d]&3;let O;_<=1?O=_===0?o+c:o-c:O=_===2?c-o:-o-c;const T=x+((O-x)*u>>12);return $+((T-$)*e>>12)}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);return this.monochromeImageCache.invalid&&this.method2053(n,t),n}method2053(t,n){const e=this.anInt2625*f.normalisedY[n];if(this.anInt2628===1){const i=this.aShortArray37[0],l=this.aShortArray38[0]<<12,o=l*this.anInt2631>>12,a=this.anInt2625*l>>12;let h=l*e>>12;const c=h>>12;h&=4095;const d=this.permutation[c&255]&255,p=q.PERLIN_FADE_$LI$()[h];let m=c+1;a<=m&&(m=0);const y=this.permutation[m&255]&255;if(this.aBoolean181)for(let u=0;u<f.width;u++){const I=f.normalisedX[u]*this.anInt2631;let w=this.method2051(l*I>>12,y,p,d,o,h);w=w*i>>12,t[u]=(w>>1)+2048}else for(let u=0;u<f.width;u++){const I=f.normalisedX[u]*this.anInt2631,w=this.method2051(l*I>>12,y,p,d,o,h);t[u]=i*w>>12}return}const s=this.aShortArray37[0];if(s>8||s<-8){const i=this.aShortArray38[0]<<12;let l=i*e>>12;const o=l>>12,a=this.anInt2631*i>>12,h=i*this.anInt2625>>12;l&=4095;const c=this.permutation[o&255]&255,d=q.PERLIN_FADE_$LI$()[l];let p=o+1;p>=h&&(p=0);const m=this.permutation[p&255]&255;for(let y=0;y<f.width;y++){const u=this.anInt2631*f.normalisedX[y],I=this.method2051(i*u>>12,m,d,c,a,l);t[y]=s*I>>12}}for(let i=1;i<this.anInt2628;i++){const l=this.aShortArray37[i];if(l>8||l<-8){const o=this.aShortArray38[i]<<12,a=o*this.anInt2631>>12;let h=e*o>>12;const c=this.anInt2625*o>>12,d=h>>12;let p=d+1;h&=4095;const m=this.permutation[d&255]&255;p>=c&&(p=0);const y=this.permutation[p&255]&255,u=q.PERLIN_FADE_$LI$()[h];if(this.aBoolean181&&i===this.anInt2628-1)for(let I=0;I<f.width;I++){const w=f.normalisedX[I]*this.anInt2631;let $=this.method2051(w*o>>12,y,u,m,a,h);$=t[I]+(l*$>>12),t[I]=($>>1)+2048}else for(let I=0;I<f.width;I++){const w=f.normalisedX[I]*this.anInt2631,$=this.method2051(o*w>>12,y,u,m,a,h);t[I]+=l*$>>12}}}}postDecode(){this.permutation=C.getPermutation(this.seed),this.method2049();for(let t=this.anInt2628-1;t>=1;t--){const n=this.aShortArray37[t];if(n>8||n<-8)break;this.anInt2628--}}}Jt.__class="TextureOpPerlinNoise";class Zt extends C{constructor(){super(3,!1),this.magnitude=32768}postDecode(){C.createTrigonometryTables()}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);if(this.monochromeImageCache.invalid){const e=this.getChildMonochromeOutput(1,t),s=this.getChildMonochromeOutput(2,t);for(let i=0;i<f.width;i++){const l=e[i]>>4&255,o=this.magnitude*s[i]>>12,a=o*C.SINE[l]>>12,h=f.heightMask&t+(a>>12),c=o*C.COSINE[l]>>12,d=f.widthMask&i+(c>>12),p=this.getChildMonochromeOutput(0,h);n[i]=p[d]}}return n}decode(t,n){n===0?this.magnitude=t.readUnsignedShort()<<4:n===1&&(this.monochrome=t.readUnsignedByte()===1)}getColorOutput(t){const n=this.colorImageCache.get$int(t);if(this.colorImageCache.invalid){const e=this.getChildMonochromeOutput(1,t),s=this.getChildMonochromeOutput(2,t),i=n[0],l=n[1],o=n[2];for(let a=0;a<f.width;a++){const h=s[a]*this.magnitude>>12,c=e[a]*255>>12&255,d=h*C.SINE[c]>>12,m=(h*C.COSINE[c]>>12>>12)+a&f.widthMask,y=(d>>12)+t&f.heightMask,u=this.getChildColorOutput(0,y);i[a]=u[0][m],l[a]=u[1][m],o[a]=u[2][m]}}return n}}Zt.__class="TextureOpPolarDistortion";class Kt extends C{constructor(){super(1,!1),this.range=2048,this.minValue=1024,this.maxValue=3072}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);if(this.monochromeImageCache.invalid){const e=this.getChildMonochromeOutput(0,t);for(let s=0;s<f.width;s++)n[s]=this.minValue+(e[s]*this.range>>12)}return n}getColorOutput(t){const n=this.colorImageCache.get$int(t);if(this.colorImageCache.invalid){const e=this.getChildColorOutput(0,t),s=e[0],i=e[1],l=n[0],o=n[2],a=n[1],h=e[2];for(let c=0;c<f.width;c++)l[c]=this.minValue+(this.range*s[c]>>12),a[c]=this.minValue+(this.range*i[c]>>12),o[c]=this.minValue+(this.range*h[c]>>12)}return n}postDecode(){this.range=this.maxValue-this.minValue}decode(t,n){n===0?this.minValue=t.readUnsignedShort():n===1?this.maxValue=t.readUnsignedShort():n===2&&(this.monochrome=t.readUnsignedByte()===1)}}Kt.__class="TextureOpRange";class St extends C{constructor(){super(0,!0),this.ops===void 0&&(this.ops=null)}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);return this.monochromeImageCache.invalid&&this.render(this.monochromeImageCache.get$()),n}getColorOutput(t){const n=this.colorImageCache.get$int(t);if(this.colorImageCache.invalid){const e=f.width,s=f.height,i=(function(o){let a=function(h){if(h.length===0)return 0;{let c=[];for(let d=0;d<h[0];d++)c.push(a(h.slice(1)));return c}};return a(o)})([s,e]),l=this.colorImageCache.get$();this.render(i);for(let o=0;o<f.height;o++){const a=l[o],h=a[1],c=a[2],d=i[o],p=a[0];for(let m=0;m<f.width;m++){const y=d[m];c[m]=(y&255)<<4,h[m]=y>>4&4080,p[m]=y>>12&4080}}}return n}decode(t,n){if(n===0){this.ops=(e=>{let s=[];for(;e-- >0;)s.push(null);return s})(t.readUnsignedByte());for(let e=0;e<this.ops.length;e++){const s=t.readUnsignedByte();s===0?this.ops[e]=bt.create(t):s===1?this.ops[e]=mt.create(t):s===2?this.ops[e]=yt.create(t):s===3&&(this.ops[e]=It.create(t))}}else n===1&&(this.monochrome=t.readUnsignedByte()===1)}render(t){const n=f.width,e=f.height;if(r.sub35_method4335(t),r.sub18_method4374(f.heightMask,f.widthMask),this.ops!=null)for(let s=0;s<this.ops.length;s++){const i=this.ops[s],l=i.outlineColor;i.fillColor>=0?l>=0?i.render(n,e):i.renderFill(n,e):l>=0&&i.renderOutline(n,e)}}}St.__class="TextureOpRasterizer";class wt extends C{constructor(){super(0,!1),this.height===void 0&&(this.height=0),this.width===void 0&&(this.width=0),this.pixels===void 0&&(this.pixels=null),this.spriteId=-1}loadSprite(){if(this.pixels!=null)return!0;if(this.spriteId>=0){const t=f.loadedTextures.getSprite(this.spriteId);return this.width=t.width,this.height=t.height,this.pixels=t.data,!0}else return!1}decode(t,n){n===0&&(this.spriteId=t.readUnsignedShort())}clearImageCache(){super.clearImageCache(),this.pixels=null}getSpriteId(){return this.spriteId}getColorOutput(t){const n=this.colorImageCache.get$int(t);if(this.colorImageCache.invalid&&this.loadSprite()){const e=n[0],s=n[1],i=n[2];let l=(f.height===this.height?t:t*this.height/f.height|0)*this.width;if(this.width===f.width)for(let o=0;o<f.width;o++)e[o]=this.pixels[l++],s[o]=this.pixels[l++],i[o]=this.pixels[l++],l++;else for(let o=0;o<f.width;o++){const a=this.width*o/f.width|0;e[o]=this.pixels[(l+a)*4+0]<<4,s[o]=this.pixels[(l+a)*4+1]<<4,i[o]=this.pixels[(l+a)*4+2]<<4}}return n}}wt.__class="TextureOpSprite";class Mt extends C{constructor(){super(0,!0),this.anIntArray498===void 0&&(this.anIntArray498=null),this.anIntArray499===void 0&&(this.anIntArray499=null),this.frequency=10,this.ratio=2048,this.mode=0}decode(t,n){n===0?this.frequency=t.readUnsignedByte():n===1?this.ratio=t.readUnsignedShort():n===2&&(this.mode=t.readUnsignedByte())}postDecode(){this.method3784()}method3784(){this.anIntArray498=(s=>{let i=[];for(;s-- >0;)i.push(0);return i})(this.frequency+1);const t=4096/this.frequency|0;this.anIntArray499=(s=>{let i=[];for(;s-- >0;)i.push(0);return i})(this.frequency+1);const n=t*this.ratio>>12;let e=0;for(let s=0;s<this.frequency;s++)this.anIntArray498[s]=e,this.anIntArray499[s]=n+e,e+=t;this.anIntArray498[this.frequency]=4096,this.anIntArray499[this.frequency]=this.anIntArray499[0]+4096}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);if(this.monochromeImageCache.invalid){const e=f.normalisedY[t];if(this.mode===0){let s=0;for(let i=0;i<this.frequency;i++)if(e>=this.anIntArray498[i]&&e<this.anIntArray498[i+1]){e<this.anIntArray499[i]&&(s=4096);break}b.fill$int_A$int$int$int(n,0,f.width,s)}else for(let s=0;s<f.width;s++){let i=0,l=0;const o=f.normalisedX[s],a=this.mode;a===1?i=o:a===2?i=(e+o-4096>>1)+2048:a===3&&(i=(o-e>>1)+2048);for(let h=0;h<this.frequency;h++)if(this.anIntArray498[h]<=i&&i<this.anIntArray498[h+1]){i<this.anIntArray499[h]&&(l=4096);break}n[s]=l}}return n}}Mt.__class="TextureOpSquareWaveform";class tn extends C{constructor(){super(0,!1),this.width===void 0&&(this.width=0),this.height===void 0&&(this.height=0),this.pixels===void 0&&(this.pixels=null),this.textureId=-1}getColorOutput(t){const n=this.colorImageCache.get$int(t);if(this.colorImageCache.invalid&&this.loadTexture()){let e=this.width*(f.height===this.height?t:t*this.height/f.height|0);const s=n[0],i=n[2],l=n[1];if(this.width===f.width)for(let o=0;o<f.width;o++){const a=this.pixels[e++];i[o]=(a&255)<<4,l[o]=a>>4&4080,s[o]=a>>12&4080}else for(let o=0;o<f.width;o++){const a=this.width*o/f.width|0,h=this.pixels[a+e];i[o]=(h&255)<<4,l[o]=h>>4&4080,s[o]=h>>12&4080}}return n}loadTexture(){if(this.pixels!=null)return!0;if(this.textureId>=0){const t=f.loadedTextures.getTexture(this.textureId);this.width=t.width,this.height=t.height,this.pixels=(e=>{let s=[];for(;e-- >0;)s.push(0);return s})(t.data.length|0);const n=t.data;for(let e=0;e<t.data.length/4;e++)this.pixels[e]=n[e*4+0]<<16|n[e*4+1]<<8|n[e*4+2];return!0}else return!1}decode(t,n){n===0&&(this.textureId=t.readUnsignedShort())}clearImageCache(){super.clearImageCache(),this.pixels=null}getTextureId(){return this.textureId}}tn.__class="TextureOpTexture";class nn extends C{constructor(){super(1,!1),this.horizontalTiles=4,this.verticalTiles=4}decode(t,n){n===0?this.horizontalTiles=t.readUnsignedByte():n===1&&(this.verticalTiles=t.readUnsignedByte())}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);if(this.monochromeImageCache.invalid){const e=f.width/this.horizontalTiles|0,s=f.height/this.verticalTiles|0;let i;if(s>0){const l=t%s;i=this.getChildMonochromeOutput(0,f.height*l/s|0)}else i=this.getChildMonochromeOutput(0,0);for(let l=0;l<f.width;l++)if(e>0){const o=l%e;n[l]=i[o*f.width/e|0]}else n[l]=i[0]}return n}getColorOutput(t){const n=this.colorImageCache.get$int(t);if(this.colorImageCache.invalid){const e=f.width/this.horizontalTiles|0,s=f.height/this.verticalTiles|0;let i;if(s>0){const p=t%s;i=this.getChildColorOutput(0,p*f.height/s|0)}else i=this.getChildColorOutput(0,0);const l=i[0],o=i[1],a=i[2],h=n[0],c=n[1],d=n[2];for(let p=0;p<f.width;p++){let m;if(e<=0)m=0;else{const y=p%e;m=f.width*y/e|0}h[p]=l[m],c[p]=o[m],d[p]=a[m]}}return n}}nn.__class="TextureOpTile";class en extends C{constructor(){super(0,!0)}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);return this.monochromeImageCache.invalid&&b.fill$int_A$int$int$int(n,0,f.width,f.normalisedY[t]),n}}en.__class="TextureOpVerticalGradient";class L extends C{constructor(){super(0,!0),this.aShortArray81=(t=>{let n=[];for(;t-- >0;)n.push(0);return n})(512),this.anInt4553=2,this.anInt4552=2048,this.seed=0,this.anInt4548=1,this.anInt4551=5,this.permutation=(t=>{let n=[];for(;t-- >0;)n.push(0);return n})(512),this.anInt4557=5}postDecode(){this.permutation=C.getPermutation(this.seed),this.method3715()}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);if(this.monochromeImageCache.invalid){const e=f.normalisedY[t]*this.anInt4557+2048,s=e>>12,i=s+1;for(let l=0;l<f.width;l++){L.anInt5205=2147483647,L.anInt2979=2147483647,L.anInt2464=2147483647,L.anInt4260=2147483647;const o=f.normalisedX[l]*this.anInt4551+2048,a=o>>12,h=a+1;for(let d=s-1;d<=i;d++){const p=this.permutation[(d>=this.anInt4557?d-this.anInt4557:d)&255]&255;for(let m=a-1;m<=h;m++){let y=(this.permutation[p+(this.anInt4551<=m?m-this.anInt4551:m)&255]&255)*2;const u=o-(m<<12)-this.aShortArray81[y++],I=e-(d<<12)-this.aShortArray81[y],w=this.anInt4548;let $;if(w===1)$=I*I+u*u>>12;else if(w===3){const x=u>=0?u:-u,_=I<0?-I:I;$=_>=x?_:x}else if(w===4){const x=Math.sqrt(Math.fround((u<0?-u:u)/4096))*4096|0,O=(Math.sqrt(Math.fround((I>=0?I:-I)/4096))*4096|0)+x;$=O*O>>12}else if(w===5){const x=u*u,_=I*I;$=Math.sqrt(Math.sqrt(Math.fround((x+_)/16777216)))*4096|0}else w===2?$=(u<0?-u:u)+(I>=0?I:-I):$=Math.sqrt(Math.fround((u*u+I*I)/16777216))*4096|0;$<L.anInt4260?(L.anInt5205=L.anInt2979,L.anInt2979=L.anInt2464,L.anInt2464=L.anInt4260,L.anInt4260=$):$<L.anInt2464?(L.anInt5205=L.anInt2979,L.anInt2979=L.anInt2464,L.anInt2464=$):$<L.anInt2979?(L.anInt5205=L.anInt2979,L.anInt2979=$):L.anInt5205>$&&(L.anInt5205=$)}}const c=this.anInt4553;c===0?n[l]=L.anInt4260:c===1?n[l]=L.anInt2464:c===3?n[l]=L.anInt2979:c===4?n[l]=L.anInt5205:c===2&&(n[l]=L.anInt2464-L.anInt4260)}}return n}method3715(){const t=new j(this.seed);if(this.aShortArray81=(n=>{let e=[];for(;n-- >0;)e.push(0);return e})(512),this.anInt4552>0)for(let n=0;n<512;n++)this.aShortArray81[n]=Y.nextInt(t,this.anInt4552)|0}decode(t,n){n===0?this.anInt4551=this.anInt4557=t.readUnsignedByte():n===1?this.seed=t.readUnsignedByte():n===2?this.anInt4552=t.readUnsignedShort():n===3?this.anInt4553=t.readUnsignedByte():n===4?this.anInt4548=t.readUnsignedByte():n===5?this.anInt4551=t.readUnsignedByte():n===6&&(this.anInt4557=t.readUnsignedByte())}}L.anInt5205=0,L.anInt2979=0,L.anInt2464=0,L.anInt4260=0,L.__class="TextureOpVoronoiNoise";class sn extends C{constructor(){super(0,!0),this.shape=0,this.frequency=1,this.waveform=0}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);if(this.monochromeImageCache.invalid){const e=f.normalisedY[t],s=e-2048>>1;for(let i=0;i<f.width;i++){const l=f.normalisedX[i],o=l-2048>>1;let a;if(this.shape===0)a=(l-e)*this.frequency;else{const c=s*s+o*o>>12,d=Math.sqrt(Math.fround(c/4096))*4096|0;a=this.frequency*d*3.141592653589793|0}let h=a-(a&-4096);if(this.waveform===0)h=C.SINE[h>>4&255]+4096>>1;else if(this.waveform===2){let c=h-2048;c<0&&(c=-c),h=2048-c<<1}n[i]=h}}return n}postDecode(){C.createTrigonometryTables()}decode(t,n){n===0?this.shape=t.readUnsignedByte():n===1?this.waveform=t.readUnsignedByte():n===3&&(this.frequency=t.readUnsignedByte())}}sn.__class="TextureOpWaveform";class ln extends C{constructor(){super(0,!0),this.thickness=585}decode(t,n){n===0&&(this.thickness=t.readUnsignedShort())}getMonochromeOutput(t){const n=this.monochromeImageCache.get$int(t);if(this.monochromeImageCache.invalid){const e=f.normalisedY[t];for(let s=0;s<f.width;s++){const i=f.normalisedX[s];if(this.thickness<i&&4096-this.thickness>i&&e>2048-this.thickness&&this.thickness+2048>e){let l=2048-i;l=l<0?-l:l,l<<=12,l=(o=>o<0?Math.ceil(o):Math.floor(o))(l/2048-this.thickness),n[s]=4096-l}else if(2048-this.thickness<i&&this.thickness+2048>i){let l=e-2048;l=l>=0?l:-l,l-=this.thickness,l<<=12,n[s]=l/(2048-this.thickness)|0}else if(e<this.thickness||e>4096-this.thickness){let l=i-2048;l=l<0?-l:l,l-=this.thickness,l<<=12,n[s]=l/(2048-this.thickness)|0}else if(this.thickness<=i&&i<=4096-this.thickness)n[s]=0;else{let l=2048-e;l=l<0?-l:l,l<<=12,l=(o=>o<0?Math.ceil(o):Math.floor(o))(l/2048-this.thickness),n[s]=4096-l}}}return n}}ln.__class="TextureOpWeave";class on extends wt{getColorOutput(t){const n=this.colorImageCache.get$int(t);if(this.colorImageCache.invalid&&this.loadSprite()){const e=n[1],s=n[2],i=this.height*(t%this.height),l=n[0];for(let o=0;o<f.width;o++){const a=this.pixels[i+o%this.width];s[o]=(a&255)<<4,e[o]=a>>4&4080,l[o]=a>>12&4080}}return n}}return on.__class="TextureOpTiledSprite",q.PERLIN_FADE_$LI$(),q.__static_initialize(),f.brightnessMap_$LI$(),C.permutations_$LI$(),lt.VALID_$LI$(),it.VALID_$LI$(),J.INVERSE_SQUARE_ROOT_$LI$(),J.__static_initialize(),j.twoToTheXMinus48_$LI$(),j.twoToTheXMinus24_$LI$(),j.__static_initialize(),v.largeBuffers_$LI$(),v.mediumBuffers_$LI$(),v.smallBuffers_$LI$(),{Texture:f,Buffer:ut,TextureOp:C}})(),dn=Object.freeze(Object.defineProperty({__proto__:null,Buffer:un,Texture:cn,TextureOp:fn},Symbol.toStringTag,{value:"Module"})),{Texture:pn,Buffer:mn}=dn,In=pn;class $t{textures=[];sprites=[];parent;filesize=0;getTexture(v){let k=this.parent.textureIds.indexOf(v);if(k!=-1&&this.textures[k])return this.textures[k];throw new Error("texture not loaded")}getSprite(v){let k=this.parent.spriteIds.indexOf(v);if(k!=-1&&this.sprites[k])return this.sprites[k];throw new Error("sprite not loaded")}constructor(v){this.parent=v}static async create(v,k){let Z=new $t(k);for(let R of k.textureIds){let F=await bn(v,R,void 0,!0);Z.textures.push(F.img),Z.filesize+=F.filesize}for(let R of k.spriteIds){let F=await v.getFileById(hn.sprites,R),H=rn(F);Z.sprites.push(H[0].img),Z.filesize+=F.byteLength}return Z}}async function bn(b,v,k=256,Z=!1){let R=await b.getFileById(hn.texturesOldPng,v),F=R.byteLength,H=new mn([...R]),r=new In(H),S=await $t.create(b,r);return F+=S.filesize,{img:yn(r,S,k,Z),filesize:F,tex:r,deps:S}}function yn(b,v,k,Z=!1){let R=b.getPixels(k,k,v,Z?1:.45454545454545453,!1,!Z),F=new ImageData(k,k);for(let H=0;H<R.length;H++)F.data[H*4+0]=R[H]>>16&255,F.data[H*4+1]=R[H]>>8&255,F.data[H*4+2]=R[H]>>0&255,F.data[H*4+3]=255;return F}export{bn as loadProcTexture};
