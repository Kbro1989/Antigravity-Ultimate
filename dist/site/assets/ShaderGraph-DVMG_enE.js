import{r as o,j as t}from"./main-Cu5wNbky.js";const d={color:{type:"color",label:"Color",inputs:[],outputs:["rgb"],value:"#438ab5"},time:{type:"time",label:"Time",inputs:[],outputs:["value"]},multiply:{type:"math",label:"Multiply",inputs:["a","b"],outputs:["result"]},add:{type:"math",label:"Add",inputs:["a","b"],outputs:["result"]},sin:{type:"math",label:"Sin",inputs:["x"],outputs:["result"]},output:{type:"output",label:"Fragment Output",inputs:["color","alpha"],outputs:[]},texture:{type:"texture",label:"Texture Sample",inputs:["uv"],outputs:["rgb","a"]}},S=({onCompile:x,onApplyToObjects:b})=>{const[p,r]=o.useState([{id:"n1",type:"color",label:"Base Color",position:{x:50,y:100},inputs:[],outputs:["rgb"],value:"#438ab5"},{id:"n2",type:"output",label:"Fragment Output",position:{x:400,y:150},inputs:["color","alpha"],outputs:[]}]),[w]=o.useState([]),[m,h]=o.useState(null),[n,c]=o.useState(null),[i,g]=o.useState({x:0,y:0}),f=o.useRef(null),v=(e,s)=>{const a=p.find(l=>l.id===e);a&&(c(e),g({x:s.clientX-a.position.x,y:s.clientY-a.position.y}),h(e))},y=o.useCallback(e=>{n&&r(s=>s.map(a=>a.id===n?{...a,position:{x:e.clientX-i.x,y:e.clientY-i.y}}:a))},[n,i]),u=()=>{c(null)},N=e=>{const s=d[e];if(s){const a={...s,id:`n${Date.now()}`,position:{x:200,y:200}};r(l=>[...l,a])}},j=()=>{const e=`
// Generated by POG-Ultimate Shader Graph
precision mediump float;

uniform float u_time;
uniform vec3 u_baseColor;

void main() {
  vec3 color = u_baseColor;
  float pulse = sin(u_time * 2.0) * 0.5 + 0.5;
  gl_FragColor = vec4(color * pulse, 1.0);
}
    `.trim();x?.(e)};return t.jsxs("div",{className:"h-full flex flex-col bg-[#232323] text-[#aaa] font-sans overflow-hidden",children:[t.jsxs("div",{className:"h-14 bg-[#282e2e] border-b border-[#394443] px-6 flex items-center justify-between shrink-0",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-[#438ab5]",children:"Shader Graph Builder"}),t.jsx("div",{className:"w-px h-6 bg-[#394443]"}),t.jsx("div",{className:"flex space-x-2",children:Object.keys(d).map(e=>t.jsxs("button",{onClick:()=>N(e),className:"px-3 py-1.5 bg-[#232323] border border-[#394443] rounded-lg text-[9px] font-black uppercase text-[#438ab5] hover:bg-[#394443] transition-all",children:["+ ",e]},e))})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("button",{onClick:j,className:"px-6 py-2 bg-[#438ab5] hover:bg-[#3e5b6d] text-white rounded-xl text-[9px] font-black uppercase tracking-widest transition-all shadow-lg shadow-[#438ab5]/20",children:"Generate GLSL"}),t.jsx("button",{onClick:()=>b?.("default"),className:"px-6 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl text-[9px] font-black uppercase tracking-widest transition-all",children:"Apply to Target"})]})]}),t.jsx("div",{ref:f,className:"flex-1 relative overflow-hidden bg-[#232323]",onMouseMove:y,onMouseUp:u,onMouseLeave:u,style:{backgroundImage:"radial-gradient(circle, #2a3434 1px, transparent 1px)",backgroundSize:"20px 20px"},children:p.map(e=>t.jsxs("div",{onMouseDown:s=>v(e.id,s),className:`absolute w-40 bg-[#282e2e]/95 border rounded-2xl shadow-2xl backdrop-blur-xl cursor-move transition-all ${m===e.id?"border-[#438ab5] shadow-[0_0_30px_rgba(67,138,181,0.2)]":"border-[#394443]"}`,style:{left:e.position.x,top:e.position.y},children:[t.jsx("div",{className:`px-4 py-2 border-b border-[#394443] rounded-t-2xl ${e.type==="output"?"bg-emerald-600/10":e.type==="color"?"bg-purple-600/10":"bg-[#438ab5]/10"}`,children:t.jsx("span",{className:"text-[9px] font-black uppercase text-[#8397a5] tracking-widest",children:e.label})}),t.jsxs("div",{className:"p-3 space-y-2",children:[e.inputs.map(s=>t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-500 border border-amber-400"}),t.jsx("span",{className:"text-[8px] text-slate-500 uppercase font-bold",children:s})]},s)),e.type==="color"&&t.jsx("input",{type:"color",value:e.value||"#438ab5",onChange:s=>r(a=>a.map(l=>l.id===e.id?{...l,value:s.target.value}:l)),className:"w-full h-8 rounded-lg cursor-pointer bg-transparent border-none"}),e.outputs.map(s=>t.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[t.jsx("span",{className:"text-[8px] text-slate-500 uppercase font-bold",children:s}),t.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-cyan-500 border border-cyan-400"})]},s))]})]},e.id))})]})};export{S as ShaderGraph,S as default};
