import{r as o,j as s}from"./main-Cu5wNbky.js";const p={root:"bg-purple-600/10 border-purple-500/30",selector:"bg-amber-600/10 border-amber-500/30",sequence:"bg-cyan-600/10 border-cyan-500/30",action:"bg-emerald-600/10 border-emerald-500/30",condition:"bg-rose-600/10 border-rose-500/30",decorator:"bg-indigo-600/10 border-indigo-500/30"},k={idle:"bg-[#394443]",running:"bg-amber-500 animate-pulse",success:"bg-emerald-500",failure:"bg-rose-500"},C=({onSave:u,onDebug:S})=>{const[l,n]=o.useState([{id:"root",type:"root",label:"Root Execution",position:{x:300,y:50},children:["sel1"],status:"idle"},{id:"sel1",type:"selector",label:"Combat Selector",position:{x:300,y:150},children:["seq1","act1"],status:"idle"},{id:"seq1",type:"sequence",label:"Patrol Loop",position:{x:150,y:280},children:["cond1","act2"],status:"idle"}]),[b,g]=o.useState(null),[r,d]=o.useState(null),[c,m]=o.useState({x:0,y:0}),[i,h]=o.useState(!1),f=o.useRef(null),v=(e,a)=>{const t=l.find(w=>w.id===e);t&&(d(e),m({x:a.clientX-t.position.x,y:a.clientY-t.position.y}),g(e))},N=o.useCallback(e=>{r&&n(a=>a.map(t=>t.id===r?{...t,position:{x:e.clientX-c.x,y:e.clientY-c.y}}:t))},[r,c]),x=()=>{d(null)},y=e=>{const a={id:`node_${Date.now()}`,type:e,label:`New ${e}`,position:{x:200,y:200},children:[],status:"idle"};n(t=>[...t,a])},j=()=>{if(h(!i),!i){const e=setInterval(()=>{n(a=>a.map(t=>({...t,status:["idle","running","success","failure"][Math.floor(Math.random()*4)]})))},1e3);setTimeout(()=>clearInterval(e),5e3)}};return s.jsxs("div",{className:"h-full flex flex-col bg-[#232323] text-[#aaa] font-sans overflow-hidden",children:[s.jsxs("div",{className:"h-14 bg-[#282e2e] border-b border-[#394443] px-6 flex items-center justify-between shrink-0",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-[#438ab5]",children:"Behavior Logic Workspace"}),s.jsx("div",{className:"w-px h-6 bg-[#394443]"}),s.jsx("div",{className:"flex space-x-2",children:["selector","sequence","action","condition"].map(e=>s.jsxs("button",{onClick:()=>y(e),className:`px-3 py-1.5 border rounded-lg text-[9px] font-black uppercase transition-all ${p[e]} hover:opacity-80`,children:["+ ",e]},e))})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:j,className:`px-6 py-2 rounded-xl text-[9px] font-black uppercase tracking-widest transition-all ${i?"bg-rose-600 text-white":"bg-emerald-600 text-white"}`,children:i?"Stop Monitor":"Live Debug"}),s.jsx("button",{onClick:()=>u?.(l),className:"px-6 py-2 bg-[#438ab5] hover:bg-[#3e5b6d] text-white rounded-xl text-[9px] font-black uppercase tracking-widest transition-all",children:"Commit Tree"})]})]}),s.jsx("div",{ref:f,className:"flex-1 relative overflow-hidden",onMouseMove:N,onMouseUp:x,onMouseLeave:x,style:{backgroundImage:"radial-gradient(circle, #2a3434 1px, transparent 1px)",backgroundSize:"20px 20px"},children:l.map(e=>s.jsxs("div",{onMouseDown:a=>v(e.id,a),className:`absolute w-40 border rounded-2xl shadow-2xl backdrop-blur-xl cursor-move transition-all ${p[e.type]} ${b===e.id?"ring-1 ring-[#438ab5] shadow-[0_0_30px_rgba(67,138,181,0.1)]":""}`,style:{left:e.position.x,top:e.position.y},children:[s.jsx("div",{className:"px-4 py-3 flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${k[e.status]}`}),s.jsx("span",{className:"text-[9px] font-black uppercase text-[#8397a5] tracking-wide",children:e.label})]})}),s.jsx("div",{className:"px-4 py-2 border-t border-[#394443]",children:s.jsx("span",{className:"text-[8px] text-slate-600 uppercase font-black",children:e.type})})]},e.id))})]})};export{C as BehaviorTreeEditor,C as default};
