import{a as v,b as w,R as a,r as p,j as e}from"./main-BZMM9czR.js";import{u as y}from"./useNotification-Df2FcKvH.js";function _(){const c=v(),{addNotification:l}=y(),{sourceRelic:x,setSourceRelic:m}=w(),[N,j]=a.useState(!1),[k,u]=a.useState(0),[S,C]=a.useState("Models_Legacy"),[R,f]=a.useState([]),[t,g]=p.useState("archives"),[i,o]=p.useState([]),d=a.useCallback(async()=>{try{const s=await c.stats.getAssets();f(s.sort((r,n)=>n.timestamp-r.timestamp)),u(s.length)}catch(s){console.error("[RelicWorkspace] Asset refresh failed",s)}},[c]);a.useEffect(()=>{d();const s=setInterval(d,5e3);return()=>clearInterval(s)},[d]);const b=async s=>{try{l("info",`Excavating Relic Content: ${s.name}...`);const r=await c.limbs.call("relic","fetch_relic_content",{path:s.name,category:t});if(r.status!=="success")throw new Error(r.message||"Content excavation failed");const n=await c.limbs.call("relic","fork_relic",{id:s.name,type:"ref_"+t,content:r.content});if(n.status==="success")l("success",n.message);else throw new Error(n.message)}catch(r){l("error",`Forking Failed: ${r.message}`)}},h=a.useCallback(async()=>{try{const s=await c.limbs.call("relic","scan_game_needs",{category:t});s.status==="success"?o(s.items||[]):o([])}catch{o([])}},[c,t]);return a.useEffect(()=>{h()},[h]),e.jsxs("div",{className:"flex-1 flex gap-8 h-full p-8 bg-black/40 animate-fade-in relative overflow-hidden",children:[e.jsxs("div",{className:"flex-1 glass-ultra rounded-[40px] border border-white/5 shadow-2xl relative overflow-hidden flex flex-col group p-10",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/dust.png')] opacity-10"}),e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.6em] text-white/40",children:"RSC-Cloudflare Reference"}),e.jsxs("span",{className:"text-[9px] font-mono text-cyan-500/60 uppercase",children:["SOURCE: ",t.toUpperCase()]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2",children:[i.length===0&&e.jsx("div",{className:"text-white/20 text-xs font-mono p-4",children:"No artifacts found in this sector."}),i.map(s=>e.jsxs("div",{className:"p-4 glass-ultra rounded-2xl border border-white/5 flex items-center justify-between hover:bg-white/5 transition-all group/item",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-8 h-8 rounded bg-cyan-500/10 flex items-center justify-center text-cyan-400 text-xs",children:s.isDirectory?"ðŸ“":"ðŸ“„"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-widest",children:s.name}),e.jsxs("span",{className:"text-[8px] font-mono text-white/30",children:[s.size||0," bytes"]})]})]}),e.jsxs("div",{className:"flex gap-2 opacity-0 group-hover/item:opacity-100 transition-all",children:[e.jsx("button",{onClick:()=>m({...s,category:t}),className:`px-3 py-1 text-[8px] font-bold uppercase rounded border transition-all ${x?.name===s.name?"bg-neon-magenta/20 border-neon-magenta text-neon-magenta":"bg-white/5 border-white/10 text-white/40 hover:bg-white/10"}`,children:x?.name===s.name?"Source Active":"Pin as Source"}),e.jsx("button",{onClick:()=>b(s),className:"px-3 py-1 bg-cyan-500/20 border border-cyan-500/20 text-cyan-400 text-[8px] font-bold uppercase rounded hover:bg-cyan-500/40 transition-all",children:"Fork to Staging"})]})]},s.name))]}),e.jsx("div",{className:"h-16 border-t border-white/5 mt-4 flex items-center justify-between",children:e.jsx("div",{className:"text-[9px] font-mono text-white/20",children:"Archive Integrity: 100%"})})]}),e.jsx("div",{className:"w-[400px] flex flex-col gap-8",children:e.jsxs("div",{className:"glass-ultra rounded-[40px] p-8 border border-white/5 shadow-2xl flex flex-col gap-8 h-full bg-white/5 backdrop-blur-3xl",children:[e.jsx("div",{className:"text-[10px] font-black tracking-[0.4em] text-white/40 uppercase",children:"Archive Sectors"}),e.jsx("div",{className:"flex flex-col gap-3",children:["archives","locations","config","ids","sprites","models"].map(s=>e.jsxs("div",{onClick:()=>g(s),className:`p-4 glass rounded-2xl border flex items-center justify-between cursor-pointer transition-all
                                ${t===s?"border-cyan-500/40 bg-cyan-500/5":"border-white/5 hover:bg-white/5"}
                            `,children:[e.jsx("span",{className:`text-[10px] font-bold uppercase tracking-widest ${t===s?"text-cyan-400":"text-white/60"}`,children:s}),t===s&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-cyan-500 shadow-[0_0_10px_cyan]"})]},s))}),e.jsxs("div",{className:"mt-auto p-6 bg-cyan-500/5 rounded-3xl border border-cyan-500/20",children:[e.jsx("div",{className:"text-[9px] font-black text-cyan-500 uppercase tracking-widest mb-2",children:"Needs Analysis"}),e.jsxs("div",{className:"text-[10px] text-white/60 leading-relaxed",children:["Scanning reference implementation for missing assets. ",e.jsx("br",{}),"Target: ",t,e.jsx("br",{}),"Status: ",i.length>0?"ONLINE":"OFFLINE"]})]})]})})]})}export{_ as RelicWorkspace};
