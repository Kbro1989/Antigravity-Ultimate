import{a as f,r as t,j as e}from"./main-BZMM9czR.js";import{C as g,P as w,S as j,O as S}from"./Stage-StTexAqy.js";import{u as C}from"./useNotification-Df2FcKvH.js";import"./three.module-DqfR4SX2.js";import"./constants-CPtoviZ5.js";import"./with-selector-BTWGBqn6.js";function N({modelId:c}){const[a,i]=t.useState(null),o=f();return t.useEffect(()=>{let l=!1;return(async()=>{try{const n=await(await o.rsmv.classic||await o.initClassicPipeline()).loadModel(parseInt(c));!l&&n.scene&&i(n.scene)}catch(r){console.warn("[ClassicWorkspace] Model load failed:",r)}})(),()=>{l=!0}},[c]),a?e.jsx("primitive",{object:a,castShadow:!0,receiveShadow:!0}):null}function R(){const{addNotification:c}=C(),a=f(),[i,o]=t.useState("0"),[l,p]=t.useState(!1),[r,n]=t.useState(""),[m,h]=t.useState([]);t.useEffect(()=>{(async()=>{try{const d=await(await a.rsmv.classic||await a.initClassicPipeline()).getItems();d&&d.length>0&&h(d.map(u=>({id:u.id,name:u.name,description:u.description,type:"item"})))}catch(x){console.error("[ClassicWorkspace] Asset load failed",x)}})()},[l]);const b=async()=>{try{await(await a.initClassicPipeline()).linkClassicDir("C:\\Users\\Destiny\\Desktop\\New folder\\POG-Ultimate\\local\\rsc_data")&&(p(!0),c("success","RSC Cache Linked Successfully"))}catch(s){c("error",`Link Failed: ${s.message}`)}},v=m.filter(s=>s.name.toLowerCase().includes(r.toLowerCase())).slice(0,50);return e.jsxs("div",{className:"flex-1 flex gap-6 h-full p-6 bg-[#2a2419] animate-fade-in relative overflow-hidden",children:[e.jsxs("div",{className:"flex-1 glass-ultra rounded-xl relative overflow-hidden border border-[#5d4037] shadow-2xl bg-[#3e2723]/30",children:[e.jsxs(g,{shadows:!0,className:"w-full h-full",children:[e.jsx(w,{makeDefault:!0,position:[0,2,5],fov:45}),e.jsx(t.Suspense,{fallback:null,children:e.jsx(j,{environment:"apartment",intensity:.5,children:e.jsx(N,{modelId:i})})}),e.jsx(S,{makeDefault:!0})]}),!l&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:e.jsx("button",{onClick:b,className:"px-8 py-4 bg-[#6d4c41] hover:bg-[#8d6e63] text-[#d7ccc8] font-bold rounded-lg border-2 border-[#3e2723] shadow-lg transition-all",children:"LINK RETRO ASSETS"})}),e.jsxs("div",{className:"absolute top-4 left-4 flex flex-col gap-1",children:[e.jsxs("div",{className:"text-[12px] font-bold text-[#d7ccc8] tracking-widest uppercase flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 shadow-[0_0_8px_#4caf50]"}),"CLASSIC_ENGINE_v1.0"]}),e.jsx("div",{className:"text-[10px] text-[#8d6e63] font-mono uppercase",children:"Render: SW-EMULATOR"})]})]}),e.jsx("div",{className:"w-80 flex flex-col gap-4",children:e.jsxs("div",{className:"bg-[#3e2723] rounded-xl p-6 flex-1 flex flex-col gap-4 border border-[#5d4037] shadow-2xl overflow-hidden",children:[e.jsx("div",{className:"text-[10px] font-black tracking-[0.4em] text-[#d7ccc8]/40 uppercase",children:"Classic Browser"}),e.jsx("input",{type:"text",placeholder:"SEARCH ASSETS...",className:"w-full bg-black/40 border border-[#5d4037] rounded-lg px-4 py-3 text-[10px] font-bold text-[#d7ccc8] placeholder-[#d7ccc8]/20 outline-none",value:r,onChange:s=>n(s.target.value)}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-1",children:v.map(s=>e.jsx("button",{onClick:()=>o(s.id.toString()),className:`w-full text-left px-4 py-3 rounded-lg text-[10px] font-bold transition-all border ${i===s.id.toString()?"bg-[#6d4c41] text-[#fff] border-[#8d6e63]":"text-[#d7ccc8]/60 border-transparent hover:bg-black/20 hover:text-[#d7ccc8]"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:s.name||"UNNAMED"}),e.jsxs("span",{className:"text-[8px] opacity-40 font-mono",children:["#",s.id]})]})},s.id))})]})})]})}export{R as ClassicWorkspace};
