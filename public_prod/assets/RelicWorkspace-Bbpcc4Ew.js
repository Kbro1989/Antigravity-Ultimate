import{a as w,b as y,R as r,r as h,j as e}from"./main-Cde5WehW.js";import{u as N}from"./useNotification-mdJvSa3K.js";function _(){const n=w(),{addNotification:i}=N(),{sourceRelic:p,setSourceRelic:u}=y(),[j,k]=r.useState(!1),[S,m]=r.useState(0),[C,R]=r.useState("Models_Legacy"),[E,g]=r.useState([]),[s,b]=h.useState("archives"),[l,o]=h.useState([]),d=r.useCallback(async()=>{try{const t=await n.stats.getAssets();g(t.sort((a,c)=>c.timestamp-a.timestamp)),m(t.length)}catch(t){console.error("[RelicWorkspace] Asset refresh failed",t)}},[n]);r.useEffect(()=>{d();const t=setInterval(d,5e3);return()=>clearInterval(t)},[d]);const v=async t=>{try{i("info",`Excavating Relic Content: ${t.name}...`);const a=await n.limbs.call("relic","fetch_relic_content",{path:t.name,category:s});if(a.status!=="success")throw new Error(a.message||"Content excavation failed");const c=await n.limbs.call("relic","fork_relic",{id:t.name,type:"ref_"+s,content:a.content});if(c.status==="success")i("success",c.message);else throw new Error(c.message)}catch(a){i("error",`Forking Failed: ${a.message}`)}},f=r.useCallback(async()=>{try{let t;if(t=await n.limbs.call("relic","explore_museum",{}),t.status==="success"){const c=(t.artifacts||[]).filter(x=>s==="archives"?x.type==="archive":s==="models"?x.type==="3d_models":s==="config"?x.type==="configuration":!0);o(c)}else o([])}catch{o([])}},[n,s]);return r.useEffect(()=>{f()},[f]),e.jsxs("div",{className:"flex-1 flex gap-8 h-full p-8 bg-black/40 animate-fade-in relative overflow-hidden",children:[e.jsxs("div",{className:"flex-1 glass-ultra rounded-[40px] border border-white/5 shadow-2xl relative overflow-hidden flex flex-col group p-10",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/dust.png')] opacity-10"}),e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.6em] text-white/40",children:"RSC-Cloudflare Reference"}),e.jsxs("span",{className:"text-[9px] font-mono text-cyan-500/60 uppercase",children:["SOURCE: ",s.toUpperCase()]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2",children:[l.length===0&&e.jsx("div",{className:"text-white/20 text-xs font-mono p-4",children:"No artifacts found in this sector."}),l.map(t=>e.jsxs("div",{className:"p-4 glass-ultra rounded-2xl border border-white/5 flex items-center justify-between hover:bg-white/5 transition-all group/item",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-8 h-8 rounded bg-cyan-500/10 flex items-center justify-center text-cyan-400 text-xs",children:t.isDirectory?"ðŸ“":"ðŸ“„"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-widest",children:t.name}),e.jsxs("span",{className:"text-[8px] font-mono text-white/30",children:[t.size||0," bytes"]})]})]}),e.jsxs("div",{className:"flex gap-2 opacity-0 group-hover/item:opacity-100 transition-all",children:[e.jsx("button",{onClick:()=>u({...t,category:s}),className:`px-3 py-1 text-[8px] font-bold uppercase rounded border transition-all ${p?.name===t.name?"bg-neon-magenta/20 border-neon-magenta text-neon-magenta":"bg-white/5 border-white/10 text-white/40 hover:bg-white/10"}`,children:p?.name===t.name?"Source Active":"Pin as Source"}),e.jsx("button",{onClick:()=>v(t),className:"px-3 py-1 bg-cyan-500/20 border border-cyan-500/20 text-cyan-400 text-[8px] font-bold uppercase rounded hover:bg-cyan-500/40 transition-all",children:"Fork to Staging"})]})]},t.name))]}),e.jsx("div",{className:"h-16 border-t border-white/5 mt-4 flex items-center justify-between",children:e.jsx("div",{className:"text-[9px] font-mono text-white/20",children:"Archive Integrity: 100%"})})]}),e.jsx("div",{className:"w-[400px] flex flex-col gap-8",children:e.jsxs("div",{className:"glass-ultra rounded-[40px] p-8 border border-white/5 shadow-2xl flex flex-col gap-8 h-full bg-white/5 backdrop-blur-3xl",children:[e.jsx("div",{className:"text-[10px] font-black tracking-[0.4em] text-white/40 uppercase",children:"Archive Sectors"}),e.jsx("div",{className:"flex flex-col gap-3",children:["archives","locations","config","ids","sprites","models"].map(t=>e.jsxs("div",{onClick:()=>b(t),className:`p-4 glass rounded-2xl border flex items-center justify-between cursor-pointer transition-all
                                ${s===t?"border-cyan-500/40 bg-cyan-500/5":"border-white/5 hover:bg-white/5"}
                            `,children:[e.jsx("span",{className:`text-[10px] font-bold uppercase tracking-widest ${s===t?"text-cyan-400":"text-white/60"}`,children:t}),s===t&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-cyan-500 shadow-[0_0_10px_cyan]"})]},t))}),e.jsxs("div",{className:"mt-auto p-6 bg-cyan-500/5 rounded-3xl border border-cyan-500/20",children:[e.jsx("div",{className:"text-[9px] font-black text-cyan-500 uppercase tracking-widest mb-2",children:"Needs Analysis"}),e.jsxs("div",{className:"text-[10px] text-white/60 leading-relaxed",children:["Scanning reference implementation for missing assets. ",e.jsx("br",{}),"Target: ",s,e.jsx("br",{}),"Status: ",l.length>0?"ONLINE":"OFFLINE"]})]})]})})]})}export{_ as RelicWorkspace};
